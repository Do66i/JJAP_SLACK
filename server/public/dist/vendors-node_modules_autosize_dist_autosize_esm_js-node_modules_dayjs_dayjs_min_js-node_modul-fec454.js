(self["webpackChunkalecture"] = self["webpackChunkalecture"] || []).push([["vendors-node_modules_autosize_dist_autosize_esm_js-node_modules_dayjs_dayjs_min_js-node_modul-fec454"],{

/***/ "./node_modules/add-px-to-style/index.js":
/*!***********************************************!*\
  !*** ./node_modules/add-px-to-style/index.js ***!
  \***********************************************/
/***/ (function(module) {

/* The following list is defined in React's core */
var IS_UNITLESS = {
  animationIterationCount: true,
  boxFlex: true,
  boxFlexGroup: true,
  boxOrdinalGroup: true,
  columnCount: true,
  flex: true,
  flexGrow: true,
  flexPositive: true,
  flexShrink: true,
  flexNegative: true,
  flexOrder: true,
  gridRow: true,
  gridColumn: true,
  fontWeight: true,
  lineClamp: true,
  lineHeight: true,
  opacity: true,
  order: true,
  orphans: true,
  tabSize: true,
  widows: true,
  zIndex: true,
  zoom: true,

  // SVG-related properties
  fillOpacity: true,
  stopOpacity: true,
  strokeDashoffset: true,
  strokeOpacity: true,
  strokeWidth: true
};

module.exports = function(name, value) {
  if(typeof value === 'number' && !IS_UNITLESS[ name ]) {
    return value + 'px';
  } else {
    return value;
  }
};

/***/ }),

/***/ "./node_modules/autosize/dist/autosize.esm.js":
/*!****************************************************!*\
  !*** ./node_modules/autosize/dist/autosize.esm.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var e,t,n="function"==typeof Map?new Map:(e=[],t=[],{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,o){-1===e.indexOf(n)&&(e.push(n),t.push(o))},delete:function(n){var o=e.indexOf(n);o>-1&&(e.splice(o,1),t.splice(o,1))}}),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function r(e){var t=n.get(e);t&&t.destroy()}function i(e){var t=n.get(e);t&&t.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(e){return e}).destroy=function(e){return e},l.update=function(e){return e}):((l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!n.has(e)){var t,r=null,i=null,l=null,d=function(){e.clientWidth!==i&&c()},a=function(t){window.removeEventListener("resize",d,!1),e.removeEventListener("input",c,!1),e.removeEventListener("keyup",c,!1),e.removeEventListener("autosize:destroy",a,!1),e.removeEventListener("autosize:update",c,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),n.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",a,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",c,!1),window.addEventListener("resize",d,!1),e.addEventListener("input",c,!1),e.addEventListener("autosize:update",c,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",n.set(e,{destroy:a,update:c}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),r="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(r)&&(r=0),c()}function u(t){var n=e.style.width;e.style.width="0px",e.style.width=n,e.style.overflowY=t}function s(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+r+"px",i=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),n&&(document.documentElement.scrollTop=n)}}function c(){s();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r<t?"hidden"===n.overflowY&&(u("scroll"),s(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(u("hidden"),s(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),l!==r){l=r;var i=o("autosize:resized");try{e.dispatchEvent(i)}catch(e){}}}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e});var d=l;/* harmony default export */ __webpack_exports__["default"] = (d);


/***/ }),

/***/ "./node_modules/dayjs/dayjs.min.js":
/*!*****************************************!*\
  !*** ./node_modules/dayjs/dayjs.min.js ***!
  \*****************************************/
/***/ (function(module) {

!function(t,e){ true?module.exports=e():0}(this,(function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",f="month",h="quarter",c="year",d="date",$="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",D={};D[v]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return v;if("string"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split("-");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},w=function(t,e){if(p(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var v=this.$locale().weekStart||0,D=(y<v?y+7:y)-v;return $(r?m-D:m+(6-D),M);case a:case d:return l(g+"Hours",0);case u:return l(g+"Minutes",1);case s:return l(g+"Seconds",2);case i:return l(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h="set"+(this.$u?"UTC":""),$=(n={},n[a]=h+"Date",n[d]=h+"Date",n[f]=h+"Month",n[c]=h+"FullYear",n[u]=h+"Hours",n[s]=h+"Minutes",n[i]=h+"Seconds",n[r]=h+"Milliseconds",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,"0"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,v=O.m(this,M);return v=(l={},l[c]=v/12,l[f]=v,l[h]=v/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?v:O.a(v)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",f],["$y",c],["$D",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[v],w.Ls=D,w.p={},w}));

/***/ }),

/***/ "./node_modules/dom-css/index.js":
/*!***************************************!*\
  !*** ./node_modules/dom-css/index.js ***!
  \***************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var prefix = __webpack_require__(/*! prefix-style */ "./node_modules/prefix-style/index.js")
var toCamelCase = __webpack_require__(/*! to-camel-case */ "./node_modules/to-camel-case/index.js")
var cache = { 'float': 'cssFloat' }
var addPxToStyle = __webpack_require__(/*! add-px-to-style */ "./node_modules/add-px-to-style/index.js")

function style (element, property, value) {
  var camel = cache[property]
  if (typeof camel === 'undefined') {
    camel = detect(property)
  }

  // may be false if CSS prop is unsupported
  if (camel) {
    if (value === undefined) {
      return element.style[camel]
    }

    element.style[camel] = addPxToStyle(camel, value)
  }
}

function each (element, properties) {
  for (var k in properties) {
    if (properties.hasOwnProperty(k)) {
      style(element, k, properties[k])
    }
  }
}

function detect (cssProp) {
  var camel = toCamelCase(cssProp)
  var result = prefix(camel)
  cache[camel] = cache[cssProp] = cache[result] = result
  return result
}

function set () {
  if (arguments.length === 2) {
    if (typeof arguments[1] === 'string') {
      arguments[0].style.cssText = arguments[1]
    } else {
      each(arguments[0], arguments[1])
    }
  } else {
    style(arguments[0], arguments[1], arguments[2])
  }
}

module.exports = set
module.exports.set = set

module.exports.get = function (element, properties) {
  if (Array.isArray(properties)) {
    return properties.reduce(function (obj, prop) {
      obj[prop] = style(element, prop || '')
      return obj
    }, {})
  } else {
    return style(element, properties || '')
  }
}


/***/ }),

/***/ "./node_modules/invariant/browser.js":
/*!*******************************************!*\
  !*** ./node_modules/invariant/browser.js ***!
  \*******************************************/
/***/ (function(module) {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



/**
 * Use invariant() to assert state which your program assumes to be true.
 *
 * Provide sprintf-style format (only %s is supported) and arguments
 * to provide information about what broke and what you were
 * expecting.
 *
 * The invariant message will be stripped in production, but the invariant
 * will remain to ensure logic does not differ in production.
 */

var invariant = function(condition, format, a, b, c, d, e, f) {
  if (true) {
    if (format === undefined) {
      throw new Error('invariant requires an error message argument');
    }
  }

  if (!condition) {
    var error;
    if (format === undefined) {
      error = new Error(
        'Minified exception occurred; use the non-minified dev environment ' +
        'for the full error message and additional helpful warnings.'
      );
    } else {
      var args = [a, b, c, d, e, f];
      var argIndex = 0;
      error = new Error(
        format.replace(/%s/g, function() { return args[argIndex++]; })
      );
      error.name = 'Invariant Violation';
    }

    error.framesToPop = 1; // we don't care about invariant's own frame
    throw error;
  }
};

module.exports = invariant;


/***/ }),

/***/ "./node_modules/object-assign/index.js":
/*!*********************************************!*\
  !*** ./node_modules/object-assign/index.js ***!
  \*********************************************/
/***/ (function(module) {

"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/


/* eslint-disable no-unused-vars */
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line no-new-wrappers
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (err) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (getOwnPropertySymbols) {
			symbols = getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};


/***/ }),

/***/ "./node_modules/performance-now/lib/performance-now.js":
/*!*************************************************************!*\
  !*** ./node_modules/performance-now/lib/performance-now.js ***!
  \*************************************************************/
/***/ (function(module) {

// Generated by CoffeeScript 1.12.2
(function() {
  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;

  if ((typeof performance !== "undefined" && performance !== null) && performance.now) {
    module.exports = function() {
      return performance.now();
    };
  } else if ((typeof process !== "undefined" && process !== null) && process.hrtime) {
    module.exports = function() {
      return (getNanoSeconds() - nodeLoadTime) / 1e6;
    };
    hrtime = process.hrtime;
    getNanoSeconds = function() {
      var hr;
      hr = hrtime();
      return hr[0] * 1e9 + hr[1];
    };
    moduleLoadTime = getNanoSeconds();
    upTime = process.uptime() * 1e9;
    nodeLoadTime = moduleLoadTime - upTime;
  } else if (Date.now) {
    module.exports = function() {
      return Date.now() - loadTime;
    };
    loadTime = Date.now();
  } else {
    module.exports = function() {
      return new Date().getTime() - loadTime;
    };
    loadTime = new Date().getTime();
  }

}).call(this);

//# sourceMappingURL=performance-now.js.map


/***/ }),

/***/ "./node_modules/prefix-style/index.js":
/*!********************************************!*\
  !*** ./node_modules/prefix-style/index.js ***!
  \********************************************/
/***/ (function(module) {

var div = null
var prefixes = [ 'Webkit', 'Moz', 'O', 'ms' ]

module.exports = function prefixStyle (prop) {
  // re-use a dummy div
  if (!div) {
    div = document.createElement('div')
  }

  var style = div.style

  // prop exists without prefix
  if (prop in style) {
    return prop
  }

  // borderRadius -> BorderRadius
  var titleCase = prop.charAt(0).toUpperCase() + prop.slice(1)

  // find the vendor-prefixed prop
  for (var i = prefixes.length; i >= 0; i--) {
    var name = prefixes[i] + titleCase
    // e.g. WebkitBorderRadius or webkitBorderRadius
    if (name in style) {
      return name
    }
  }

  return false
}


/***/ }),

/***/ "./node_modules/prop-types/checkPropTypes.js":
/*!***************************************************!*\
  !*** ./node_modules/prop-types/checkPropTypes.js ***!
  \***************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



var printWarning = function() {};

if (true) {
  var ReactPropTypesSecret = __webpack_require__(/*! ./lib/ReactPropTypesSecret */ "./node_modules/prop-types/lib/ReactPropTypesSecret.js");
  var loggedTypeFailures = {};
  var has = __webpack_require__(/*! ./lib/has */ "./node_modules/prop-types/lib/has.js");

  printWarning = function(text) {
    var message = 'Warning: ' + text;
    if (typeof console !== 'undefined') {
      console.error(message);
    }
    try {
      // --- Welcome to debugging React ---
      // This error was thrown as a convenience so that you can use this stack
      // to find the callsite that caused this warning to fire.
      throw new Error(message);
    } catch (x) { /**/ }
  };
}

/**
 * Assert that the values match with the type specs.
 * Error messages are memorized and will only be shown once.
 *
 * @param {object} typeSpecs Map of name to a ReactPropType
 * @param {object} values Runtime values that need to be type-checked
 * @param {string} location e.g. "prop", "context", "child context"
 * @param {string} componentName Name of the component for error messages.
 * @param {?Function} getStack Returns the component stack.
 * @private
 */
function checkPropTypes(typeSpecs, values, location, componentName, getStack) {
  if (true) {
    for (var typeSpecName in typeSpecs) {
      if (has(typeSpecs, typeSpecName)) {
        var error;
        // Prop type validation may throw. In case they do, we don't want to
        // fail the render phase where it didn't fail before. So we log it.
        // After these have been cleaned up, we'll let them throw.
        try {
          // This is intentionally an invariant that gets caught. It's the same
          // behavior as without this statement except with a better message.
          if (typeof typeSpecs[typeSpecName] !== 'function') {
            var err = Error(
              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +
              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +
              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'
            );
            err.name = 'Invariant Violation';
            throw err;
          }
          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);
        } catch (ex) {
          error = ex;
        }
        if (error && !(error instanceof Error)) {
          printWarning(
            (componentName || 'React class') + ': type specification of ' +
            location + ' `' + typeSpecName + '` is invalid; the type checker ' +
            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +
            'You may have forgotten to pass an argument to the type checker ' +
            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +
            'shape all require an argument).'
          );
        }
        if (error instanceof Error && !(error.message in loggedTypeFailures)) {
          // Only monitor this failure once because there tends to be a lot of the
          // same error.
          loggedTypeFailures[error.message] = true;

          var stack = getStack ? getStack() : '';

          printWarning(
            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')
          );
        }
      }
    }
  }
}

/**
 * Resets warning cache when testing.
 *
 * @private
 */
checkPropTypes.resetWarningCache = function() {
  if (true) {
    loggedTypeFailures = {};
  }
}

module.exports = checkPropTypes;


/***/ }),

/***/ "./node_modules/prop-types/factoryWithTypeCheckers.js":
/*!************************************************************!*\
  !*** ./node_modules/prop-types/factoryWithTypeCheckers.js ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



var ReactIs = __webpack_require__(/*! react-is */ "./node_modules/react-is/index.js");
var assign = __webpack_require__(/*! object-assign */ "./node_modules/object-assign/index.js");

var ReactPropTypesSecret = __webpack_require__(/*! ./lib/ReactPropTypesSecret */ "./node_modules/prop-types/lib/ReactPropTypesSecret.js");
var has = __webpack_require__(/*! ./lib/has */ "./node_modules/prop-types/lib/has.js");
var checkPropTypes = __webpack_require__(/*! ./checkPropTypes */ "./node_modules/prop-types/checkPropTypes.js");

var printWarning = function() {};

if (true) {
  printWarning = function(text) {
    var message = 'Warning: ' + text;
    if (typeof console !== 'undefined') {
      console.error(message);
    }
    try {
      // --- Welcome to debugging React ---
      // This error was thrown as a convenience so that you can use this stack
      // to find the callsite that caused this warning to fire.
      throw new Error(message);
    } catch (x) {}
  };
}

function emptyFunctionThatReturnsNull() {
  return null;
}

module.exports = function(isValidElement, throwOnDirectAccess) {
  /* global Symbol */
  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;
  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.

  /**
   * Returns the iterator method function contained on the iterable object.
   *
   * Be sure to invoke the function with the iterable as context:
   *
   *     var iteratorFn = getIteratorFn(myIterable);
   *     if (iteratorFn) {
   *       var iterator = iteratorFn.call(myIterable);
   *       ...
   *     }
   *
   * @param {?object} maybeIterable
   * @return {?function}
   */
  function getIteratorFn(maybeIterable) {
    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);
    if (typeof iteratorFn === 'function') {
      return iteratorFn;
    }
  }

  /**
   * Collection of methods that allow declaration and validation of props that are
   * supplied to React components. Example usage:
   *
   *   var Props = require('ReactPropTypes');
   *   var MyArticle = React.createClass({
   *     propTypes: {
   *       // An optional string prop named "description".
   *       description: Props.string,
   *
   *       // A required enum prop named "category".
   *       category: Props.oneOf(['News','Photos']).isRequired,
   *
   *       // A prop named "dialog" that requires an instance of Dialog.
   *       dialog: Props.instanceOf(Dialog).isRequired
   *     },
   *     render: function() { ... }
   *   });
   *
   * A more formal specification of how these methods are used:
   *
   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)
   *   decl := ReactPropTypes.{type}(.isRequired)?
   *
   * Each and every declaration produces a function with the same signature. This
   * allows the creation of custom validation functions. For example:
   *
   *  var MyLink = React.createClass({
   *    propTypes: {
   *      // An optional string or URI prop named "href".
   *      href: function(props, propName, componentName) {
   *        var propValue = props[propName];
   *        if (propValue != null && typeof propValue !== 'string' &&
   *            !(propValue instanceof URI)) {
   *          return new Error(
   *            'Expected a string or an URI for ' + propName + ' in ' +
   *            componentName
   *          );
   *        }
   *      }
   *    },
   *    render: function() {...}
   *  });
   *
   * @internal
   */

  var ANONYMOUS = '<<anonymous>>';

  // Important!
  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.
  var ReactPropTypes = {
    array: createPrimitiveTypeChecker('array'),
    bigint: createPrimitiveTypeChecker('bigint'),
    bool: createPrimitiveTypeChecker('boolean'),
    func: createPrimitiveTypeChecker('function'),
    number: createPrimitiveTypeChecker('number'),
    object: createPrimitiveTypeChecker('object'),
    string: createPrimitiveTypeChecker('string'),
    symbol: createPrimitiveTypeChecker('symbol'),

    any: createAnyTypeChecker(),
    arrayOf: createArrayOfTypeChecker,
    element: createElementTypeChecker(),
    elementType: createElementTypeTypeChecker(),
    instanceOf: createInstanceTypeChecker,
    node: createNodeChecker(),
    objectOf: createObjectOfTypeChecker,
    oneOf: createEnumTypeChecker,
    oneOfType: createUnionTypeChecker,
    shape: createShapeTypeChecker,
    exact: createStrictShapeTypeChecker,
  };

  /**
   * inlined Object.is polyfill to avoid requiring consumers ship their own
   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
   */
  /*eslint-disable no-self-compare*/
  function is(x, y) {
    // SameValue algorithm
    if (x === y) {
      // Steps 1-5, 7-10
      // Steps 6.b-6.e: +0 != -0
      return x !== 0 || 1 / x === 1 / y;
    } else {
      // Step 6.a: NaN == NaN
      return x !== x && y !== y;
    }
  }
  /*eslint-enable no-self-compare*/

  /**
   * We use an Error-like object for backward compatibility as people may call
   * PropTypes directly and inspect their output. However, we don't use real
   * Errors anymore. We don't inspect their stack anyway, and creating them
   * is prohibitively expensive if they are created too often, such as what
   * happens in oneOfType() for any type before the one that matched.
   */
  function PropTypeError(message, data) {
    this.message = message;
    this.data = data && typeof data === 'object' ? data: {};
    this.stack = '';
  }
  // Make `instanceof Error` still work for returned errors.
  PropTypeError.prototype = Error.prototype;

  function createChainableTypeChecker(validate) {
    if (true) {
      var manualPropTypeCallCache = {};
      var manualPropTypeWarningCount = 0;
    }
    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {
      componentName = componentName || ANONYMOUS;
      propFullName = propFullName || propName;

      if (secret !== ReactPropTypesSecret) {
        if (throwOnDirectAccess) {
          // New behavior only for users of `prop-types` package
          var err = new Error(
            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +
            'Use `PropTypes.checkPropTypes()` to call them. ' +
            'Read more at http://fb.me/use-check-prop-types'
          );
          err.name = 'Invariant Violation';
          throw err;
        } else if ( true && typeof console !== 'undefined') {
          // Old behavior for people using React.PropTypes
          var cacheKey = componentName + ':' + propName;
          if (
            !manualPropTypeCallCache[cacheKey] &&
            // Avoid spamming the console because they are often not actionable except for lib authors
            manualPropTypeWarningCount < 3
          ) {
            printWarning(
              'You are manually calling a React.PropTypes validation ' +
              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +
              'and will throw in the standalone `prop-types` package. ' +
              'You may be seeing this warning due to a third-party PropTypes ' +
              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'
            );
            manualPropTypeCallCache[cacheKey] = true;
            manualPropTypeWarningCount++;
          }
        }
      }
      if (props[propName] == null) {
        if (isRequired) {
          if (props[propName] === null) {
            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));
          }
          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));
        }
        return null;
      } else {
        return validate(props, propName, componentName, location, propFullName);
      }
    }

    var chainedCheckType = checkType.bind(null, false);
    chainedCheckType.isRequired = checkType.bind(null, true);

    return chainedCheckType;
  }

  function createPrimitiveTypeChecker(expectedType) {
    function validate(props, propName, componentName, location, propFullName, secret) {
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== expectedType) {
        // `propValue` being instance of, say, date/regexp, pass the 'object'
        // check, but we can offer a more precise error message here rather than
        // 'of type `object`'.
        var preciseType = getPreciseType(propValue);

        return new PropTypeError(
          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),
          {expectedType: expectedType}
        );
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createAnyTypeChecker() {
    return createChainableTypeChecker(emptyFunctionThatReturnsNull);
  }

  function createArrayOfTypeChecker(typeChecker) {
    function validate(props, propName, componentName, location, propFullName) {
      if (typeof typeChecker !== 'function') {
        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');
      }
      var propValue = props[propName];
      if (!Array.isArray(propValue)) {
        var propType = getPropType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));
      }
      for (var i = 0; i < propValue.length; i++) {
        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);
        if (error instanceof Error) {
          return error;
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createElementTypeChecker() {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      if (!isValidElement(propValue)) {
        var propType = getPropType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createElementTypeTypeChecker() {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      if (!ReactIs.isValidElementType(propValue)) {
        var propType = getPropType(propValue);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createInstanceTypeChecker(expectedClass) {
    function validate(props, propName, componentName, location, propFullName) {
      if (!(props[propName] instanceof expectedClass)) {
        var expectedClassName = expectedClass.name || ANONYMOUS;
        var actualClassName = getClassName(props[propName]);
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createEnumTypeChecker(expectedValues) {
    if (!Array.isArray(expectedValues)) {
      if (true) {
        if (arguments.length > 1) {
          printWarning(
            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +
            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'
          );
        } else {
          printWarning('Invalid argument supplied to oneOf, expected an array.');
        }
      }
      return emptyFunctionThatReturnsNull;
    }

    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      for (var i = 0; i < expectedValues.length; i++) {
        if (is(propValue, expectedValues[i])) {
          return null;
        }
      }

      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {
        var type = getPreciseType(value);
        if (type === 'symbol') {
          return String(value);
        }
        return value;
      });
      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));
    }
    return createChainableTypeChecker(validate);
  }

  function createObjectOfTypeChecker(typeChecker) {
    function validate(props, propName, componentName, location, propFullName) {
      if (typeof typeChecker !== 'function') {
        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');
      }
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== 'object') {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));
      }
      for (var key in propValue) {
        if (has(propValue, key)) {
          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);
          if (error instanceof Error) {
            return error;
          }
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createUnionTypeChecker(arrayOfTypeCheckers) {
    if (!Array.isArray(arrayOfTypeCheckers)) {
       true ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : 0;
      return emptyFunctionThatReturnsNull;
    }

    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
      var checker = arrayOfTypeCheckers[i];
      if (typeof checker !== 'function') {
        printWarning(
          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +
          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'
        );
        return emptyFunctionThatReturnsNull;
      }
    }

    function validate(props, propName, componentName, location, propFullName) {
      var expectedTypes = [];
      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {
        var checker = arrayOfTypeCheckers[i];
        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);
        if (checkerResult == null) {
          return null;
        }
        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {
          expectedTypes.push(checkerResult.data.expectedType);
        }
      }
      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';
      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));
    }
    return createChainableTypeChecker(validate);
  }

  function createNodeChecker() {
    function validate(props, propName, componentName, location, propFullName) {
      if (!isNode(props[propName])) {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function invalidValidatorError(componentName, location, propFullName, key, type) {
    return new PropTypeError(
      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +
      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'
    );
  }

  function createShapeTypeChecker(shapeTypes) {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== 'object') {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));
      }
      for (var key in shapeTypes) {
        var checker = shapeTypes[key];
        if (typeof checker !== 'function') {
          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));
        }
        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);
        if (error) {
          return error;
        }
      }
      return null;
    }
    return createChainableTypeChecker(validate);
  }

  function createStrictShapeTypeChecker(shapeTypes) {
    function validate(props, propName, componentName, location, propFullName) {
      var propValue = props[propName];
      var propType = getPropType(propValue);
      if (propType !== 'object') {
        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));
      }
      // We need to check all keys in case some are required but missing from props.
      var allKeys = assign({}, props[propName], shapeTypes);
      for (var key in allKeys) {
        var checker = shapeTypes[key];
        if (has(shapeTypes, key) && typeof checker !== 'function') {
          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));
        }
        if (!checker) {
          return new PropTypeError(
            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +
            '\nBad object: ' + JSON.stringify(props[propName], null, '  ') +
            '\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')
          );
        }
        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);
        if (error) {
          return error;
        }
      }
      return null;
    }

    return createChainableTypeChecker(validate);
  }

  function isNode(propValue) {
    switch (typeof propValue) {
      case 'number':
      case 'string':
      case 'undefined':
        return true;
      case 'boolean':
        return !propValue;
      case 'object':
        if (Array.isArray(propValue)) {
          return propValue.every(isNode);
        }
        if (propValue === null || isValidElement(propValue)) {
          return true;
        }

        var iteratorFn = getIteratorFn(propValue);
        if (iteratorFn) {
          var iterator = iteratorFn.call(propValue);
          var step;
          if (iteratorFn !== propValue.entries) {
            while (!(step = iterator.next()).done) {
              if (!isNode(step.value)) {
                return false;
              }
            }
          } else {
            // Iterator will provide entry [k,v] tuples rather than values.
            while (!(step = iterator.next()).done) {
              var entry = step.value;
              if (entry) {
                if (!isNode(entry[1])) {
                  return false;
                }
              }
            }
          }
        } else {
          return false;
        }

        return true;
      default:
        return false;
    }
  }

  function isSymbol(propType, propValue) {
    // Native Symbol.
    if (propType === 'symbol') {
      return true;
    }

    // falsy value can't be a Symbol
    if (!propValue) {
      return false;
    }

    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'
    if (propValue['@@toStringTag'] === 'Symbol') {
      return true;
    }

    // Fallback for non-spec compliant Symbols which are polyfilled.
    if (typeof Symbol === 'function' && propValue instanceof Symbol) {
      return true;
    }

    return false;
  }

  // Equivalent of `typeof` but with special handling for array and regexp.
  function getPropType(propValue) {
    var propType = typeof propValue;
    if (Array.isArray(propValue)) {
      return 'array';
    }
    if (propValue instanceof RegExp) {
      // Old webkits (at least until Android 4.0) return 'function' rather than
      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/
      // passes PropTypes.object.
      return 'object';
    }
    if (isSymbol(propType, propValue)) {
      return 'symbol';
    }
    return propType;
  }

  // This handles more types than `getPropType`. Only used for error messages.
  // See `createPrimitiveTypeChecker`.
  function getPreciseType(propValue) {
    if (typeof propValue === 'undefined' || propValue === null) {
      return '' + propValue;
    }
    var propType = getPropType(propValue);
    if (propType === 'object') {
      if (propValue instanceof Date) {
        return 'date';
      } else if (propValue instanceof RegExp) {
        return 'regexp';
      }
    }
    return propType;
  }

  // Returns a string that is postfixed to a warning about an invalid type.
  // For example, "undefined" or "of type array"
  function getPostfixForTypeWarning(value) {
    var type = getPreciseType(value);
    switch (type) {
      case 'array':
      case 'object':
        return 'an ' + type;
      case 'boolean':
      case 'date':
      case 'regexp':
        return 'a ' + type;
      default:
        return type;
    }
  }

  // Returns class name of the object, if any.
  function getClassName(propValue) {
    if (!propValue.constructor || !propValue.constructor.name) {
      return ANONYMOUS;
    }
    return propValue.constructor.name;
  }

  ReactPropTypes.checkPropTypes = checkPropTypes;
  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;
  ReactPropTypes.PropTypes = ReactPropTypes;

  return ReactPropTypes;
};


/***/ }),

/***/ "./node_modules/prop-types/index.js":
/*!******************************************!*\
  !*** ./node_modules/prop-types/index.js ***!
  \******************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

if (true) {
  var ReactIs = __webpack_require__(/*! react-is */ "./node_modules/react-is/index.js");

  // By explicitly using `prop-types` you are opting into new development behavior.
  // http://fb.me/prop-types-in-prod
  var throwOnDirectAccess = true;
  module.exports = __webpack_require__(/*! ./factoryWithTypeCheckers */ "./node_modules/prop-types/factoryWithTypeCheckers.js")(ReactIs.isElement, throwOnDirectAccess);
} else {}


/***/ }),

/***/ "./node_modules/prop-types/lib/ReactPropTypesSecret.js":
/*!*************************************************************!*\
  !*** ./node_modules/prop-types/lib/ReactPropTypesSecret.js ***!
  \*************************************************************/
/***/ (function(module) {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';

module.exports = ReactPropTypesSecret;


/***/ }),

/***/ "./node_modules/prop-types/lib/has.js":
/*!********************************************!*\
  !*** ./node_modules/prop-types/lib/has.js ***!
  \********************************************/
/***/ (function(module) {

module.exports = Function.call.bind(Object.prototype.hasOwnProperty);


/***/ }),

/***/ "./node_modules/raf/index.js":
/*!***********************************!*\
  !*** ./node_modules/raf/index.js ***!
  \***********************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var now = __webpack_require__(/*! performance-now */ "./node_modules/performance-now/lib/performance-now.js")
  , root = typeof window === 'undefined' ? __webpack_require__.g : window
  , vendors = ['moz', 'webkit']
  , suffix = 'AnimationFrame'
  , raf = root['request' + suffix]
  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]

for(var i = 0; !raf && i < vendors.length; i++) {
  raf = root[vendors[i] + 'Request' + suffix]
  caf = root[vendors[i] + 'Cancel' + suffix]
      || root[vendors[i] + 'CancelRequest' + suffix]
}

// Some versions of FF have rAF but not cAF
if(!raf || !caf) {
  var last = 0
    , id = 0
    , queue = []
    , frameDuration = 1000 / 60

  raf = function(callback) {
    if(queue.length === 0) {
      var _now = now()
        , next = Math.max(0, frameDuration - (_now - last))
      last = next + _now
      setTimeout(function() {
        var cp = queue.slice(0)
        // Clear queue here to prevent
        // callbacks from appending listeners
        // to the current frame's queue
        queue.length = 0
        for(var i = 0; i < cp.length; i++) {
          if(!cp[i].cancelled) {
            try{
              cp[i].callback(last)
            } catch(e) {
              setTimeout(function() { throw e }, 0)
            }
          }
        }
      }, Math.round(next))
    }
    queue.push({
      handle: ++id,
      callback: callback,
      cancelled: false
    })
    return id
  }

  caf = function(handle) {
    for(var i = 0; i < queue.length; i++) {
      if(queue[i].handle === handle) {
        queue[i].cancelled = true
      }
    }
  }
}

module.exports = function(fn) {
  // Wrap in a new function to prevent
  // `cancel` potentially being assigned
  // to the native rAF function
  return raf.call(root, fn)
}
module.exports.cancel = function() {
  caf.apply(root, arguments)
}
module.exports.polyfill = function(object) {
  if (!object) {
    object = root;
  }
  object.requestAnimationFrame = raf
  object.cancelAnimationFrame = caf
}


/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/Scrollbars/defaultRenderElements.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/Scrollbars/defaultRenderElements.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.renderViewDefault = renderViewDefault;
exports.renderTrackHorizontalDefault = renderTrackHorizontalDefault;
exports.renderTrackVerticalDefault = renderTrackVerticalDefault;
exports.renderThumbHorizontalDefault = renderThumbHorizontalDefault;
exports.renderThumbVerticalDefault = renderThumbVerticalDefault;

var _react = __webpack_require__(/*! react */ "./node_modules/react/index.js");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

/* eslint-disable react/prop-types */

function renderViewDefault(props) {
    return _react2["default"].createElement('div', props);
}

function renderTrackHorizontalDefault(_ref) {
    var style = _ref.style,
        props = _objectWithoutProperties(_ref, ['style']);

    var finalStyle = _extends({}, style, {
        right: 2,
        bottom: 2,
        left: 2,
        borderRadius: 3
    });
    return _react2["default"].createElement('div', _extends({ style: finalStyle }, props));
}

function renderTrackVerticalDefault(_ref2) {
    var style = _ref2.style,
        props = _objectWithoutProperties(_ref2, ['style']);

    var finalStyle = _extends({}, style, {
        right: 2,
        bottom: 2,
        top: 2,
        borderRadius: 3
    });
    return _react2["default"].createElement('div', _extends({ style: finalStyle }, props));
}

function renderThumbHorizontalDefault(_ref3) {
    var style = _ref3.style,
        props = _objectWithoutProperties(_ref3, ['style']);

    var finalStyle = _extends({}, style, {
        cursor: 'pointer',
        borderRadius: 'inherit',
        backgroundColor: 'rgba(0,0,0,.2)'
    });
    return _react2["default"].createElement('div', _extends({ style: finalStyle }, props));
}

function renderThumbVerticalDefault(_ref4) {
    var style = _ref4.style,
        props = _objectWithoutProperties(_ref4, ['style']);

    var finalStyle = _extends({}, style, {
        cursor: 'pointer',
        borderRadius: 'inherit',
        backgroundColor: 'rgba(0,0,0,.2)'
    });
    return _react2["default"].createElement('div', _extends({ style: finalStyle }, props));
}

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/Scrollbars/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/Scrollbars/index.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _raf2 = __webpack_require__(/*! raf */ "./node_modules/raf/index.js");

var _raf3 = _interopRequireDefault(_raf2);

var _domCss = __webpack_require__(/*! dom-css */ "./node_modules/dom-css/index.js");

var _domCss2 = _interopRequireDefault(_domCss);

var _react = __webpack_require__(/*! react */ "./node_modules/react/index.js");

var _propTypes = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _isString = __webpack_require__(/*! ../utils/isString */ "./node_modules/react-custom-scrollbars/lib/utils/isString.js");

var _isString2 = _interopRequireDefault(_isString);

var _getScrollbarWidth = __webpack_require__(/*! ../utils/getScrollbarWidth */ "./node_modules/react-custom-scrollbars/lib/utils/getScrollbarWidth.js");

var _getScrollbarWidth2 = _interopRequireDefault(_getScrollbarWidth);

var _returnFalse = __webpack_require__(/*! ../utils/returnFalse */ "./node_modules/react-custom-scrollbars/lib/utils/returnFalse.js");

var _returnFalse2 = _interopRequireDefault(_returnFalse);

var _getInnerWidth = __webpack_require__(/*! ../utils/getInnerWidth */ "./node_modules/react-custom-scrollbars/lib/utils/getInnerWidth.js");

var _getInnerWidth2 = _interopRequireDefault(_getInnerWidth);

var _getInnerHeight = __webpack_require__(/*! ../utils/getInnerHeight */ "./node_modules/react-custom-scrollbars/lib/utils/getInnerHeight.js");

var _getInnerHeight2 = _interopRequireDefault(_getInnerHeight);

var _styles = __webpack_require__(/*! ./styles */ "./node_modules/react-custom-scrollbars/lib/Scrollbars/styles.js");

var _defaultRenderElements = __webpack_require__(/*! ./defaultRenderElements */ "./node_modules/react-custom-scrollbars/lib/Scrollbars/defaultRenderElements.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Scrollbars = function (_Component) {
    _inherits(Scrollbars, _Component);

    function Scrollbars(props) {
        var _ref;

        _classCallCheck(this, Scrollbars);

        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            rest[_key - 1] = arguments[_key];
        }

        var _this = _possibleConstructorReturn(this, (_ref = Scrollbars.__proto__ || Object.getPrototypeOf(Scrollbars)).call.apply(_ref, [this, props].concat(rest)));

        _this.getScrollLeft = _this.getScrollLeft.bind(_this);
        _this.getScrollTop = _this.getScrollTop.bind(_this);
        _this.getScrollWidth = _this.getScrollWidth.bind(_this);
        _this.getScrollHeight = _this.getScrollHeight.bind(_this);
        _this.getClientWidth = _this.getClientWidth.bind(_this);
        _this.getClientHeight = _this.getClientHeight.bind(_this);
        _this.getValues = _this.getValues.bind(_this);
        _this.getThumbHorizontalWidth = _this.getThumbHorizontalWidth.bind(_this);
        _this.getThumbVerticalHeight = _this.getThumbVerticalHeight.bind(_this);
        _this.getScrollLeftForOffset = _this.getScrollLeftForOffset.bind(_this);
        _this.getScrollTopForOffset = _this.getScrollTopForOffset.bind(_this);

        _this.scrollLeft = _this.scrollLeft.bind(_this);
        _this.scrollTop = _this.scrollTop.bind(_this);
        _this.scrollToLeft = _this.scrollToLeft.bind(_this);
        _this.scrollToTop = _this.scrollToTop.bind(_this);
        _this.scrollToRight = _this.scrollToRight.bind(_this);
        _this.scrollToBottom = _this.scrollToBottom.bind(_this);

        _this.handleTrackMouseEnter = _this.handleTrackMouseEnter.bind(_this);
        _this.handleTrackMouseLeave = _this.handleTrackMouseLeave.bind(_this);
        _this.handleHorizontalTrackMouseDown = _this.handleHorizontalTrackMouseDown.bind(_this);
        _this.handleVerticalTrackMouseDown = _this.handleVerticalTrackMouseDown.bind(_this);
        _this.handleHorizontalThumbMouseDown = _this.handleHorizontalThumbMouseDown.bind(_this);
        _this.handleVerticalThumbMouseDown = _this.handleVerticalThumbMouseDown.bind(_this);
        _this.handleWindowResize = _this.handleWindowResize.bind(_this);
        _this.handleScroll = _this.handleScroll.bind(_this);
        _this.handleDrag = _this.handleDrag.bind(_this);
        _this.handleDragEnd = _this.handleDragEnd.bind(_this);

        _this.state = {
            didMountUniversal: false
        };
        return _this;
    }

    _createClass(Scrollbars, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.addListeners();
            this.update();
            this.componentDidMountUniversal();
        }
    }, {
        key: 'componentDidMountUniversal',
        value: function componentDidMountUniversal() {
            // eslint-disable-line react/sort-comp
            var universal = this.props.universal;

            if (!universal) return;
            this.setState({ didMountUniversal: true });
        }
    }, {
        key: 'componentDidUpdate',
        value: function componentDidUpdate() {
            this.update();
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.removeListeners();
            (0, _raf2.cancel)(this.requestFrame);
            clearTimeout(this.hideTracksTimeout);
            clearInterval(this.detectScrollingInterval);
        }
    }, {
        key: 'getScrollLeft',
        value: function getScrollLeft() {
            if (!this.view) return 0;
            return this.view.scrollLeft;
        }
    }, {
        key: 'getScrollTop',
        value: function getScrollTop() {
            if (!this.view) return 0;
            return this.view.scrollTop;
        }
    }, {
        key: 'getScrollWidth',
        value: function getScrollWidth() {
            if (!this.view) return 0;
            return this.view.scrollWidth;
        }
    }, {
        key: 'getScrollHeight',
        value: function getScrollHeight() {
            if (!this.view) return 0;
            return this.view.scrollHeight;
        }
    }, {
        key: 'getClientWidth',
        value: function getClientWidth() {
            if (!this.view) return 0;
            return this.view.clientWidth;
        }
    }, {
        key: 'getClientHeight',
        value: function getClientHeight() {
            if (!this.view) return 0;
            return this.view.clientHeight;
        }
    }, {
        key: 'getValues',
        value: function getValues() {
            var _ref2 = this.view || {},
                _ref2$scrollLeft = _ref2.scrollLeft,
                scrollLeft = _ref2$scrollLeft === undefined ? 0 : _ref2$scrollLeft,
                _ref2$scrollTop = _ref2.scrollTop,
                scrollTop = _ref2$scrollTop === undefined ? 0 : _ref2$scrollTop,
                _ref2$scrollWidth = _ref2.scrollWidth,
                scrollWidth = _ref2$scrollWidth === undefined ? 0 : _ref2$scrollWidth,
                _ref2$scrollHeight = _ref2.scrollHeight,
                scrollHeight = _ref2$scrollHeight === undefined ? 0 : _ref2$scrollHeight,
                _ref2$clientWidth = _ref2.clientWidth,
                clientWidth = _ref2$clientWidth === undefined ? 0 : _ref2$clientWidth,
                _ref2$clientHeight = _ref2.clientHeight,
                clientHeight = _ref2$clientHeight === undefined ? 0 : _ref2$clientHeight;

            return {
                left: scrollLeft / (scrollWidth - clientWidth) || 0,
                top: scrollTop / (scrollHeight - clientHeight) || 0,
                scrollLeft: scrollLeft,
                scrollTop: scrollTop,
                scrollWidth: scrollWidth,
                scrollHeight: scrollHeight,
                clientWidth: clientWidth,
                clientHeight: clientHeight
            };
        }
    }, {
        key: 'getThumbHorizontalWidth',
        value: function getThumbHorizontalWidth() {
            var _props = this.props,
                thumbSize = _props.thumbSize,
                thumbMinSize = _props.thumbMinSize;
            var _view = this.view,
                scrollWidth = _view.scrollWidth,
                clientWidth = _view.clientWidth;

            var trackWidth = (0, _getInnerWidth2["default"])(this.trackHorizontal);
            var width = Math.ceil(clientWidth / scrollWidth * trackWidth);
            if (trackWidth === width) return 0;
            if (thumbSize) return thumbSize;
            return Math.max(width, thumbMinSize);
        }
    }, {
        key: 'getThumbVerticalHeight',
        value: function getThumbVerticalHeight() {
            var _props2 = this.props,
                thumbSize = _props2.thumbSize,
                thumbMinSize = _props2.thumbMinSize;
            var _view2 = this.view,
                scrollHeight = _view2.scrollHeight,
                clientHeight = _view2.clientHeight;

            var trackHeight = (0, _getInnerHeight2["default"])(this.trackVertical);
            var height = Math.ceil(clientHeight / scrollHeight * trackHeight);
            if (trackHeight === height) return 0;
            if (thumbSize) return thumbSize;
            return Math.max(height, thumbMinSize);
        }
    }, {
        key: 'getScrollLeftForOffset',
        value: function getScrollLeftForOffset(offset) {
            var _view3 = this.view,
                scrollWidth = _view3.scrollWidth,
                clientWidth = _view3.clientWidth;

            var trackWidth = (0, _getInnerWidth2["default"])(this.trackHorizontal);
            var thumbWidth = this.getThumbHorizontalWidth();
            return offset / (trackWidth - thumbWidth) * (scrollWidth - clientWidth);
        }
    }, {
        key: 'getScrollTopForOffset',
        value: function getScrollTopForOffset(offset) {
            var _view4 = this.view,
                scrollHeight = _view4.scrollHeight,
                clientHeight = _view4.clientHeight;

            var trackHeight = (0, _getInnerHeight2["default"])(this.trackVertical);
            var thumbHeight = this.getThumbVerticalHeight();
            return offset / (trackHeight - thumbHeight) * (scrollHeight - clientHeight);
        }
    }, {
        key: 'scrollLeft',
        value: function scrollLeft() {
            var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

            if (!this.view) return;
            this.view.scrollLeft = left;
        }
    }, {
        key: 'scrollTop',
        value: function scrollTop() {
            var top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

            if (!this.view) return;
            this.view.scrollTop = top;
        }
    }, {
        key: 'scrollToLeft',
        value: function scrollToLeft() {
            if (!this.view) return;
            this.view.scrollLeft = 0;
        }
    }, {
        key: 'scrollToTop',
        value: function scrollToTop() {
            if (!this.view) return;
            this.view.scrollTop = 0;
        }
    }, {
        key: 'scrollToRight',
        value: function scrollToRight() {
            if (!this.view) return;
            this.view.scrollLeft = this.view.scrollWidth;
        }
    }, {
        key: 'scrollToBottom',
        value: function scrollToBottom() {
            if (!this.view) return;
            this.view.scrollTop = this.view.scrollHeight;
        }
    }, {
        key: 'addListeners',
        value: function addListeners() {
            /* istanbul ignore if */
            if (typeof document === 'undefined' || !this.view) return;
            var view = this.view,
                trackHorizontal = this.trackHorizontal,
                trackVertical = this.trackVertical,
                thumbHorizontal = this.thumbHorizontal,
                thumbVertical = this.thumbVertical;

            view.addEventListener('scroll', this.handleScroll);
            if (!(0, _getScrollbarWidth2["default"])()) return;
            trackHorizontal.addEventListener('mouseenter', this.handleTrackMouseEnter);
            trackHorizontal.addEventListener('mouseleave', this.handleTrackMouseLeave);
            trackHorizontal.addEventListener('mousedown', this.handleHorizontalTrackMouseDown);
            trackVertical.addEventListener('mouseenter', this.handleTrackMouseEnter);
            trackVertical.addEventListener('mouseleave', this.handleTrackMouseLeave);
            trackVertical.addEventListener('mousedown', this.handleVerticalTrackMouseDown);
            thumbHorizontal.addEventListener('mousedown', this.handleHorizontalThumbMouseDown);
            thumbVertical.addEventListener('mousedown', this.handleVerticalThumbMouseDown);
            window.addEventListener('resize', this.handleWindowResize);
        }
    }, {
        key: 'removeListeners',
        value: function removeListeners() {
            /* istanbul ignore if */
            if (typeof document === 'undefined' || !this.view) return;
            var view = this.view,
                trackHorizontal = this.trackHorizontal,
                trackVertical = this.trackVertical,
                thumbHorizontal = this.thumbHorizontal,
                thumbVertical = this.thumbVertical;

            view.removeEventListener('scroll', this.handleScroll);
            if (!(0, _getScrollbarWidth2["default"])()) return;
            trackHorizontal.removeEventListener('mouseenter', this.handleTrackMouseEnter);
            trackHorizontal.removeEventListener('mouseleave', this.handleTrackMouseLeave);
            trackHorizontal.removeEventListener('mousedown', this.handleHorizontalTrackMouseDown);
            trackVertical.removeEventListener('mouseenter', this.handleTrackMouseEnter);
            trackVertical.removeEventListener('mouseleave', this.handleTrackMouseLeave);
            trackVertical.removeEventListener('mousedown', this.handleVerticalTrackMouseDown);
            thumbHorizontal.removeEventListener('mousedown', this.handleHorizontalThumbMouseDown);
            thumbVertical.removeEventListener('mousedown', this.handleVerticalThumbMouseDown);
            window.removeEventListener('resize', this.handleWindowResize);
            // Possibly setup by `handleDragStart`
            this.teardownDragging();
        }
    }, {
        key: 'handleScroll',
        value: function handleScroll(event) {
            var _this2 = this;

            var _props3 = this.props,
                onScroll = _props3.onScroll,
                onScrollFrame = _props3.onScrollFrame;

            if (onScroll) onScroll(event);
            this.update(function (values) {
                var scrollLeft = values.scrollLeft,
                    scrollTop = values.scrollTop;

                _this2.viewScrollLeft = scrollLeft;
                _this2.viewScrollTop = scrollTop;
                if (onScrollFrame) onScrollFrame(values);
            });
            this.detectScrolling();
        }
    }, {
        key: 'handleScrollStart',
        value: function handleScrollStart() {
            var onScrollStart = this.props.onScrollStart;

            if (onScrollStart) onScrollStart();
            this.handleScrollStartAutoHide();
        }
    }, {
        key: 'handleScrollStartAutoHide',
        value: function handleScrollStartAutoHide() {
            var autoHide = this.props.autoHide;

            if (!autoHide) return;
            this.showTracks();
        }
    }, {
        key: 'handleScrollStop',
        value: function handleScrollStop() {
            var onScrollStop = this.props.onScrollStop;

            if (onScrollStop) onScrollStop();
            this.handleScrollStopAutoHide();
        }
    }, {
        key: 'handleScrollStopAutoHide',
        value: function handleScrollStopAutoHide() {
            var autoHide = this.props.autoHide;

            if (!autoHide) return;
            this.hideTracks();
        }
    }, {
        key: 'handleWindowResize',
        value: function handleWindowResize() {
            this.update();
        }
    }, {
        key: 'handleHorizontalTrackMouseDown',
        value: function handleHorizontalTrackMouseDown(event) {
            event.preventDefault();
            var target = event.target,
                clientX = event.clientX;

            var _target$getBoundingCl = target.getBoundingClientRect(),
                targetLeft = _target$getBoundingCl.left;

            var thumbWidth = this.getThumbHorizontalWidth();
            var offset = Math.abs(targetLeft - clientX) - thumbWidth / 2;
            this.view.scrollLeft = this.getScrollLeftForOffset(offset);
        }
    }, {
        key: 'handleVerticalTrackMouseDown',
        value: function handleVerticalTrackMouseDown(event) {
            event.preventDefault();
            var target = event.target,
                clientY = event.clientY;

            var _target$getBoundingCl2 = target.getBoundingClientRect(),
                targetTop = _target$getBoundingCl2.top;

            var thumbHeight = this.getThumbVerticalHeight();
            var offset = Math.abs(targetTop - clientY) - thumbHeight / 2;
            this.view.scrollTop = this.getScrollTopForOffset(offset);
        }
    }, {
        key: 'handleHorizontalThumbMouseDown',
        value: function handleHorizontalThumbMouseDown(event) {
            event.preventDefault();
            this.handleDragStart(event);
            var target = event.target,
                clientX = event.clientX;
            var offsetWidth = target.offsetWidth;

            var _target$getBoundingCl3 = target.getBoundingClientRect(),
                left = _target$getBoundingCl3.left;

            this.prevPageX = offsetWidth - (clientX - left);
        }
    }, {
        key: 'handleVerticalThumbMouseDown',
        value: function handleVerticalThumbMouseDown(event) {
            event.preventDefault();
            this.handleDragStart(event);
            var target = event.target,
                clientY = event.clientY;
            var offsetHeight = target.offsetHeight;

            var _target$getBoundingCl4 = target.getBoundingClientRect(),
                top = _target$getBoundingCl4.top;

            this.prevPageY = offsetHeight - (clientY - top);
        }
    }, {
        key: 'setupDragging',
        value: function setupDragging() {
            (0, _domCss2["default"])(document.body, _styles.disableSelectStyle);
            document.addEventListener('mousemove', this.handleDrag);
            document.addEventListener('mouseup', this.handleDragEnd);
            document.onselectstart = _returnFalse2["default"];
        }
    }, {
        key: 'teardownDragging',
        value: function teardownDragging() {
            (0, _domCss2["default"])(document.body, _styles.disableSelectStyleReset);
            document.removeEventListener('mousemove', this.handleDrag);
            document.removeEventListener('mouseup', this.handleDragEnd);
            document.onselectstart = undefined;
        }
    }, {
        key: 'handleDragStart',
        value: function handleDragStart(event) {
            this.dragging = true;
            event.stopImmediatePropagation();
            this.setupDragging();
        }
    }, {
        key: 'handleDrag',
        value: function handleDrag(event) {
            if (this.prevPageX) {
                var clientX = event.clientX;

                var _trackHorizontal$getB = this.trackHorizontal.getBoundingClientRect(),
                    trackLeft = _trackHorizontal$getB.left;

                var thumbWidth = this.getThumbHorizontalWidth();
                var clickPosition = thumbWidth - this.prevPageX;
                var offset = -trackLeft + clientX - clickPosition;
                this.view.scrollLeft = this.getScrollLeftForOffset(offset);
            }
            if (this.prevPageY) {
                var clientY = event.clientY;

                var _trackVertical$getBou = this.trackVertical.getBoundingClientRect(),
                    trackTop = _trackVertical$getBou.top;

                var thumbHeight = this.getThumbVerticalHeight();
                var _clickPosition = thumbHeight - this.prevPageY;
                var _offset = -trackTop + clientY - _clickPosition;
                this.view.scrollTop = this.getScrollTopForOffset(_offset);
            }
            return false;
        }
    }, {
        key: 'handleDragEnd',
        value: function handleDragEnd() {
            this.dragging = false;
            this.prevPageX = this.prevPageY = 0;
            this.teardownDragging();
            this.handleDragEndAutoHide();
        }
    }, {
        key: 'handleDragEndAutoHide',
        value: function handleDragEndAutoHide() {
            var autoHide = this.props.autoHide;

            if (!autoHide) return;
            this.hideTracks();
        }
    }, {
        key: 'handleTrackMouseEnter',
        value: function handleTrackMouseEnter() {
            this.trackMouseOver = true;
            this.handleTrackMouseEnterAutoHide();
        }
    }, {
        key: 'handleTrackMouseEnterAutoHide',
        value: function handleTrackMouseEnterAutoHide() {
            var autoHide = this.props.autoHide;

            if (!autoHide) return;
            this.showTracks();
        }
    }, {
        key: 'handleTrackMouseLeave',
        value: function handleTrackMouseLeave() {
            this.trackMouseOver = false;
            this.handleTrackMouseLeaveAutoHide();
        }
    }, {
        key: 'handleTrackMouseLeaveAutoHide',
        value: function handleTrackMouseLeaveAutoHide() {
            var autoHide = this.props.autoHide;

            if (!autoHide) return;
            this.hideTracks();
        }
    }, {
        key: 'showTracks',
        value: function showTracks() {
            clearTimeout(this.hideTracksTimeout);
            (0, _domCss2["default"])(this.trackHorizontal, { opacity: 1 });
            (0, _domCss2["default"])(this.trackVertical, { opacity: 1 });
        }
    }, {
        key: 'hideTracks',
        value: function hideTracks() {
            var _this3 = this;

            if (this.dragging) return;
            if (this.scrolling) return;
            if (this.trackMouseOver) return;
            var autoHideTimeout = this.props.autoHideTimeout;

            clearTimeout(this.hideTracksTimeout);
            this.hideTracksTimeout = setTimeout(function () {
                (0, _domCss2["default"])(_this3.trackHorizontal, { opacity: 0 });
                (0, _domCss2["default"])(_this3.trackVertical, { opacity: 0 });
            }, autoHideTimeout);
        }
    }, {
        key: 'detectScrolling',
        value: function detectScrolling() {
            var _this4 = this;

            if (this.scrolling) return;
            this.scrolling = true;
            this.handleScrollStart();
            this.detectScrollingInterval = setInterval(function () {
                if (_this4.lastViewScrollLeft === _this4.viewScrollLeft && _this4.lastViewScrollTop === _this4.viewScrollTop) {
                    clearInterval(_this4.detectScrollingInterval);
                    _this4.scrolling = false;
                    _this4.handleScrollStop();
                }
                _this4.lastViewScrollLeft = _this4.viewScrollLeft;
                _this4.lastViewScrollTop = _this4.viewScrollTop;
            }, 100);
        }
    }, {
        key: 'raf',
        value: function raf(callback) {
            var _this5 = this;

            if (this.requestFrame) _raf3["default"].cancel(this.requestFrame);
            this.requestFrame = (0, _raf3["default"])(function () {
                _this5.requestFrame = undefined;
                callback();
            });
        }
    }, {
        key: 'update',
        value: function update(callback) {
            var _this6 = this;

            this.raf(function () {
                return _this6._update(callback);
            });
        }
    }, {
        key: '_update',
        value: function _update(callback) {
            var _props4 = this.props,
                onUpdate = _props4.onUpdate,
                hideTracksWhenNotNeeded = _props4.hideTracksWhenNotNeeded;

            var values = this.getValues();
            if ((0, _getScrollbarWidth2["default"])()) {
                var scrollLeft = values.scrollLeft,
                    clientWidth = values.clientWidth,
                    scrollWidth = values.scrollWidth;

                var trackHorizontalWidth = (0, _getInnerWidth2["default"])(this.trackHorizontal);
                var thumbHorizontalWidth = this.getThumbHorizontalWidth();
                var thumbHorizontalX = scrollLeft / (scrollWidth - clientWidth) * (trackHorizontalWidth - thumbHorizontalWidth);
                var thumbHorizontalStyle = {
                    width: thumbHorizontalWidth,
                    transform: 'translateX(' + thumbHorizontalX + 'px)'
                };
                var scrollTop = values.scrollTop,
                    clientHeight = values.clientHeight,
                    scrollHeight = values.scrollHeight;

                var trackVerticalHeight = (0, _getInnerHeight2["default"])(this.trackVertical);
                var thumbVerticalHeight = this.getThumbVerticalHeight();
                var thumbVerticalY = scrollTop / (scrollHeight - clientHeight) * (trackVerticalHeight - thumbVerticalHeight);
                var thumbVerticalStyle = {
                    height: thumbVerticalHeight,
                    transform: 'translateY(' + thumbVerticalY + 'px)'
                };
                if (hideTracksWhenNotNeeded) {
                    var trackHorizontalStyle = {
                        visibility: scrollWidth > clientWidth ? 'visible' : 'hidden'
                    };
                    var trackVerticalStyle = {
                        visibility: scrollHeight > clientHeight ? 'visible' : 'hidden'
                    };
                    (0, _domCss2["default"])(this.trackHorizontal, trackHorizontalStyle);
                    (0, _domCss2["default"])(this.trackVertical, trackVerticalStyle);
                }
                (0, _domCss2["default"])(this.thumbHorizontal, thumbHorizontalStyle);
                (0, _domCss2["default"])(this.thumbVertical, thumbVerticalStyle);
            }
            if (onUpdate) onUpdate(values);
            if (typeof callback !== 'function') return;
            callback(values);
        }
    }, {
        key: 'render',
        value: function render() {
            var _this7 = this;

            var scrollbarWidth = (0, _getScrollbarWidth2["default"])();
            /* eslint-disable no-unused-vars */

            var _props5 = this.props,
                onScroll = _props5.onScroll,
                onScrollFrame = _props5.onScrollFrame,
                onScrollStart = _props5.onScrollStart,
                onScrollStop = _props5.onScrollStop,
                onUpdate = _props5.onUpdate,
                renderView = _props5.renderView,
                renderTrackHorizontal = _props5.renderTrackHorizontal,
                renderTrackVertical = _props5.renderTrackVertical,
                renderThumbHorizontal = _props5.renderThumbHorizontal,
                renderThumbVertical = _props5.renderThumbVertical,
                tagName = _props5.tagName,
                hideTracksWhenNotNeeded = _props5.hideTracksWhenNotNeeded,
                autoHide = _props5.autoHide,
                autoHideTimeout = _props5.autoHideTimeout,
                autoHideDuration = _props5.autoHideDuration,
                thumbSize = _props5.thumbSize,
                thumbMinSize = _props5.thumbMinSize,
                universal = _props5.universal,
                autoHeight = _props5.autoHeight,
                autoHeightMin = _props5.autoHeightMin,
                autoHeightMax = _props5.autoHeightMax,
                style = _props5.style,
                children = _props5.children,
                props = _objectWithoutProperties(_props5, ['onScroll', 'onScrollFrame', 'onScrollStart', 'onScrollStop', 'onUpdate', 'renderView', 'renderTrackHorizontal', 'renderTrackVertical', 'renderThumbHorizontal', 'renderThumbVertical', 'tagName', 'hideTracksWhenNotNeeded', 'autoHide', 'autoHideTimeout', 'autoHideDuration', 'thumbSize', 'thumbMinSize', 'universal', 'autoHeight', 'autoHeightMin', 'autoHeightMax', 'style', 'children']);
            /* eslint-enable no-unused-vars */

            var didMountUniversal = this.state.didMountUniversal;


            var containerStyle = _extends({}, _styles.containerStyleDefault, autoHeight && _extends({}, _styles.containerStyleAutoHeight, {
                minHeight: autoHeightMin,
                maxHeight: autoHeightMax
            }), style);

            var viewStyle = _extends({}, _styles.viewStyleDefault, {
                // Hide scrollbars by setting a negative margin
                marginRight: scrollbarWidth ? -scrollbarWidth : 0,
                marginBottom: scrollbarWidth ? -scrollbarWidth : 0
            }, autoHeight && _extends({}, _styles.viewStyleAutoHeight, {
                // Add scrollbarWidth to autoHeight in order to compensate negative margins
                minHeight: (0, _isString2["default"])(autoHeightMin) ? 'calc(' + autoHeightMin + ' + ' + scrollbarWidth + 'px)' : autoHeightMin + scrollbarWidth,
                maxHeight: (0, _isString2["default"])(autoHeightMax) ? 'calc(' + autoHeightMax + ' + ' + scrollbarWidth + 'px)' : autoHeightMax + scrollbarWidth
            }), autoHeight && universal && !didMountUniversal && {
                minHeight: autoHeightMin,
                maxHeight: autoHeightMax
            }, universal && !didMountUniversal && _styles.viewStyleUniversalInitial);

            var trackAutoHeightStyle = {
                transition: 'opacity ' + autoHideDuration + 'ms',
                opacity: 0
            };

            var trackHorizontalStyle = _extends({}, _styles.trackHorizontalStyleDefault, autoHide && trackAutoHeightStyle, (!scrollbarWidth || universal && !didMountUniversal) && {
                display: 'none'
            });

            var trackVerticalStyle = _extends({}, _styles.trackVerticalStyleDefault, autoHide && trackAutoHeightStyle, (!scrollbarWidth || universal && !didMountUniversal) && {
                display: 'none'
            });

            return (0, _react.createElement)(tagName, _extends({}, props, { style: containerStyle, ref: function ref(_ref3) {
                    _this7.container = _ref3;
                } }), [(0, _react.cloneElement)(renderView({ style: viewStyle }), { key: 'view', ref: function ref(_ref4) {
                    _this7.view = _ref4;
                } }, children), (0, _react.cloneElement)(renderTrackHorizontal({ style: trackHorizontalStyle }), { key: 'trackHorizontal', ref: function ref(_ref5) {
                    _this7.trackHorizontal = _ref5;
                } }, (0, _react.cloneElement)(renderThumbHorizontal({ style: _styles.thumbHorizontalStyleDefault }), { ref: function ref(_ref6) {
                    _this7.thumbHorizontal = _ref6;
                } })), (0, _react.cloneElement)(renderTrackVertical({ style: trackVerticalStyle }), { key: 'trackVertical', ref: function ref(_ref7) {
                    _this7.trackVertical = _ref7;
                } }, (0, _react.cloneElement)(renderThumbVertical({ style: _styles.thumbVerticalStyleDefault }), { ref: function ref(_ref8) {
                    _this7.thumbVertical = _ref8;
                } }))]);
        }
    }]);

    return Scrollbars;
}(_react.Component);

exports["default"] = Scrollbars;


Scrollbars.propTypes = {
    onScroll: _propTypes2["default"].func,
    onScrollFrame: _propTypes2["default"].func,
    onScrollStart: _propTypes2["default"].func,
    onScrollStop: _propTypes2["default"].func,
    onUpdate: _propTypes2["default"].func,
    renderView: _propTypes2["default"].func,
    renderTrackHorizontal: _propTypes2["default"].func,
    renderTrackVertical: _propTypes2["default"].func,
    renderThumbHorizontal: _propTypes2["default"].func,
    renderThumbVertical: _propTypes2["default"].func,
    tagName: _propTypes2["default"].string,
    thumbSize: _propTypes2["default"].number,
    thumbMinSize: _propTypes2["default"].number,
    hideTracksWhenNotNeeded: _propTypes2["default"].bool,
    autoHide: _propTypes2["default"].bool,
    autoHideTimeout: _propTypes2["default"].number,
    autoHideDuration: _propTypes2["default"].number,
    autoHeight: _propTypes2["default"].bool,
    autoHeightMin: _propTypes2["default"].oneOfType([_propTypes2["default"].number, _propTypes2["default"].string]),
    autoHeightMax: _propTypes2["default"].oneOfType([_propTypes2["default"].number, _propTypes2["default"].string]),
    universal: _propTypes2["default"].bool,
    style: _propTypes2["default"].object,
    children: _propTypes2["default"].node
};

Scrollbars.defaultProps = {
    renderView: _defaultRenderElements.renderViewDefault,
    renderTrackHorizontal: _defaultRenderElements.renderTrackHorizontalDefault,
    renderTrackVertical: _defaultRenderElements.renderTrackVerticalDefault,
    renderThumbHorizontal: _defaultRenderElements.renderThumbHorizontalDefault,
    renderThumbVertical: _defaultRenderElements.renderThumbVerticalDefault,
    tagName: 'div',
    thumbMinSize: 30,
    hideTracksWhenNotNeeded: false,
    autoHide: false,
    autoHideTimeout: 1000,
    autoHideDuration: 200,
    autoHeight: false,
    autoHeightMin: 0,
    autoHeightMax: 200,
    universal: false
};

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/Scrollbars/styles.js":
/*!***********************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/Scrollbars/styles.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
var containerStyleDefault = exports.containerStyleDefault = {
    position: 'relative',
    overflow: 'hidden',
    width: '100%',
    height: '100%'
};

// Overrides containerStyleDefault properties
var containerStyleAutoHeight = exports.containerStyleAutoHeight = {
    height: 'auto'
};

var viewStyleDefault = exports.viewStyleDefault = {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    overflow: 'scroll',
    WebkitOverflowScrolling: 'touch'
};

// Overrides viewStyleDefault properties
var viewStyleAutoHeight = exports.viewStyleAutoHeight = {
    position: 'relative',
    top: undefined,
    left: undefined,
    right: undefined,
    bottom: undefined
};

var viewStyleUniversalInitial = exports.viewStyleUniversalInitial = {
    overflow: 'hidden',
    marginRight: 0,
    marginBottom: 0
};

var trackHorizontalStyleDefault = exports.trackHorizontalStyleDefault = {
    position: 'absolute',
    height: 6
};

var trackVerticalStyleDefault = exports.trackVerticalStyleDefault = {
    position: 'absolute',
    width: 6
};

var thumbHorizontalStyleDefault = exports.thumbHorizontalStyleDefault = {
    position: 'relative',
    display: 'block',
    height: '100%'
};

var thumbVerticalStyleDefault = exports.thumbVerticalStyleDefault = {
    position: 'relative',
    display: 'block',
    width: '100%'
};

var disableSelectStyle = exports.disableSelectStyle = {
    userSelect: 'none'
};

var disableSelectStyleReset = exports.disableSelectStyleReset = {
    userSelect: ''
};

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/index.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Scrollbars = undefined;

var _Scrollbars = __webpack_require__(/*! ./Scrollbars */ "./node_modules/react-custom-scrollbars/lib/Scrollbars/index.js");

var _Scrollbars2 = _interopRequireDefault(_Scrollbars);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

exports["default"] = _Scrollbars2["default"];
exports.Scrollbars = _Scrollbars2["default"];

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/utils/getInnerHeight.js":
/*!**************************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/utils/getInnerHeight.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
exports["default"] = getInnerHeight;
function getInnerHeight(el) {
    var clientHeight = el.clientHeight;

    var _getComputedStyle = getComputedStyle(el),
        paddingTop = _getComputedStyle.paddingTop,
        paddingBottom = _getComputedStyle.paddingBottom;

    return clientHeight - parseFloat(paddingTop) - parseFloat(paddingBottom);
}

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/utils/getInnerWidth.js":
/*!*************************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/utils/getInnerWidth.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
exports["default"] = getInnerWidth;
function getInnerWidth(el) {
    var clientWidth = el.clientWidth;

    var _getComputedStyle = getComputedStyle(el),
        paddingLeft = _getComputedStyle.paddingLeft,
        paddingRight = _getComputedStyle.paddingRight;

    return clientWidth - parseFloat(paddingLeft) - parseFloat(paddingRight);
}

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/utils/getScrollbarWidth.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/utils/getScrollbarWidth.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
exports["default"] = getScrollbarWidth;

var _domCss = __webpack_require__(/*! dom-css */ "./node_modules/dom-css/index.js");

var _domCss2 = _interopRequireDefault(_domCss);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var scrollbarWidth = false;

function getScrollbarWidth() {
    if (scrollbarWidth !== false) return scrollbarWidth;
    /* istanbul ignore else */
    if (typeof document !== 'undefined') {
        var div = document.createElement('div');
        (0, _domCss2["default"])(div, {
            width: 100,
            height: 100,
            position: 'absolute',
            top: -9999,
            overflow: 'scroll',
            MsOverflowStyle: 'scrollbar'
        });
        document.body.appendChild(div);
        scrollbarWidth = div.offsetWidth - div.clientWidth;
        document.body.removeChild(div);
    } else {
        scrollbarWidth = 0;
    }
    return scrollbarWidth || 0;
}

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/utils/isString.js":
/*!********************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/utils/isString.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
exports["default"] = isString;
function isString(maybe) {
    return typeof maybe === 'string';
}

/***/ }),

/***/ "./node_modules/react-custom-scrollbars/lib/utils/returnFalse.js":
/*!***********************************************************************!*\
  !*** ./node_modules/react-custom-scrollbars/lib/utils/returnFalse.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
exports["default"] = returnFalse;
function returnFalse() {
    return false;
}

/***/ }),

/***/ "./node_modules/react-mentions/dist/react-mentions.esm.js":
/*!****************************************************************!*\
  !*** ./node_modules/react-mentions/dist/react-mentions.esm.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Mention": function() { return /* binding */ Mention; },
/* harmony export */   "MentionsInput": function() { return /* binding */ MentionsInput$1; }
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! invariant */ "./node_modules/invariant/browser.js");
/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(invariant__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var substyle__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! substyle */ "./node_modules/substyle/es6/index.js");
/* harmony import */ var substyle__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! substyle */ "./node_modules/substyle/es6/inline.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-dom */ "./node_modules/react-dom/index.js");

















// escape RegExp special characters https://stackoverflow.com/a/9310752/5142490
var escapeRegex = function escapeRegex(str) {
  return str.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&');
};

var PLACEHOLDERS = {
  id: '__id__',
  display: '__display__'
};

var findPositionOfCapturingGroup = function findPositionOfCapturingGroup(markup, parameterName) {
  invariant__WEBPACK_IMPORTED_MODULE_10___default()(parameterName === 'id' || parameterName === 'display', "Second arg must be either \"id\" or \"display\", got: \"".concat(parameterName, "\"")); // find positions of placeholders in the markup

  var indexDisplay = markup.indexOf(PLACEHOLDERS.display);
  var indexId = markup.indexOf(PLACEHOLDERS.id); // set indices to null if not found

  if (indexDisplay < 0) indexDisplay = null;
  if (indexId < 0) indexId = null; // markup must contain one of the mandatory placeholders

  invariant__WEBPACK_IMPORTED_MODULE_10___default()(indexDisplay !== null || indexId !== null, "The markup '".concat(markup, "' does not contain either of the placeholders '__id__' or '__display__'"));

  if (indexDisplay !== null && indexId !== null) {
    // both placeholders are used, return 0 or 1 depending on the position of the requested parameter
    return parameterName === 'id' && indexId <= indexDisplay || parameterName === 'display' && indexDisplay <= indexId ? 0 : 1;
  } // just one placeholder is being used, we'll use the captured string for both parameters


  return 0;
};

var combineRegExps = function combineRegExps(regExps) {
  var serializedRegexParser = /^\/(.+)\/(\w+)?$/;
  return new RegExp(regExps.map(function (regex) {
    var _serializedRegexParse = serializedRegexParser.exec(regex.toString()),
        _serializedRegexParse2 = (0,_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_11__["default"])(_serializedRegexParse, 3),
        regexString = _serializedRegexParse2[1],
        regexFlags = _serializedRegexParse2[2];

    invariant__WEBPACK_IMPORTED_MODULE_10___default()(!regexFlags, "RegExp flags are not supported. Change /".concat(regexString, "/").concat(regexFlags, " into /").concat(regexString, "/"));
    return "(".concat(regexString, ")");
  }).join('|'), 'g');
};

var countPlaceholders = function countPlaceholders(markup) {
  var count = 0;
  if (markup.indexOf('__id__') >= 0) count++;
  if (markup.indexOf('__display__') >= 0) count++;
  return count;
};

var emptyFn = function emptyFn() {}; // Finds all occurrences of the markup in the value and calls the `markupIteratee` callback for each of them.
// The optional `textIteratee` callback is called for each plain text ranges in between these markup occurrences.


var iterateMentionsMarkup = function iterateMentionsMarkup(value, config, markupIteratee) {
  var textIteratee = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFn;
  var regex = combineRegExps(config.map(function (c) {
    return c.regex;
  }));
  var accOffset = 2; // first is whole match, second is the for the capturing group of first regexp component

  var captureGroupOffsets = config.map(function (_ref) {
    var markup = _ref.markup;
    var result = accOffset; // + 1 is for the capturing group we add around each regexp component in combineRegExps

    accOffset += countPlaceholders(markup) + 1;
    return result;
  });
  var match;
  var start = 0;
  var currentPlainTextIndex = 0; // detect all mention markup occurrences in the value and iterate the matches

  while ((match = regex.exec(value)) !== null) {
    var offset = captureGroupOffsets.find(function (o) {
      return !!match[o];
    }); // eslint-disable-line no-loop-func

    var mentionChildIndex = captureGroupOffsets.indexOf(offset);
    var _config$mentionChildI = config[mentionChildIndex],
        markup = _config$mentionChildI.markup,
        displayTransform = _config$mentionChildI.displayTransform;
    var idPos = offset + findPositionOfCapturingGroup(markup, 'id');
    var displayPos = offset + findPositionOfCapturingGroup(markup, 'display');
    var id = match[idPos];
    var display = displayTransform(id, match[displayPos]);
    var substr = value.substring(start, match.index);
    textIteratee(substr, start, currentPlainTextIndex);
    currentPlainTextIndex += substr.length;
    markupIteratee(match[0], match.index, currentPlainTextIndex, id, display, mentionChildIndex, start);
    currentPlainTextIndex += display.length;
    start = regex.lastIndex;
  }

  if (start < value.length) {
    textIteratee(value.substring(start), start, currentPlainTextIndex);
  }
};

var getPlainText = function getPlainText(value, config) {
  var result = '';
  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display) {
    result += display;
  }, function (plainText) {
    result += plainText;
  });
  return result;
};

// in the marked up value string.
// If the passed character index lies inside a mention, the value of `inMarkupCorrection` defines the
// correction to apply:
//   - 'START' to return the index of the mention markup's first char (default)
//   - 'END' to return the index after its last char
//   - 'NULL' to return null

var mapPlainTextIndex = function mapPlainTextIndex(value, config, indexInPlainText) {
  var inMarkupCorrection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'START';

  if (typeof indexInPlainText !== 'number') {
    return indexInPlainText;
  }

  var result;

  var textIteratee = function textIteratee(substr, index, substrPlainTextIndex) {
    if (result !== undefined) return;

    if (substrPlainTextIndex + substr.length >= indexInPlainText) {
      // found the corresponding position in the current plain text range
      result = index + indexInPlainText - substrPlainTextIndex;
    }
  };

  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {
    if (result !== undefined) return;

    if (mentionPlainTextIndex + display.length > indexInPlainText) {
      // found the corresponding position inside current match,
      // return the index of the first or after the last char of the matching markup
      // depending on whether the `inMarkupCorrection`
      if (inMarkupCorrection === 'NULL') {
        result = null;
      } else {
        result = index + (inMarkupCorrection === 'END' ? markup.length : 0);
      }
    }
  };

  iterateMentionsMarkup(value, config, markupIteratee, textIteratee); // when a mention is at the end of the value and we want to get the caret position
  // at the end of the string, result is undefined

  return result === undefined ? value.length : result;
};

var spliceString = function spliceString(str, start, end, insert) {
  return str.substring(0, start) + insert + str.substring(end);
};

// guided by the textarea text selection ranges before and after the change

var applyChangeToValue = function applyChangeToValue(value, plainTextValue, _ref, config) {
  var selectionStartBefore = _ref.selectionStartBefore,
      selectionEndBefore = _ref.selectionEndBefore,
      selectionEndAfter = _ref.selectionEndAfter;
  var oldPlainTextValue = getPlainText(value, config);
  var lengthDelta = oldPlainTextValue.length - plainTextValue.length;

  if (selectionStartBefore === 'undefined') {
    selectionStartBefore = selectionEndAfter + lengthDelta;
  }

  if (selectionEndBefore === 'undefined') {
    selectionEndBefore = selectionStartBefore;
  } // Fixes an issue with replacing combined characters for complex input. Eg like acented letters on OSX


  if (selectionStartBefore === selectionEndBefore && selectionEndBefore === selectionEndAfter && oldPlainTextValue.length === plainTextValue.length) {
    selectionStartBefore = selectionStartBefore - 1;
  } // extract the insertion from the new plain text value


  var insert = plainTextValue.slice(selectionStartBefore, selectionEndAfter); // handling for Backspace key with no range selection

  var spliceStart = Math.min(selectionStartBefore, selectionEndAfter);
  var spliceEnd = selectionEndBefore;

  if (selectionStartBefore === selectionEndAfter) {
    // handling for Delete key with no range selection
    spliceEnd = Math.max(selectionEndBefore, selectionStartBefore + lengthDelta);
  }

  var mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');
  var mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');
  var controlSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'NULL');
  var controlSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'NULL');
  var willRemoveMention = controlSpliceStart === null || controlSpliceEnd === null;
  var newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);

  if (!willRemoveMention) {
    // test for auto-completion changes
    var controlPlainTextValue = getPlainText(newValue, config);

    if (controlPlainTextValue !== plainTextValue) {
      // some auto-correction is going on
      // find start of diff
      spliceStart = 0;

      while (plainTextValue[spliceStart] === controlPlainTextValue[spliceStart]) {
        spliceStart++;
      } // extract auto-corrected insertion


      insert = plainTextValue.slice(spliceStart, selectionEndAfter); // find index of the unchanged remainder

      spliceEnd = oldPlainTextValue.lastIndexOf(plainTextValue.substring(selectionEndAfter)); // re-map the corrected indices

      mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');
      mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');
      newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);
    }
  }

  return newValue;
};

// returns a the index of of the first char of the mention in the plain text.
// If indexInPlainText does not lie inside a mention, returns indexInPlainText.

var findStartOfMentionInPlainText = function findStartOfMentionInPlainText(value, config, indexInPlainText) {
  var result = indexInPlainText;
  var foundMention = false;

  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {
    if (mentionPlainTextIndex <= indexInPlainText && mentionPlainTextIndex + display.length > indexInPlainText) {
      result = mentionPlainTextIndex;
      foundMention = true;
    }
  };

  iterateMentionsMarkup(value, config, markupIteratee);

  if (foundMention) {
    return result;
  }
};

var getMentions = function getMentions(value, config) {
  var mentions = [];
  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display, childIndex, start) {
    mentions.push({
      id: id,
      display: display,
      childIndex: childIndex,
      index: index,
      plainTextIndex: plainTextIndex
    });
  });
  return mentions;
};

var getSuggestionHtmlId = function getSuggestionHtmlId(prefix, id) {
  return "".concat(prefix, "-").concat(id);
};

var countSuggestions = function countSuggestions(suggestions) {
  return Object.values(suggestions).reduce(function (acc, _ref) {
    var results = _ref.results;
    return acc + results.length;
  }, 0);
};

var getEndOfLastMention = function getEndOfLastMention(value, config) {
  var mentions = getMentions(value, config);
  var lastMention = mentions[mentions.length - 1];
  return lastMention ? lastMention.plainTextIndex + lastMention.display.length : 0;
};

var markupToRegex = function markupToRegex(markup) {
  var escapedMarkup = escapeRegex(markup);
  var charAfterDisplay = markup[markup.indexOf(PLACEHOLDERS.display) + PLACEHOLDERS.display.length];
  var charAfterId = markup[markup.indexOf(PLACEHOLDERS.id) + PLACEHOLDERS.id.length];
  return new RegExp(escapedMarkup.replace(PLACEHOLDERS.display, "([^".concat(escapeRegex(charAfterDisplay || ''), "]+?)")).replace(PLACEHOLDERS.id, "([^".concat(escapeRegex(charAfterId || ''), "]+?)")));
};

var readConfigFromChildren = function readConfigFromChildren(children) {
  return react__WEBPACK_IMPORTED_MODULE_9__.Children.toArray(children).map(function (_ref) {
    var _ref$props = _ref.props,
        markup = _ref$props.markup,
        regex = _ref$props.regex,
        displayTransform = _ref$props.displayTransform;
    return {
      markup: markup,
      regex: regex ? coerceCapturingGroups(regex, markup) : markupToRegex(markup),
      displayTransform: displayTransform || function (id, display) {
        return display || id;
      }
    };
  });
}; // make sure that the custom regex defines the correct number of capturing groups


var coerceCapturingGroups = function coerceCapturingGroups(regex, markup) {
  var numberOfGroups = new RegExp(regex.toString() + '|').exec('').length - 1;
  var numberOfPlaceholders = countPlaceholders(markup);
  invariant__WEBPACK_IMPORTED_MODULE_10___default()(numberOfGroups === numberOfPlaceholders, "Number of capturing groups in RegExp ".concat(regex.toString(), " (").concat(numberOfGroups, ") does not match the number of placeholders in the markup '").concat(markup, "' (").concat(numberOfPlaceholders, ")"));
  return regex;
};

var makeMentionsMarkup = function makeMentionsMarkup(markup, id, display) {
  return markup.replace(PLACEHOLDERS.id, id).replace(PLACEHOLDERS.display, display);
};

// This contains all the latin letters and the regex that match these letters with diacritics
// https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript
var lettersDiacritics = [{
  base: 'A',
  letters: /(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g
}, {
  base: 'AA',
  letters: /(&#42802;|[\uA732])/g
}, {
  base: 'AE',
  letters: /(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g
}, {
  base: 'AO',
  letters: /(&#42804;|[\uA734])/g
}, {
  base: 'AU',
  letters: /(&#42806;|[\uA736])/g
}, {
  base: 'AV',
  letters: /(&#42808;|&#42810;|[\uA738\uA73A])/g
}, {
  base: 'AY',
  letters: /(&#42812;|[\uA73C])/g
}, {
  base: 'B',
  letters: /(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g
}, {
  base: 'C',
  letters: /(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g
}, {
  base: 'D',
  letters: /(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g
}, {
  base: 'DZ',
  letters: /(&#497;|&#452;|[\u01F1\u01C4])/g
}, {
  base: 'Dz',
  letters: /(&#498;|&#453;|[\u01F2\u01C5])/g
}, {
  base: 'E',
  letters: /(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g
}, {
  base: 'F',
  letters: /(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g
}, {
  base: 'G',
  letters: /(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g
}, {
  base: 'H',
  letters: /(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g
}, {
  base: 'I',
  letters: /(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g
}, {
  base: 'J',
  letters: /(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g
}, {
  base: 'K',
  letters: /(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g
}, {
  base: 'L',
  letters: /(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g
}, {
  base: 'LJ',
  letters: /(&#455;|[\u01C7])/g
}, {
  base: 'Lj',
  letters: /(&#456;|[\u01C8])/g
}, {
  base: 'M',
  letters: /(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g
}, {
  base: 'N',
  letters: /(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g
}, {
  base: 'NJ',
  letters: /(&#458;|[\u01CA])/g
}, {
  base: 'Nj',
  letters: /(&#459;|[\u01CB])/g
}, {
  base: 'O',
  letters: /(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g
}, {
  base: 'OE',
  letters: /(&#338;|[\u0152])/g
}, {
  base: 'OI',
  letters: /(&#418;|[\u01A2])/g
}, {
  base: 'OO',
  letters: /(&#42830;|[\uA74E])/g
}, {
  base: 'OU',
  letters: /(&#546;|[\u0222])/g
}, {
  base: 'P',
  letters: /(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g
}, {
  base: 'Q',
  letters: /(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g
}, {
  base: 'R',
  letters: /(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g
}, {
  base: 'S',
  letters: /(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g
}, {
  base: 'T',
  letters: /(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g
}, {
  base: 'TH',
  letters: /(&#222;|[\u00DE])/g
}, {
  base: 'TZ',
  letters: /(&#42792;|[\uA728])/g
}, {
  base: 'U',
  letters: /(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g
}, {
  base: 'V',
  letters: /(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g
}, {
  base: 'VY',
  letters: /(&#42848;|[\uA760])/g
}, {
  base: 'W',
  letters: /(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g
}, {
  base: 'X',
  letters: /(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g
}, {
  base: 'Y',
  letters: /(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g
}, {
  base: 'Z',
  letters: /(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g
}, {
  base: 'a',
  letters: /(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g
}, {
  base: 'aa',
  letters: /(&#42803;|[\uA733])/g
}, {
  base: 'ae',
  letters: /(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g
}, {
  base: 'ao',
  letters: /(&#42805;|[\uA735])/g
}, {
  base: 'au',
  letters: /(&#42807;|[\uA737])/g
}, {
  base: 'av',
  letters: /(&#42809;|&#42811;|[\uA739\uA73B])/g
}, {
  base: 'ay',
  letters: /(&#42813;|[\uA73D])/g
}, {
  base: 'b',
  letters: /(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g
}, {
  base: 'c',
  letters: /(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g
}, {
  base: 'd',
  letters: /(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g
}, {
  base: 'dz',
  letters: /(&#499;|&#454;|[\u01F3\u01C6])/g
}, {
  base: 'e',
  letters: /(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g
}, {
  base: 'f',
  letters: /(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g
}, {
  base: 'g',
  letters: /(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g
}, {
  base: 'h',
  letters: /(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g
}, {
  base: 'hv',
  letters: /(&#405;|[\u0195])/g
}, {
  base: 'i',
  letters: /(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g
}, {
  base: 'ij',
  letters: /(&#307;|[\u0133])/g
}, {
  base: 'j',
  letters: /(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g
}, {
  base: 'k',
  letters: /(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g
}, {
  base: 'l',
  letters: /(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g
}, {
  base: 'lj',
  letters: /(&#457;|[\u01C9])/g
}, {
  base: 'm',
  letters: /(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g
}, {
  base: 'n',
  letters: /(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g
}, {
  base: 'nj',
  letters: /(&#460;|[\u01CC])/g
}, {
  base: 'o',
  letters: /(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g
}, {
  base: 'oe',
  letters: /(&#339;|[\u0153])/g
}, {
  base: 'oi',
  letters: /(&#419;|[\u01A3])/g
}, {
  base: 'ou',
  letters: /(&#547;|[\u0223])/g
}, {
  base: 'oo',
  letters: /(&#42831;|[\uA74F])/g
}, {
  base: 'p',
  letters: /(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g
}, {
  base: 'q',
  letters: /(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g
}, {
  base: 'r',
  letters: /(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g
}, {
  base: 's',
  letters: /(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g
}, {
  base: 'ss',
  letters: /(&#223;|[\u00DF])/g
}, {
  base: 't',
  letters: /(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g
}, {
  base: 'th',
  letters: /(&#254;|[\u00FE])/g
}, {
  base: 'tz',
  letters: /(&#42793;|[\uA729])/g
}, {
  base: 'u',
  letters: /(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g
}, {
  base: 'v',
  letters: /(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g
}, {
  base: 'vy',
  letters: /(&#42849;|[\uA761])/g
}, {
  base: 'w',
  letters: /(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g
}, {
  base: 'x',
  letters: /(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g
}, {
  base: 'y',
  letters: /(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g
}, {
  base: 'z',
  letters: /(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g
}];

var removeAccents = function removeAccents(str) {
  var formattedStr = str;
  lettersDiacritics.forEach(function (letterDiacritics) {
    formattedStr = formattedStr.replace(letterDiacritics.letters, letterDiacritics.base);
  });
  return formattedStr;
};

var normalizeString = function normalizeString(str) {
  return removeAccents(str).toLowerCase();
};

var getSubstringIndex = function getSubstringIndex(str, substr, ignoreAccents) {
  if (!ignoreAccents) {
    return str.toLowerCase().indexOf(substr.toLowerCase());
  }

  return normalizeString(str).indexOf(normalizeString(substr));
};

var isIE = function isIE() {
  return !!document.documentMode;
};

var isNumber = function isNumber(val) {
  return typeof val === 'number';
};

var keys = function keys(obj) {
  return obj === Object(obj) ? Object.keys(obj) : [];
};

var omit = function omit(obj) {
  var _ref;

  for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    rest[_key - 1] = arguments[_key];
  }

  var keys = (_ref = []).concat.apply(_ref, rest);

  return Object.keys(obj).reduce(function (acc, k) {
    if (obj.hasOwnProperty(k) && !keys.includes(k) && obj[k] !== undefined) {
      acc[k] = obj[k];
    }

    return acc;
  }, {});
};

function createDefaultStyle(defaultStyle, getModifiers) {
  var enhance = function enhance(ComponentToWrap) {
    var DefaultStyleEnhancer = function DefaultStyleEnhancer(_ref) {
      var style = _ref.style,
          className = _ref.className,
          classNames = _ref.classNames,
          rest = (0,_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_12__["default"])(_ref, ["style", "className", "classNames"]);

      var modifiers = getModifiers ? getModifiers(rest) : undefined;
      var styles = (0,substyle__WEBPACK_IMPORTED_MODULE_14__["default"])(defaultStyle, {
        style: style,
        className: className,
        classNames: classNames
      }, modifiers);
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement(ComponentToWrap, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({}, rest, {
        style: styles
      }));
    };

    var displayName = ComponentToWrap.displayName || ComponentToWrap.name || 'Component';
    DefaultStyleEnhancer.displayName = "defaultStyle(".concat(displayName, ")");
    return DefaultStyleEnhancer;
  };

  return enhance;
}

var _generateComponentKey = function _generateComponentKey(usedKeys, id) {
  if (!usedKeys.hasOwnProperty(id)) {
    usedKeys[id] = 0;
  } else {
    usedKeys[id]++;
  }

  return id + '_' + usedKeys[id];
};

var Highlighter =
/*#__PURE__*/
function (_Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__["default"])(Highlighter, _Component);

  function Highlighter() {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["default"])(this, Highlighter);

    _this = (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Highlighter).apply(this, arguments));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setCaretElement", function (el) {
      _this.caretElement = el;
    });

    _this.state = {
      left: undefined,
      top: undefined
    };
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["default"])(Highlighter, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.notifyCaretPosition();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this.notifyCaretPosition();
    }
  }, {
    key: "notifyCaretPosition",
    value: function notifyCaretPosition() {
      if (!this.caretElement) {
        return;
      }

      var _this$caretElement = this.caretElement,
          offsetLeft = _this$caretElement.offsetLeft,
          offsetTop = _this$caretElement.offsetTop;

      if (this.state.left === offsetLeft && this.state.top === offsetTop) {
        return;
      }

      var newPosition = {
        left: offsetLeft,
        top: offsetTop
      };
      this.setState(newPosition);
      this.props.onCaretPositionChange(newPosition);
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          selectionStart = _this$props.selectionStart,
          selectionEnd = _this$props.selectionEnd,
          value = _this$props.value,
          style = _this$props.style,
          children = _this$props.children,
          containerRef = _this$props.containerRef;
      var config = readConfigFromChildren(children); // If there's a caret (i.e. no range selection), map the caret position into the marked up value

      var caretPositionInMarkup;

      if (selectionStart === selectionEnd) {
        caretPositionInMarkup = mapPlainTextIndex(value, config, selectionStart, 'START');
      }

      var resultComponents = [];
      var componentKeys = {}; // start by appending directly to the resultComponents

      var components = resultComponents;
      var substringComponentKey = 0;

      var textIteratee = function textIteratee(substr, index, indexInPlainText) {
        // check whether the caret element has to be inserted inside the current plain substring
        if (isNumber(caretPositionInMarkup) && caretPositionInMarkup >= index && caretPositionInMarkup <= index + substr.length) {
          // if yes, split substr at the caret position and insert the caret component
          var splitIndex = caretPositionInMarkup - index;
          components.push(_this2.renderSubstring(substr.substring(0, splitIndex), substringComponentKey)); // add all following substrings and mention components as children of the caret component

          components = [_this2.renderSubstring(substr.substring(splitIndex), substringComponentKey)];
        } else {
          // otherwise just push the plain text substring
          components.push(_this2.renderSubstring(substr, substringComponentKey));
        }

        substringComponentKey++;
      };

      var mentionIteratee = function mentionIteratee(markup, index, indexInPlainText, id, display, mentionChildIndex, lastMentionEndIndex) {
        // generate a component key based on the id
        var key = _generateComponentKey(componentKeys, id);

        components.push(_this2.getMentionComponentForMatch(id, display, mentionChildIndex, key));
      };

      iterateMentionsMarkup(value, config, mentionIteratee, textIteratee); // append a span containing a space, to ensure the last text line has the correct height

      components.push(' ');

      if (components !== resultComponents) {
        // if a caret component is to be rendered, add all components that followed as its children
        resultComponents.push(this.renderHighlighterCaret(components));
      }

      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({}, style, {
        ref: containerRef
      }), resultComponents);
    }
  }, {
    key: "renderSubstring",
    value: function renderSubstring(string, key) {
      // set substring span to hidden, so that Emojis are not shown double in Mobile Safari
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("span", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({}, this.props.style('substring'), {
        key: key
      }), string);
    } // Returns a clone of the Mention child applicable for the specified type to be rendered inside the highlighter

  }, {
    key: "getMentionComponentForMatch",
    value: function getMentionComponentForMatch(id, display, mentionChildIndex, key) {
      var props = {
        id: id,
        display: display,
        key: key
      };
      var child = react__WEBPACK_IMPORTED_MODULE_9__.Children.toArray(this.props.children)[mentionChildIndex];
      return react__WEBPACK_IMPORTED_MODULE_9___default().cloneElement(child, props);
    } // Renders an component to be inserted in the highlighter at the current caret position

  }, {
    key: "renderHighlighterCaret",
    value: function renderHighlighterCaret(children) {
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("span", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({}, this.props.style('caret'), {
        ref: this.setCaretElement,
        key: "caret"
      }), children);
    }
  }]);

  return Highlighter;
}(react__WEBPACK_IMPORTED_MODULE_9__.Component);

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(Highlighter, "propTypes", {
  selectionStart: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number),
  selectionEnd: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number),
  value: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string.isRequired),
  onCaretPositionChange: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func.isRequired),
  containerRef: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().func), prop_types__WEBPACK_IMPORTED_MODULE_15___default().shape({
    current: typeof Element === 'undefined' ? (prop_types__WEBPACK_IMPORTED_MODULE_15___default().any) : prop_types__WEBPACK_IMPORTED_MODULE_15___default().instanceOf(Element)
  })]),
  children: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().element), prop_types__WEBPACK_IMPORTED_MODULE_15___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_15___default().element))]).isRequired
});

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(Highlighter, "defaultProps", {
  value: ''
});

var styled = createDefaultStyle({
  position: 'relative',
  boxSizing: 'border-box',
  width: '100%',
  color: 'transparent',
  overflow: 'hidden',
  whiteSpace: 'pre-wrap',
  wordWrap: 'break-word',
  border: '1px solid transparent',
  textAlign: 'start',
  '&singleLine': {
    whiteSpace: 'pre',
    wordWrap: null
  },
  substring: {
    visibility: 'hidden'
  }
}, function (props) {
  return {
    '&singleLine': props.singleLine
  };
});
var Highlighter$1 = styled(Highlighter);

var Suggestion =
/*#__PURE__*/
function (_Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__["default"])(Suggestion, _Component);

  function Suggestion() {
    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["default"])(this, Suggestion);

    return (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(Suggestion).apply(this, arguments));
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["default"])(Suggestion, [{
    key: "render",
    value: function render() {
      var rest = omit(this.props, ['style', 'classNames', 'className'], // substyle props
      keys(Suggestion.propTypes));
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("li", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({
        id: this.props.id,
        role: "option",
        "aria-selected": this.props.focused
      }, rest, this.props.style), this.renderContent());
    }
  }, {
    key: "renderContent",
    value: function renderContent() {
      var _this$props = this.props,
          query = _this$props.query,
          renderSuggestion = _this$props.renderSuggestion,
          suggestion = _this$props.suggestion,
          index = _this$props.index,
          focused = _this$props.focused;
      var display = this.getDisplay();
      var highlightedDisplay = this.renderHighlightedDisplay(display, query);

      if (renderSuggestion) {
        return renderSuggestion(suggestion, query, highlightedDisplay, index, focused);
      }

      return highlightedDisplay;
    }
  }, {
    key: "getDisplay",
    value: function getDisplay() {
      var suggestion = this.props.suggestion;

      if (typeof suggestion === 'string') {
        return suggestion;
      }

      var id = suggestion.id,
          display = suggestion.display;

      if (id === undefined || !display) {
        return id;
      }

      return display;
    }
  }, {
    key: "renderHighlightedDisplay",
    value: function renderHighlightedDisplay(display) {
      var _this$props2 = this.props,
          ignoreAccents = _this$props2.ignoreAccents,
          query = _this$props2.query,
          style = _this$props2.style;
      var i = getSubstringIndex(display, query, ignoreAccents);

      if (i === -1) {
        return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("span", style('display'), display);
      }

      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("span", style('display'), display.substring(0, i), react__WEBPACK_IMPORTED_MODULE_9___default().createElement("b", style('highlight'), display.substring(i, i + query.length)), display.substring(i + query.length));
    }
  }]);

  return Suggestion;
}(react__WEBPACK_IMPORTED_MODULE_9__.Component);

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(Suggestion, "propTypes", {
  id: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string.isRequired),
  query: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string.isRequired),
  index: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number.isRequired),
  ignoreAccents: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  suggestion: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), prop_types__WEBPACK_IMPORTED_MODULE_15___default().shape({
    id: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)]).isRequired,
    display: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string)
  })]).isRequired,
  renderSuggestion: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  focused: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool)
});

var styled$1 = createDefaultStyle({
  cursor: 'pointer'
}, function (props) {
  return {
    '&focused': props.focused
  };
});
var Suggestion$1 = styled$1(Suggestion);

function LoadingIndicator() {
  var styles = (0,substyle__WEBPACK_IMPORTED_MODULE_14__["default"])();
  var spinnerStyles = styles('spinner');
  return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", styles, react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", spinnerStyles, react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", spinnerStyles(['element', 'element1'])), react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", spinnerStyles(['element', 'element2'])), react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", spinnerStyles(['element', 'element3'])), react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", spinnerStyles(['element', 'element4'])), react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", spinnerStyles(['element', 'element5']))));
}

var SuggestionsOverlay =
/*#__PURE__*/
function (_Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__["default"])(SuggestionsOverlay, _Component);

  function SuggestionsOverlay() {
    var _getPrototypeOf2;

    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["default"])(this, SuggestionsOverlay);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, (_getPrototypeOf2 = (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(SuggestionsOverlay)).call.apply(_getPrototypeOf2, [this].concat(args)));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleMouseEnter", function (index, ev) {
      if (_this.props.onMouseEnter) {
        _this.props.onMouseEnter(index);
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "select", function (suggestion, queryInfo) {
      _this.props.onSelect(suggestion, queryInfo);
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setUlElement", function (el) {
      _this.ulElement = el;
    });

    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["default"])(SuggestionsOverlay, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      if (!this.ulElement || this.ulElement.offsetHeight >= this.ulElement.scrollHeight || !this.props.scrollFocusedIntoView) {
        return;
      }

      var scrollTop = this.ulElement.scrollTop;

      var _this$ulElement$child = this.ulElement.children[this.props.focusIndex].getBoundingClientRect(),
          top = _this$ulElement$child.top,
          bottom = _this$ulElement$child.bottom;

      var _this$ulElement$getBo = this.ulElement.getBoundingClientRect(),
          topContainer = _this$ulElement$getBo.top;

      top = top - topContainer + scrollTop;
      bottom = bottom - topContainer + scrollTop;

      if (top < scrollTop) {
        this.ulElement.scrollTop = top;
      } else if (bottom > this.ulElement.offsetHeight) {
        this.ulElement.scrollTop = bottom - this.ulElement.offsetHeight;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          id = _this$props.id,
          a11ySuggestionsListLabel = _this$props.a11ySuggestionsListLabel,
          isOpened = _this$props.isOpened,
          style = _this$props.style,
          onMouseDown = _this$props.onMouseDown,
          containerRef = _this$props.containerRef,
          position = _this$props.position,
          left = _this$props.left,
          right = _this$props.right,
          top = _this$props.top; // do not show suggestions until there is some data

      if (!isOpened) {
        return null;
      }

      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({}, (0,substyle__WEBPACK_IMPORTED_MODULE_16__["default"])({
        position: position || 'absolute',
        left: left,
        right: right,
        top: top
      }, style), {
        onMouseDown: onMouseDown,
        ref: containerRef
      }), react__WEBPACK_IMPORTED_MODULE_9___default().createElement("ul", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({
        ref: this.setUlElement,
        id: id,
        role: "listbox",
        "aria-label": a11ySuggestionsListLabel
      }, style('list')), this.renderSuggestions()), this.renderLoadingIndicator());
    }
  }, {
    key: "renderSuggestions",
    value: function renderSuggestions() {
      var _this2 = this;

      return Object.values(this.props.suggestions).reduce(function (accResults, _ref) {
        var results = _ref.results,
            queryInfo = _ref.queryInfo;
        return [].concat((0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(accResults), (0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(results.map(function (result, index) {
          return _this2.renderSuggestion(result, queryInfo, accResults.length + index);
        })));
      }, []);
    }
  }, {
    key: "renderSuggestion",
    value: function renderSuggestion(result, queryInfo, index) {
      var _this3 = this;

      var isFocused = index === this.props.focusIndex;
      var childIndex = queryInfo.childIndex,
          query = queryInfo.query;
      var renderSuggestion = react__WEBPACK_IMPORTED_MODULE_9__.Children.toArray(this.props.children)[childIndex].props.renderSuggestion;
      var ignoreAccents = this.props.ignoreAccents;
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement(Suggestion$1, {
        style: this.props.style('item'),
        key: "".concat(childIndex, "-").concat(getID(result)),
        id: getSuggestionHtmlId(this.props.id, index),
        query: query,
        index: index,
        ignoreAccents: ignoreAccents,
        renderSuggestion: renderSuggestion,
        suggestion: result,
        focused: isFocused,
        onClick: function onClick() {
          return _this3.select(result, queryInfo);
        },
        onMouseEnter: function onMouseEnter() {
          return _this3.handleMouseEnter(index);
        }
      });
    }
  }, {
    key: "renderLoadingIndicator",
    value: function renderLoadingIndicator() {
      if (!this.props.isLoading) {
        return;
      }

      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement(LoadingIndicator, {
        style: this.props.style('loadingIndicator')
      });
    }
  }]);

  return SuggestionsOverlay;
}(react__WEBPACK_IMPORTED_MODULE_9__.Component);

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(SuggestionsOverlay, "propTypes", {
  id: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string.isRequired),
  suggestions: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().object.isRequired),
  a11ySuggestionsListLabel: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),
  focusIndex: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number),
  position: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),
  left: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number),
  right: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number),
  top: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number),
  scrollFocusedIntoView: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  isLoading: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  isOpened: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool.isRequired),
  onSelect: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  ignoreAccents: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  containerRef: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().func), prop_types__WEBPACK_IMPORTED_MODULE_15___default().shape({
    current: typeof Element === 'undefined' ? (prop_types__WEBPACK_IMPORTED_MODULE_15___default().any) : prop_types__WEBPACK_IMPORTED_MODULE_15___default().instanceOf(Element)
  })]),
  children: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().element), prop_types__WEBPACK_IMPORTED_MODULE_15___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_15___default().element))]).isRequired
});

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(SuggestionsOverlay, "defaultProps", {
  suggestions: {},
  onSelect: function onSelect() {
    return null;
  }
});

var getID = function getID(suggestion) {
  if (typeof suggestion === 'string') {
    return suggestion;
  }

  return suggestion.id;
};

var styled$2 = createDefaultStyle({
  zIndex: 1,
  backgroundColor: 'white',
  marginTop: 14,
  minWidth: 100,
  list: {
    margin: 0,
    padding: 0,
    listStyleType: 'none'
  }
});
var SuggestionsOverlay$1 = styled$2(SuggestionsOverlay);

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }
var makeTriggerRegex = function makeTriggerRegex(trigger) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if (trigger instanceof RegExp) {
    return trigger;
  } else {
    var allowSpaceInQuery = options.allowSpaceInQuery;
    var escapedTriggerChar = escapeRegex(trigger); // first capture group is the part to be replaced on completion
    // second capture group is for extracting the search query

    return new RegExp("(?:^|\\s)(".concat(escapedTriggerChar, "([^").concat(allowSpaceInQuery ? '' : '\\s').concat(escapedTriggerChar, "]*))$"));
  }
};

var getDataProvider = function getDataProvider(data, ignoreAccents) {
  if (data instanceof Array) {
    // if data is an array, create a function to query that
    return function (query, callback) {
      var results = [];

      for (var i = 0, l = data.length; i < l; ++i) {
        var display = data[i].display || data[i].id;

        if (getSubstringIndex(display, query, ignoreAccents) >= 0) {
          results.push(data[i]);
        }
      }

      return results;
    };
  } else {
    // expect data to be a query function
    return data;
  }
};

var KEY = {
  TAB: 9,
  RETURN: 13,
  ESC: 27,
  UP: 38,
  DOWN: 40
};
var isComposing = false;
var propTypes = {
  /**
   * If set to `true` a regular text input element will be rendered
   * instead of a textarea
   */
  singleLine: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  allowSpaceInQuery: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  allowSuggestionsAboveCursor: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  forceSuggestionsAboveCursor: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  ignoreAccents: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  a11ySuggestionsListLabel: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),
  value: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),
  onKeyDown: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  onSelect: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  onBlur: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  onChange: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  suggestionsPortalHost: typeof Element === 'undefined' ? (prop_types__WEBPACK_IMPORTED_MODULE_15___default().any) : prop_types__WEBPACK_IMPORTED_MODULE_15___default().PropTypes.instanceOf(Element),
  inputRef: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().func), prop_types__WEBPACK_IMPORTED_MODULE_15___default().shape({
    current: typeof Element === 'undefined' ? (prop_types__WEBPACK_IMPORTED_MODULE_15___default().any) : prop_types__WEBPACK_IMPORTED_MODULE_15___default().instanceOf(Element)
  })]),
  children: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().element), prop_types__WEBPACK_IMPORTED_MODULE_15___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_15___default().element))]).isRequired
};

var MentionsInput =
/*#__PURE__*/
function (_React$Component) {
  (0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__["default"])(MentionsInput, _React$Component);

  function MentionsInput(_props) {
    var _this;

    (0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["default"])(this, MentionsInput);

    _this = (0,_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__["default"])(this, (0,_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__["default"])(MentionsInput).call(this, _props));

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setContainerElement", function (el) {
      _this.containerElement = el;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "getInputProps", function () {
      var _this$props = _this.props,
          readOnly = _this$props.readOnly,
          disabled = _this$props.disabled,
          style = _this$props.style; // pass all props that neither we, nor substyle, consume through to the input control

      var props = omit(_this.props, ['style', 'classNames', 'className'], // substyle props
      keys(propTypes));
      return _objectSpread({}, props, {}, style('input'), {
        value: _this.getPlainText()
      }, !readOnly && !disabled && {
        onChange: _this.handleChange,
        onSelect: _this.handleSelect,
        onKeyDown: _this.handleKeyDown,
        onBlur: _this.handleBlur,
        onCompositionStart: _this.handleCompositionStart,
        onCompositionEnd: _this.handleCompositionEnd,
        onScroll: _this.updateHighlighterScroll
      }, {}, _this.isOpened() && {
        role: 'combobox',
        'aria-controls': _this.uuidSuggestionsOverlay,
        'aria-expanded': true,
        'aria-autocomplete': 'list',
        'aria-haspopup': 'listbox',
        'aria-activedescendant': getSuggestionHtmlId(_this.uuidSuggestionsOverlay, _this.state.focusIndex)
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "renderControl", function () {
      var _this$props2 = _this.props,
          singleLine = _this$props2.singleLine,
          style = _this$props2.style;

      var inputProps = _this.getInputProps();

      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", style('control'), _this.renderHighlighter(), singleLine ? _this.renderInput(inputProps) : _this.renderTextarea(inputProps));
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "renderInput", function (props) {
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("input", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({
        type: "text",
        ref: _this.setInputRef
      }, props));
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "renderTextarea", function (props) {
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("textarea", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({
        ref: _this.setInputRef
      }, props));
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setInputRef", function (el) {
      _this.inputElement = el;
      var inputRef = _this.props.inputRef;

      if (typeof inputRef === 'function') {
        inputRef(el);
      } else if (inputRef) {
        inputRef.current = el;
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setSuggestionsElement", function (el) {
      _this.suggestionsElement = el;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "renderSuggestionsOverlay", function () {
      if (!isNumber(_this.state.selectionStart)) {
        // do not show suggestions when the input does not have the focus
        return null;
      }

      var _this$state$suggestio = _this.state.suggestionsPosition,
          position = _this$state$suggestio.position,
          left = _this$state$suggestio.left,
          top = _this$state$suggestio.top,
          right = _this$state$suggestio.right;
      var suggestionsNode = react__WEBPACK_IMPORTED_MODULE_9___default().createElement(SuggestionsOverlay$1, {
        id: _this.uuidSuggestionsOverlay,
        style: _this.props.style('suggestions'),
        position: position,
        left: left,
        top: top,
        right: right,
        focusIndex: _this.state.focusIndex,
        scrollFocusedIntoView: _this.state.scrollFocusedIntoView,
        containerRef: _this.setSuggestionsElement,
        suggestions: _this.state.suggestions,
        onSelect: _this.addMention,
        onMouseDown: _this.handleSuggestionsMouseDown,
        onMouseEnter: _this.handleSuggestionsMouseEnter,
        isLoading: _this.isLoading(),
        isOpened: _this.isOpened(),
        ignoreAccents: _this.props.ignoreAccents,
        a11ySuggestionsListLabel: _this.props.a11ySuggestionsListLabel
      }, _this.props.children);

      if (_this.props.suggestionsPortalHost) {
        return react_dom__WEBPACK_IMPORTED_MODULE_13__.createPortal(suggestionsNode, _this.props.suggestionsPortalHost);
      } else {
        return suggestionsNode;
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "renderHighlighter", function () {
      var _this$state = _this.state,
          selectionStart = _this$state.selectionStart,
          selectionEnd = _this$state.selectionEnd;
      var _this$props3 = _this.props,
          singleLine = _this$props3.singleLine,
          children = _this$props3.children,
          value = _this$props3.value,
          style = _this$props3.style;
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement(Highlighter$1, {
        containerRef: _this.setHighlighterElement,
        style: style('highlighter'),
        value: value,
        singleLine: singleLine,
        selectionStart: selectionStart,
        selectionEnd: selectionEnd,
        onCaretPositionChange: _this.handleCaretPositionChange
      }, children);
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setHighlighterElement", function (el) {
      _this.highlighterElement = el;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleCaretPositionChange", function (position) {
      _this.setState({
        caretPosition: position
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "getPlainText", function () {
      return getPlainText(_this.props.value || '', readConfigFromChildren(_this.props.children));
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "executeOnChange", function (event) {
      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      if (_this.props.onChange) {
        var _this$props4;

        return (_this$props4 = _this.props).onChange.apply(_this$props4, [event].concat(args));
      }

      if (_this.props.valueLink) {
        var _this$props$valueLink;

        return (_this$props$valueLink = _this.props.valueLink).requestChange.apply(_this$props$valueLink, [event.target.value].concat(args));
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleChange", function (ev) {
      isComposing = false;

      if (isIE()) {
        // if we are inside iframe, we need to find activeElement within its contentDocument
        var currentDocument = document.activeElement && document.activeElement.contentDocument || document;

        if (currentDocument.activeElement !== ev.target) {
          // fix an IE bug (blur from empty input element with placeholder attribute trigger "input" event)
          return;
        }
      }

      var value = _this.props.value || '';
      var config = readConfigFromChildren(_this.props.children);
      var newPlainTextValue = ev.target.value; // Derive the new value to set by applying the local change in the textarea's plain text

      var newValue = applyChangeToValue(value, newPlainTextValue, {
        selectionStartBefore: _this.state.selectionStart,
        selectionEndBefore: _this.state.selectionEnd,
        selectionEndAfter: ev.target.selectionEnd
      }, config); // In case a mention is deleted, also adjust the new plain text value

      newPlainTextValue = getPlainText(newValue, config); // Save current selection after change to be able to restore caret position after rerendering

      var selectionStart = ev.target.selectionStart;
      var selectionEnd = ev.target.selectionEnd;
      var setSelectionAfterMentionChange = false; // Adjust selection range in case a mention will be deleted by the characters outside of the
      // selection range that are automatically deleted

      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);

      if (startOfMention !== undefined && _this.state.selectionEnd > startOfMention) {
        // only if a deletion has taken place
        selectionStart = startOfMention;
        selectionEnd = selectionStart;
        setSelectionAfterMentionChange = true;
      }

      _this.setState({
        selectionStart: selectionStart,
        selectionEnd: selectionEnd,
        setSelectionAfterMentionChange: setSelectionAfterMentionChange
      });

      var mentions = getMentions(newValue, config); // Propagate change
      // let handleChange = this.getOnChange(this.props) || emptyFunction;

      var eventMock = {
        target: {
          value: newValue
        }
      }; // this.props.onChange.call(this, eventMock, newValue, newPlainTextValue, mentions);

      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleSelect", function (ev) {
      // keep track of selection range / caret position
      _this.setState({
        selectionStart: ev.target.selectionStart,
        selectionEnd: ev.target.selectionEnd
      }); // do nothing while a IME composition session is active


      if (isComposing) return; // refresh suggestions queries

      var el = _this.inputElement;

      if (ev.target.selectionStart === ev.target.selectionEnd) {
        _this.updateMentionsQueries(el.value, ev.target.selectionStart);
      } else {
        _this.clearSuggestions();
      } // sync highlighters scroll position


      _this.updateHighlighterScroll();

      _this.props.onSelect(ev);
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleKeyDown", function (ev) {
      // do not intercept key events if the suggestions overlay is not shown
      var suggestionsCount = countSuggestions(_this.state.suggestions);

      if (suggestionsCount === 0 || !_this.suggestionsElement) {
        _this.props.onKeyDown(ev);

        return;
      }

      if (Object.values(KEY).indexOf(ev.keyCode) >= 0) {
        ev.preventDefault();
        ev.stopPropagation();
      }

      switch (ev.keyCode) {
        case KEY.ESC:
          {
            _this.clearSuggestions();

            return;
          }

        case KEY.DOWN:
          {
            _this.shiftFocus(+1);

            return;
          }

        case KEY.UP:
          {
            _this.shiftFocus(-1);

            return;
          }

        case KEY.RETURN:
          {
            _this.selectFocused();

            return;
          }

        case KEY.TAB:
          {
            _this.selectFocused();

            return;
          }

        default:
          {
            return;
          }
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "shiftFocus", function (delta) {
      var suggestionsCount = countSuggestions(_this.state.suggestions);

      _this.setState({
        focusIndex: (suggestionsCount + _this.state.focusIndex + delta) % suggestionsCount,
        scrollFocusedIntoView: true
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "selectFocused", function () {
      var _this$state2 = _this.state,
          suggestions = _this$state2.suggestions,
          focusIndex = _this$state2.focusIndex;
      var _Object$values$reduce = Object.values(suggestions).reduce(function (acc, _ref) {
        var results = _ref.results,
            queryInfo = _ref.queryInfo;
        return [].concat((0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(acc), (0,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(results.map(function (result) {
          return {
            result: result,
            queryInfo: queryInfo
          };
        })));
      }, [])[focusIndex],
          result = _Object$values$reduce.result,
          queryInfo = _Object$values$reduce.queryInfo;

      _this.addMention(result, queryInfo);

      _this.setState({
        focusIndex: 0
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleBlur", function (ev) {
      var clickedSuggestion = _this._suggestionsMouseDown;
      _this._suggestionsMouseDown = false; // only reset selection if the mousedown happened on an element
      // other than the suggestions overlay

      if (!clickedSuggestion) {
        _this.setState({
          selectionStart: null,
          selectionEnd: null
        });
      }

      window.setTimeout(function () {
        _this.updateHighlighterScroll();
      }, 1);

      _this.props.onBlur(ev, clickedSuggestion);
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleSuggestionsMouseDown", function (ev) {
      _this._suggestionsMouseDown = true;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleSuggestionsMouseEnter", function (focusIndex) {
      _this.setState({
        focusIndex: focusIndex,
        scrollFocusedIntoView: false
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "updateSuggestionsPosition", function () {
      var caretPosition = _this.state.caretPosition;
      var _this$props5 = _this.props,
          suggestionsPortalHost = _this$props5.suggestionsPortalHost,
          allowSuggestionsAboveCursor = _this$props5.allowSuggestionsAboveCursor,
          forceSuggestionsAboveCursor = _this$props5.forceSuggestionsAboveCursor;

      if (!caretPosition || !_this.suggestionsElement) {
        return;
      }

      var suggestions = _this.suggestionsElement;
      var highlighter = _this.highlighterElement; // first get viewport-relative position (highlighter is offsetParent of caret):

      var caretOffsetParentRect = highlighter.getBoundingClientRect();
      var caretHeight = getComputedStyleLengthProp(highlighter, 'font-size');
      var viewportRelative = {
        left: caretOffsetParentRect.left + caretPosition.left,
        top: caretOffsetParentRect.top + caretPosition.top + caretHeight
      };
      var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

      if (!suggestions) {
        return;
      }

      var position = {}; // if suggestions menu is in a portal, update position to be releative to its portal node

      if (suggestionsPortalHost) {
        position.position = 'fixed';
        var left = viewportRelative.left;
        var top = viewportRelative.top; // absolute/fixed positioned elements are positioned according to their entire box including margins; so we remove margins here:

        left -= getComputedStyleLengthProp(suggestions, 'margin-left');
        top -= getComputedStyleLengthProp(suggestions, 'margin-top'); // take into account highlighter/textinput scrolling:

        left -= highlighter.scrollLeft;
        top -= highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window

        var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

        if (left + suggestions.offsetWidth > viewportWidth) {
          position.left = Math.max(0, viewportWidth - suggestions.offsetWidth);
        } else {
          position.left = left;
        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.
        // Move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height
        // is small enough to NOT cover up the caret


        if (allowSuggestionsAboveCursor && top + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < top - caretHeight || forceSuggestionsAboveCursor) {
          position.top = Math.max(0, top - suggestions.offsetHeight - caretHeight);
        } else {
          position.top = top;
        }
      } else {
        var _left = caretPosition.left - highlighter.scrollLeft;

        var _top = caretPosition.top - highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window


        if (_left + suggestions.offsetWidth > _this.containerElement.offsetWidth) {
          position.right = 0;
        } else {
          position.left = _left;
        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.
        // move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height
        // is small enough to NOT cover up the caret


        if (allowSuggestionsAboveCursor && viewportRelative.top - highlighter.scrollTop + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < caretOffsetParentRect.top - caretHeight - highlighter.scrollTop) {
          position.top = _top - suggestions.offsetHeight - caretHeight;
        } else {
          position.top = _top;
        }
      }

      if (position.left === _this.state.suggestionsPosition.left && position.top === _this.state.suggestionsPosition.top && position.position === _this.state.suggestionsPosition.position) {
        return;
      }

      _this.setState({
        suggestionsPosition: position
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "updateHighlighterScroll", function () {
      var input = _this.inputElement;
      var highlighter = _this.highlighterElement;

      if (!input || !highlighter) {
        // since the invocation of this function is deferred,
        // the whole component may have been unmounted in the meanwhile
        return;
      }

      highlighter.scrollLeft = input.scrollLeft;
      highlighter.scrollTop = input.scrollTop;
      highlighter.height = input.height;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleCompositionStart", function () {
      isComposing = true;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "handleCompositionEnd", function () {
      isComposing = false;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "setSelection", function (selectionStart, selectionEnd) {
      if (selectionStart === null || selectionEnd === null) return;
      var el = _this.inputElement;

      if (el.setSelectionRange) {
        el.setSelectionRange(selectionStart, selectionEnd);
      } else if (el.createTextRange) {
        var range = el.createTextRange();
        range.collapse(true);
        range.moveEnd('character', selectionEnd);
        range.moveStart('character', selectionStart);
        range.select();
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "updateMentionsQueries", function (plainTextValue, caretPosition) {
      // Invalidate previous queries. Async results for previous queries will be neglected.
      _this._queryId++;
      _this.suggestions = {};

      _this.setState({
        suggestions: {}
      });

      var value = _this.props.value || '';
      var children = _this.props.children;
      var config = readConfigFromChildren(children);
      var positionInValue = mapPlainTextIndex(value, config, caretPosition, 'NULL'); // If caret is inside of mention, do not query

      if (positionInValue === null) {
        return;
      } // Extract substring in between the end of the previous mention and the caret


      var substringStartIndex = getEndOfLastMention(value.substring(0, positionInValue), config);
      var substring = plainTextValue.substring(substringStartIndex, caretPosition); // Check if suggestions have to be shown:
      // Match the trigger patterns of all Mention children on the extracted substring

      react__WEBPACK_IMPORTED_MODULE_9___default().Children.forEach(children, function (child, childIndex) {
        if (!child) {
          return;
        }

        var regex = makeTriggerRegex(child.props.trigger, _this.props);
        var match = substring.match(regex);

        if (match) {
          var querySequenceStart = substringStartIndex + substring.indexOf(match[1], match.index);

          _this.queryData(match[2], childIndex, querySequenceStart, querySequenceStart + match[1].length, plainTextValue);
        }
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "clearSuggestions", function () {
      // Invalidate previous queries. Async results for previous queries will be neglected.
      _this._queryId++;
      _this.suggestions = {};

      _this.setState({
        suggestions: {},
        focusIndex: 0
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "queryData", function (query, childIndex, querySequenceStart, querySequenceEnd, plainTextValue) {
      var _this$props6 = _this.props,
          children = _this$props6.children,
          ignoreAccents = _this$props6.ignoreAccents;
      var mentionChild = react__WEBPACK_IMPORTED_MODULE_9__.Children.toArray(children)[childIndex];
      var provideData = getDataProvider(mentionChild.props.data, ignoreAccents);
      var syncResult = provideData(query, _this.updateSuggestions.bind(null, _this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue));

      if (syncResult instanceof Array) {
        _this.updateSuggestions(_this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, syncResult);
      }
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "updateSuggestions", function (queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, results) {
      // neglect async results from previous queries
      if (queryId !== _this._queryId) return; // save in property so that multiple sync state updates from different mentions sources
      // won't overwrite each other

      _this.suggestions = _objectSpread({}, _this.suggestions, (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])({}, childIndex, {
        queryInfo: {
          childIndex: childIndex,
          query: query,
          querySequenceStart: querySequenceStart,
          querySequenceEnd: querySequenceEnd,
          plainTextValue: plainTextValue
        },
        results: results
      }));
      var focusIndex = _this.state.focusIndex;
      var suggestionsCount = countSuggestions(_this.suggestions);

      _this.setState({
        suggestions: _this.suggestions,
        focusIndex: focusIndex >= suggestionsCount ? Math.max(suggestionsCount - 1, 0) : focusIndex
      });
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "addMention", function (_ref2, _ref3) {
      var id = _ref2.id,
          display = _ref2.display;
      var childIndex = _ref3.childIndex,
          querySequenceStart = _ref3.querySequenceStart,
          querySequenceEnd = _ref3.querySequenceEnd,
          plainTextValue = _ref3.plainTextValue;
      // Insert mention in the marked up value at the correct position
      var value = _this.props.value || '';
      var config = readConfigFromChildren(_this.props.children);
      var mentionsChild = react__WEBPACK_IMPORTED_MODULE_9__.Children.toArray(_this.props.children)[childIndex];
      var _mentionsChild$props = mentionsChild.props,
          markup = _mentionsChild$props.markup,
          displayTransform = _mentionsChild$props.displayTransform,
          appendSpaceOnAdd = _mentionsChild$props.appendSpaceOnAdd,
          onAdd = _mentionsChild$props.onAdd;
      var start = mapPlainTextIndex(value, config, querySequenceStart, 'START');
      var end = start + querySequenceEnd - querySequenceStart;
      var insert = makeMentionsMarkup(markup, id, display);

      if (appendSpaceOnAdd) {
        insert += ' ';
      }

      var newValue = spliceString(value, start, end, insert); // Refocus input and set caret position to end of mention

      _this.inputElement.focus();

      var displayValue = displayTransform(id, display);

      if (appendSpaceOnAdd) {
        displayValue += ' ';
      }

      var newCaretPosition = querySequenceStart + displayValue.length;

      _this.setState({
        selectionStart: newCaretPosition,
        selectionEnd: newCaretPosition,
        setSelectionAfterMentionChange: true
      }); // Propagate change


      var eventMock = {
        target: {
          value: newValue
        }
      };
      var mentions = getMentions(newValue, config);
      var newPlainTextValue = spliceString(plainTextValue, querySequenceStart, querySequenceEnd, displayValue);

      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);

      if (onAdd) {
        onAdd(id, display, start, end);
      } // Make sure the suggestions overlay is closed


      _this.clearSuggestions();
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "isLoading", function () {
      var isLoading = false;
      react__WEBPACK_IMPORTED_MODULE_9___default().Children.forEach(_this.props.children, function (child) {
        isLoading = isLoading || child && child.props.isLoading;
      });
      return isLoading;
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "isOpened", function () {
      return isNumber(_this.state.selectionStart) && (countSuggestions(_this.state.suggestions) !== 0 || _this.isLoading());
    });

    (0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this), "_queryId", 0);

    _this.suggestions = {};
    _this.uuidSuggestionsOverlay = Math.random().toString(16).substring(2);
    _this.handleCopy = _this.handleCopy.bind((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this));
    _this.handleCut = _this.handleCut.bind((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this));
    _this.handlePaste = _this.handlePaste.bind((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__["default"])(_this));
    _this.state = {
      focusIndex: 0,
      selectionStart: null,
      selectionEnd: null,
      suggestions: {},
      caretPosition: null,
      suggestionsPosition: {}
    };
    return _this;
  }

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["default"])(MentionsInput, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      document.addEventListener('copy', this.handleCopy);
      document.addEventListener('cut', this.handleCut);
      document.addEventListener('paste', this.handlePaste);
      this.updateSuggestionsPosition();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      // Update position of suggestions unless this componentDidUpdate was
      // triggered by an update to suggestionsPosition.
      if (prevState.suggestionsPosition === this.state.suggestionsPosition) {
        this.updateSuggestionsPosition();
      } // maintain selection in case a mention is added/removed causing
      // the cursor to jump to the end


      if (this.state.setSelectionAfterMentionChange) {
        this.setState({
          setSelectionAfterMentionChange: false
        });
        this.setSelection(this.state.selectionStart, this.state.selectionEnd);
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      document.removeEventListener('copy', this.handleCopy);
      document.removeEventListener('cut', this.handleCut);
      document.removeEventListener('paste', this.handlePaste);
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("div", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__["default"])({
        ref: this.setContainerElement
      }, this.props.style), this.renderControl(), this.renderSuggestionsOverlay());
    }
  }, {
    key: "handlePaste",
    value: function handlePaste(event) {
      if (event.target !== this.inputElement) {
        return;
      }

      if (!this.supportsClipboardActions(event)) {
        return;
      }

      event.preventDefault();
      var _this$state3 = this.state,
          selectionStart = _this$state3.selectionStart,
          selectionEnd = _this$state3.selectionEnd;
      var _this$props7 = this.props,
          value = _this$props7.value,
          children = _this$props7.children;
      var config = readConfigFromChildren(children);
      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');
      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');
      var pastedMentions = event.clipboardData.getData('text/react-mentions');
      var pastedData = event.clipboardData.getData('text/plain');
      var newValue = spliceString(value, markupStartIndex, markupEndIndex, pastedMentions || pastedData).replace(/\r/g, '');
      var newPlainTextValue = getPlainText(newValue, config);
      var eventMock = {
        target: _objectSpread({}, event.target, {
          value: newValue
        })
      };
      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(newValue, config)); // Move the cursor position to the end of the pasted data

      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);
      var nextPos = (startOfMention || selectionStart) + getPlainText(pastedMentions || pastedData, config).length;
      this.setSelection(nextPos, nextPos);
    }
  }, {
    key: "saveSelectionToClipboard",
    value: function saveSelectionToClipboard(event) {
      var _this$state4 = this.state,
          selectionStart = _this$state4.selectionStart,
          selectionEnd = _this$state4.selectionEnd;
      var _this$props8 = this.props,
          children = _this$props8.children,
          value = _this$props8.value;
      var config = readConfigFromChildren(children);
      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');
      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');
      event.clipboardData.setData('text/plain', event.target.value.slice(selectionStart, selectionEnd));
      event.clipboardData.setData('text/react-mentions', value.slice(markupStartIndex, markupEndIndex));
    }
  }, {
    key: "supportsClipboardActions",
    value: function supportsClipboardActions(event) {
      return !!event.clipboardData;
    }
  }, {
    key: "handleCopy",
    value: function handleCopy(event) {
      if (event.target !== this.inputElement) {
        return;
      }

      if (!this.supportsClipboardActions(event)) {
        return;
      }

      event.preventDefault();
      this.saveSelectionToClipboard(event);
    }
  }, {
    key: "handleCut",
    value: function handleCut(event) {
      if (event.target !== this.inputElement) {
        return;
      }

      if (!this.supportsClipboardActions(event)) {
        return;
      }

      event.preventDefault();
      this.saveSelectionToClipboard(event);
      var _this$state5 = this.state,
          selectionStart = _this$state5.selectionStart,
          selectionEnd = _this$state5.selectionEnd;
      var _this$props9 = this.props,
          children = _this$props9.children,
          value = _this$props9.value;
      var config = readConfigFromChildren(children);
      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');
      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');
      var newValue = [value.slice(0, markupStartIndex), value.slice(markupEndIndex)].join('');
      var newPlainTextValue = getPlainText(newValue, config);
      var eventMock = {
        target: _objectSpread({}, event.target, {
          value: newPlainTextValue
        })
      };
      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(value, config));
    } // Handle input element's change event

  }]);

  return MentionsInput;
}((react__WEBPACK_IMPORTED_MODULE_9___default().Component));
/**
 * Returns the computed length property value for the provided element.
 * Note: According to spec and testing, can count on length values coming back in pixels. See https://developer.mozilla.org/en-US/docs/Web/CSS/used_value#Difference_from_computed_value
 */


(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(MentionsInput, "propTypes", propTypes);

(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__["default"])(MentionsInput, "defaultProps", {
  ignoreAccents: false,
  singleLine: false,
  allowSuggestionsAboveCursor: false,
  onKeyDown: function onKeyDown() {
    return null;
  },
  onSelect: function onSelect() {
    return null;
  },
  onBlur: function onBlur() {
    return null;
  }
});

var getComputedStyleLengthProp = function getComputedStyleLengthProp(forElement, propertyName) {
  var length = parseFloat(window.getComputedStyle(forElement, null).getPropertyValue(propertyName));
  return isFinite(length) ? length : 0;
};

var isMobileSafari = typeof navigator !== 'undefined' && /iPhone|iPad|iPod/i.test(navigator.userAgent);
var styled$3 = createDefaultStyle({
  position: 'relative',
  overflowY: 'visible',
  input: {
    display: 'block',
    width: '100%',
    position: 'absolute',
    margin: 0,
    top: 0,
    left: 0,
    boxSizing: 'border-box',
    backgroundColor: 'transparent',
    fontFamily: 'inherit',
    fontSize: 'inherit',
    letterSpacing: 'inherit'
  },
  '&multiLine': {
    input: _objectSpread({
      height: '100%',
      bottom: 0,
      overflow: 'hidden',
      resize: 'none'
    }, isMobileSafari ? {
      marginTop: 1,
      marginLeft: -3
    } : null)
  }
}, function (_ref4) {
  var singleLine = _ref4.singleLine;
  return {
    '&singleLine': singleLine,
    '&multiLine': !singleLine
  };
});
var MentionsInput$1 = styled$3(MentionsInput);

var defaultStyle = {
  fontWeight: 'inherit'
};

var Mention = function Mention(_ref) {
  var display = _ref.display,
      style = _ref.style,
      className = _ref.className,
      classNames = _ref.classNames;
  var styles = (0,substyle__WEBPACK_IMPORTED_MODULE_14__["default"])(defaultStyle, {
    style: style,
    className: className,
    classNames: classNames
  });
  return react__WEBPACK_IMPORTED_MODULE_9___default().createElement("strong", styles, display);
};

Mention.propTypes = {
  /**
   * Called when a new mention is added in the input
   *
   * Example:
   *
   * ```js
   * function(id, display) {
   *   console.log("user " + display + " was mentioned!");
   * }
   * ```
   */
  onAdd: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  onRemove: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  renderSuggestion: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),
  trigger: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), prop_types__WEBPACK_IMPORTED_MODULE_15___default().instanceOf(RegExp)]),
  markup: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),
  displayTransform: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),

  /**
   * If set to `true` spaces will not interrupt matching suggestions
   */
  allowSpaceInQuery: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),
  isLoading: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool)
};
Mention.defaultProps = {
  trigger: '@',
  markup: '@[__display__](__id__)',
  displayTransform: function displayTransform(id, display) {
    return display || id;
  },
  onAdd: function onAdd() {
    return null;
  },
  onRemove: function onRemove() {
    return null;
  },
  renderSuggestion: null,
  isLoading: false,
  appendSpaceOnAdd: false
};




/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _arrayWithHoles; }
/* harmony export */ });
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _arrayWithoutHoles; }
/* harmony export */ });
function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _assertThisInitialized; }
/* harmony export */ });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/classCallCheck.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/classCallCheck.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _classCallCheck; }
/* harmony export */ });
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/createClass.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/createClass.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _createClass; }
/* harmony export */ });
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _defineProperty; }
/* harmony export */ });
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/extends.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _extends; }
/* harmony export */ });
function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _getPrototypeOf; }
/* harmony export */ });
function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/inherits.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/inherits.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _inherits; }
/* harmony export */ });
/* harmony import */ var _setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) (0,_setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__["default"])(subClass, superClass);
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/iterableToArray.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/iterableToArray.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _iterableToArray; }
/* harmony export */ });
function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _iterableToArrayLimit; }
/* harmony export */ });
function _iterableToArrayLimit(arr, i) {
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _nonIterableRest; }
/* harmony export */ });
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance");
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _nonIterableSpread; }
/* harmony export */ });
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js ***!
  \********************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _objectWithoutProperties; }
/* harmony export */ });
/* harmony import */ var _objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./objectWithoutPropertiesLoose */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = (0,_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _objectWithoutPropertiesLoose; }
/* harmony export */ });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js ***!
  \**********************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _possibleConstructorReturn; }
/* harmony export */ });
/* harmony import */ var _helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../helpers/esm/typeof */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assertThisInitialized */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");


function _possibleConstructorReturn(self, call) {
  if (call && ((0,_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__["default"])(call) === "object" || typeof call === "function")) {
    return call;
  }

  return (0,_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(self);
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _setPrototypeOf; }
/* harmony export */ });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/slicedToArray.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/slicedToArray.js ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _slicedToArray; }
/* harmony export */ });
/* harmony import */ var _arrayWithHoles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithHoles */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js");
/* harmony import */ var _iterableToArrayLimit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArrayLimit */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js");
/* harmony import */ var _nonIterableRest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nonIterableRest */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");



function _slicedToArray(arr, i) {
  return (0,_arrayWithHoles__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || (0,_iterableToArrayLimit__WEBPACK_IMPORTED_MODULE_1__["default"])(arr, i) || (0,_nonIterableRest__WEBPACK_IMPORTED_MODULE_2__["default"])();
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _toConsumableArray; }
/* harmony export */ });
/* harmony import */ var _arrayWithoutHoles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithoutHoles */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js");
/* harmony import */ var _iterableToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArray */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/iterableToArray.js");
/* harmony import */ var _nonIterableSpread__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nonIterableSpread */ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js");



function _toConsumableArray(arr) {
  return (0,_arrayWithoutHoles__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || (0,_iterableToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(arr) || (0,_nonIterableSpread__WEBPACK_IMPORTED_MODULE_2__["default"])();
}

/***/ }),

/***/ "./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/typeof.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/react-mentions/node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _typeof; }
/* harmony export */ });
function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

/***/ }),

/***/ "./node_modules/regexify-string/index.js":
/*!***********************************************!*\
  !*** ./node_modules/regexify-string/index.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
function regexifyString(props) {
    var pattern = props.pattern, decorator = props.decorator, input = props.input;
    var output = [];
    var matchIndex = 0;
    var processedInput = input;
    var result = pattern.exec(processedInput);
    while (result !== null) {
        var matchStartAt = result.index;
        var match = result[0];
        var contentBeforeMatch = processedInput.substring(0, matchStartAt);
        var decoratedMatch = decorator(match, matchIndex);
        output.push(contentBeforeMatch);
        output.push(decoratedMatch);
        processedInput = processedInput.substring(matchStartAt + match.length, processedInput.length + 1);
        pattern.lastIndex = 0;
        result = pattern.exec(processedInput);
        ++matchIndex;
    }
    if (processedInput) {
        output.push(processedInput);
    }
    return output;
}
exports["default"] = regexifyString;


/***/ }),

/***/ "./node_modules/substyle/es6/PropsDecoratorProvider.js":
/*!*************************************************************!*\
  !*** ./node_modules/substyle/es6/PropsDecoratorProvider.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PropsDecoratorContext": function() { return /* binding */ PropsDecoratorContext; }
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _defaultPropsDecorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaultPropsDecorator */ "./node_modules/substyle/es6/defaultPropsDecorator.js");


var PropsDecoratorContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(_defaultPropsDecorator__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (PropsDecoratorContext.Provider);

/***/ }),

/***/ "./node_modules/substyle/es6/coerceSelection.js":
/*!******************************************************!*\
  !*** ./node_modules/substyle/es6/coerceSelection.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/substyle/es6/utils.js");


var coerceSelection = function coerceSelection(select) {
  if (!select) {
    return [];
  } else if (typeof select === 'string') {
    return [select];
  } else if (!Array.isArray(select)) {
    var objSelect = select; // workaround for https://github.com/facebook/flow/issues/5781

    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.keys)(select).reduce(function (acc, key) {
      return acc.concat(objSelect[key] ? [key] : []);
    }, []);
  }

  return select;
};

/* harmony default export */ __webpack_exports__["default"] = (coerceSelection);

/***/ }),

/***/ "./node_modules/substyle/es6/createSubstyle.js":
/*!*****************************************************!*\
  !*** ./node_modules/substyle/es6/createSubstyle.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! invariant */ "./node_modules/invariant/browser.js");
/* harmony import */ var invariant__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(invariant__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _coerceSelection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./coerceSelection */ "./node_modules/substyle/es6/coerceSelection.js");
/* harmony import */ var _defaultPropsDecorator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./defaultPropsDecorator */ "./node_modules/substyle/es6/defaultPropsDecorator.js");
/* harmony import */ var _filterKeys__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./filterKeys */ "./node_modules/substyle/es6/filterKeys.js");
/* harmony import */ var _memoize__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./memoize */ "./node_modules/substyle/es6/memoize.js");
/* harmony import */ var _pickStyles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./pickStyles */ "./node_modules/substyle/es6/pickStyles.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./node_modules/substyle/es6/utils.js");



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }









var guessBaseClassName = function guessBaseClassName(classNames) {
  // all class names must start with the same prefix: the component's base class name
  // which will finally go to the container element
  var firstKey = classNames && (0,_utils__WEBPACK_IMPORTED_MODULE_3__.keys)(classNames)[0];
  return firstKey && firstKey.split('__')[0].split('--')[0];
};

var deriveClassNames = function deriveClassNames(className, elementKeys, modifierKeys) {
  // do not derive class names, if the user did not specify any class name
  if (!className) {
    return undefined;
  } // derive class names based using the passed modifier/element keys


  var firstClassName = className.split(' ')[0];
  var derivedClassNames = [].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(elementKeys.length === 0 ? modifierKeys.map(function (key) {
    return "".concat(firstClassName, "--").concat(key.substring(1));
  }) : []), (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(elementKeys.map(function (key) {
    return "".concat(firstClassName, "__").concat(key);
  }))); // also use the provided `className` if there is no sub-element selection

  return elementKeys.length === 0 ? [className].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(derivedClassNames)) : derivedClassNames;
};

function createSubstyle(_ref) {
  var style = _ref.style,
      className = _ref.className,
      classNames = _ref.classNames;
  var propsDecorator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _defaultPropsDecorator__WEBPACK_IMPORTED_MODULE_4__["default"];
  var baseClassName = className || guessBaseClassName(classNames) || (style === null || style === void 0 ? void 0 : style.className);
  var substyle = typeof style === 'function' ? style : (0,_memoize__WEBPACK_IMPORTED_MODULE_5__["default"])(function (select, defaultStyle) {
    var selectedKeys = (0,_coerceSelection__WEBPACK_IMPORTED_MODULE_6__["default"])(select);
    invariant__WEBPACK_IMPORTED_MODULE_2___default()(Array.isArray(selectedKeys), 'First parameter must be a string, an array of strings, ' + 'a plain object with boolean values, or a falsy value.');
    invariant__WEBPACK_IMPORTED_MODULE_2___default()(!defaultStyle || (0,_utils__WEBPACK_IMPORTED_MODULE_3__.isPlainObject)(defaultStyle), 'Optional second parameter must be a plain object.');
    var modifierKeys = selectedKeys.filter(_filterKeys__WEBPACK_IMPORTED_MODULE_7__.isModifier);
    var elementKeys = selectedKeys.filter(_filterKeys__WEBPACK_IMPORTED_MODULE_7__.isElement);
    var collectElementStyles = elementKeys.length > 0 ? function (fromStyle) {
      return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.values)((0,_pickStyles__WEBPACK_IMPORTED_MODULE_8__.pickNestedStyles)(fromStyle, elementKeys));
    } : function (fromStyle) {
      return [fromStyle];
    };

    var collectSelectedStyles = function collectSelectedStyles() {
      var fromStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return collectElementStyles((0,_pickStyles__WEBPACK_IMPORTED_MODULE_8__.hoistModifierStylesRecursive)(fromStyle, modifierKeys));
    };

    var derivedClassNames = deriveClassNames(baseClassName, elementKeys, modifierKeys);
    return createSubstyle(_objectSpread(_objectSpread(_objectSpread({}, (style || defaultStyle) && {
      style: _utils__WEBPACK_IMPORTED_MODULE_3__.merge.apply(void 0, [{}].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(collectSelectedStyles(defaultStyle)), (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(collectSelectedStyles(style))))
    }), derivedClassNames && {
      className: derivedClassNames.join(' ')
    }), classNames && {
      classNames: classNames
    }), propsDecorator);
  });

  var styleProps = _objectSpread({}, typeof style === 'function' ? style : {
    style: style
  });

  var classNameSplit = (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(new Set([].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(styleProps.className ? styleProps.className.split(' ') : []), (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__["default"])(baseClassName ? baseClassName.split(' ') : []))));

  var mappedClassNames = classNames ? (0,_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(classNameSplit.map(function (singleClassName) {
    return classNames[singleClassName];
  })) : classNameSplit;
  var propsForSpread = propsDecorator(_objectSpread(_objectSpread({}, styleProps), mappedClassNames.length > 0 ? {
    className: mappedClassNames.join(' ')
  } : {})); // assign `style`, `className`, and/or any props added by the decorator to the return function object

  Object.assign(substyle, propsForSpread);
  return substyle;
}

/* harmony default export */ __webpack_exports__["default"] = (createSubstyle);

/***/ }),

/***/ "./node_modules/substyle/es6/defaultPropsDecorator.js":
/*!************************************************************!*\
  !*** ./node_modules/substyle/es6/defaultPropsDecorator.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _pickStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pickStyles */ "./node_modules/substyle/es6/pickStyles.js");


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }


// many css-in-js libs process keyframes objects as the value for `animationName`
var defaultObjectPropsWhitelist = ['animationName'];

var defaultPropsDecorator = function defaultPropsDecorator(_ref) {
  var style = _ref.style,
      className = _ref.className;
  return _objectSpread(_objectSpread({}, style ? {
    style: (0,_pickStyles__WEBPACK_IMPORTED_MODULE_1__.pickDirectStyles)(style, defaultObjectPropsWhitelist)
  } : {}), className ? {
    className: className
  } : {});
};

/* harmony default export */ __webpack_exports__["default"] = (defaultPropsDecorator);

/***/ }),

/***/ "./node_modules/substyle/es6/filterKeys.js":
/*!*************************************************!*\
  !*** ./node_modules/substyle/es6/filterKeys.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isElement": function() { return /* binding */ isElement; },
/* harmony export */   "isModifier": function() { return /* binding */ isModifier; }
/* harmony export */ });
var isModifier = function isModifier(key) {
  return key[0] === '&';
};
var isElement = function isElement(key) {
  return !isModifier(key);
};

/***/ }),

/***/ "./node_modules/substyle/es6/index.js":
/*!********************************************!*\
  !*** ./node_modules/substyle/es6/index.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PropsDecoratorContext": function() { return /* reexport safe */ _PropsDecoratorProvider__WEBPACK_IMPORTED_MODULE_1__.PropsDecoratorContext; },
/* harmony export */   "PropsDecoratorProvider": function() { return /* reexport safe */ _PropsDecoratorProvider__WEBPACK_IMPORTED_MODULE_1__["default"]; },
/* harmony export */   "createSubstyle": function() { return /* reexport safe */ _createSubstyle__WEBPACK_IMPORTED_MODULE_0__["default"]; },
/* harmony export */   "defaultPropsDecorator": function() { return /* reexport safe */ _defaultPropsDecorator__WEBPACK_IMPORTED_MODULE_2__["default"]; },
/* harmony export */   "inline": function() { return /* reexport safe */ _inline__WEBPACK_IMPORTED_MODULE_3__["default"]; }
/* harmony export */ });
/* harmony import */ var _PropsDecoratorProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PropsDecoratorProvider */ "./node_modules/substyle/es6/PropsDecoratorProvider.js");
/* harmony import */ var _createSubstyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createSubstyle */ "./node_modules/substyle/es6/createSubstyle.js");
/* harmony import */ var _defaultPropsDecorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaultPropsDecorator */ "./node_modules/substyle/es6/defaultPropsDecorator.js");
/* harmony import */ var _inline__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./inline */ "./node_modules/substyle/es6/inline.js");
/* harmony import */ var _useStyles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useStyles */ "./node_modules/substyle/es6/useStyles.js");






/* harmony default export */ __webpack_exports__["default"] = (_useStyles__WEBPACK_IMPORTED_MODULE_4__["default"]);

/***/ }),

/***/ "./node_modules/substyle/es6/inline.js":
/*!*********************************************!*\
  !*** ./node_modules/substyle/es6/inline.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var inline = function inline() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return args.reduce(function (result, arg) {
    return _objectSpread(_objectSpread(_objectSpread({}, result), typeof arg === 'function' ? arg : {}), {}, {
      style: _objectSpread(_objectSpread({}, result.style), typeof arg === 'function' ? arg.style : arg)
    });
  }, {});
};

/* harmony default export */ __webpack_exports__["default"] = (inline);

/***/ }),

/***/ "./node_modules/substyle/es6/memoize.js":
/*!**********************************************!*\
  !*** ./node_modules/substyle/es6/memoize.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _coerceSelection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./coerceSelection */ "./node_modules/substyle/es6/coerceSelection.js");

var EMPTY = {};

var memoize = function memoize(substyle) {
  return function (select, defaultStyle) {
    var cacheKey = defaultStyle || EMPTY;
    substyle.memoize = substyle.memoize || new WeakMap();
    var mapEntry;

    if (!substyle.memoize.has(cacheKey)) {
      mapEntry = {};
      substyle.memoize.set(cacheKey, mapEntry);
    } else {
      mapEntry = substyle.memoize.get(cacheKey);
    }

    var selectHash = (0,_coerceSelection__WEBPACK_IMPORTED_MODULE_0__["default"])(select).join(' ');
    return selectHash in mapEntry ? mapEntry[selectHash] : mapEntry[selectHash] = substyle(select || [], defaultStyle);
  };
};

/* harmony default export */ __webpack_exports__["default"] = (memoize);

/***/ }),

/***/ "./node_modules/substyle/es6/pickStyles.js":
/*!*************************************************!*\
  !*** ./node_modules/substyle/es6/pickStyles.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "hoistModifierStylesRecursive": function() { return /* binding */ hoistModifierStylesRecursive; },
/* harmony export */   "pickDirectStyles": function() { return /* binding */ pickDirectStyles; },
/* harmony export */   "pickNestedStyles": function() { return /* binding */ pickNestedStyles; }
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./node_modules/substyle/es6/utils.js");
/* harmony import */ var _filterKeys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filterKeys */ "./node_modules/substyle/es6/filterKeys.js");




var camelize = function camelize(key) {
  return key.replace(/-(\w)/g, function (m, c) {
    return c.toUpperCase();
  });
};

var pickDirectStyles = function pickDirectStyles(style) {
  var objectPropertiesWhitelist = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var styleKeys = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.keys)(style);
  var result = {};

  for (var i = 0, l = styleKeys.length; i < l; i += 1) {
    var key = styleKeys[i];
    var isDirect = Object.prototype.toString.call(style[key]) !== '[object Object]' || // style defs
    key[0] === ':' || // pseudo selectors
    key[0] === '@' || // @media / @keyframes / @supports / @font-face
    objectPropertiesWhitelist.indexOf(key) >= 0; // whitelisted object-type properties

    if (isDirect) {
      result[key] = style[key];
    }
  }

  return result;
};
var pickNestedStyles = function pickNestedStyles(style, keysToPick) {
  var camelizedKeysToPick = keysToPick.map(camelize);
  var styleKeys = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.keys)(style);
  var result = {};

  for (var i = 0, l = styleKeys.length; i < l; i += 1) {
    var key = styleKeys[i];

    if (keysToPick.indexOf(key) >= 0 || camelizedKeysToPick.indexOf(camelize(key)) >= 0) {
      result[key] = style[key];
    }
  }

  return result;
}; // breadth-first hoisting of selected modifier style subtrees
// does not traverse into element, :pseudo-selector or @directive subtrees

var hoistModifierStylesRecursive = function hoistModifierStylesRecursive(style, modifierKeysToPick) {
  // hoist styles for selected modifiers on current level
  var result = _utils__WEBPACK_IMPORTED_MODULE_1__.merge.apply(void 0, [{}, (0,_utils__WEBPACK_IMPORTED_MODULE_1__.omit)(style, modifierKeysToPick)].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])((0,_utils__WEBPACK_IMPORTED_MODULE_1__.values)(pickNestedStyles(style, modifierKeysToPick))))); // traverse nested styled for ALL modifiers

  var modifierKeys = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.keys)(result).filter(_filterKeys__WEBPACK_IMPORTED_MODULE_2__.isModifier);

  for (var i = 0, l = modifierKeys.length; i < l; i += 1) {
    var key = modifierKeys[i];
    var subresult = hoistModifierStylesRecursive(result[key], modifierKeysToPick);

    if (modifierKeysToPick.indexOf(key) >= 0) {
      // selected modifier: hoist subresult
      delete result[key];
      result = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.merge)({}, result, subresult);
    } else {
      // non-selected modifier: replace with subresult
      result[key] = subresult;
    }
  }

  return result;
};

/***/ }),

/***/ "./node_modules/substyle/es6/useStyles.js":
/*!************************************************!*\
  !*** ./node_modules/substyle/es6/useStyles.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _PropsDecoratorProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PropsDecoratorProvider */ "./node_modules/substyle/es6/PropsDecoratorProvider.js");
/* harmony import */ var _createSubstyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createSubstyle */ "./node_modules/substyle/es6/createSubstyle.js");




var useStyles = function useStyles(defaultStyle, _ref, modifiers) {
  var style = _ref.style,
      className = _ref.className,
      classNames = _ref.classNames;
  var propsDecorator = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_PropsDecoratorProvider__WEBPACK_IMPORTED_MODULE_1__.PropsDecoratorContext);
  var substyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {
    return (0,_createSubstyle__WEBPACK_IMPORTED_MODULE_2__["default"])({
      style: style,
      className: className,
      classNames: classNames
    }, propsDecorator);
  }, [style, className, classNames, propsDecorator]);
  return substyle(modifiers, defaultStyle);
};

/* harmony default export */ __webpack_exports__["default"] = (useStyles);

/***/ }),

/***/ "./node_modules/substyle/es6/utils.js":
/*!********************************************!*\
  !*** ./node_modules/substyle/es6/utils.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compact": function() { return /* binding */ compact; },
/* harmony export */   "identity": function() { return /* binding */ identity; },
/* harmony export */   "isPlainObject": function() { return /* binding */ isPlainObject; },
/* harmony export */   "keys": function() { return /* binding */ keys; },
/* harmony export */   "merge": function() { return /* binding */ merge; },
/* harmony export */   "omit": function() { return /* binding */ omit; },
/* harmony export */   "values": function() { return /* binding */ values; }
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js");

var keys = function keys(obj) {
  return obj === Object(obj) ? Object.keys(obj) : [];
};
var values = function values(obj) {
  return obj === Object(obj) ? Object.values(obj) : [];
};

function mergeDeep(target, source) {
  var output = Object.assign({}, target);

  if (isPlainObject(target) && isPlainObject(source)) {
    keys(source).forEach(function (key) {
      if (isPlainObject(source[key])) {
        if (!(key in target)) Object.assign(output, (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])({}, key, source[key]));else output[key] = mergeDeep(target[key], source[key]);
      } else {
        Object.assign(output, (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])({}, key, source[key]));
      }
    });
  }

  return output;
}

var merge = function merge(target) {
  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    sources[_key - 1] = arguments[_key];
  }

  return sources.reduce(function (t, s) {
    return mergeDeep(t, s);
  }, target);
};
var identity = function identity(value) {
  return value;
};
var omit = function omit(obj, keys) {
  var other = Object.assign({}, obj);

  if (keys) {
    for (var i = 0; i < keys.length; i++) {
      delete other[keys[i]];
    }
  }

  return other;
};
var isPlainObject = function isPlainObject(obj) {
  return obj === Object(obj) && !(obj instanceof Date) && !Array.isArray(obj);
};
var compact = function compact(arr) {
  return (arr || []).filter(Boolean);
};

/***/ }),

/***/ "./node_modules/to-camel-case/index.js":
/*!*********************************************!*\
  !*** ./node_modules/to-camel-case/index.js ***!
  \*********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {


var space = __webpack_require__(/*! to-space-case */ "./node_modules/to-space-case/index.js")

/**
 * Export.
 */

module.exports = toCamelCase

/**
 * Convert a `string` to camel case.
 *
 * @param {String} string
 * @return {String}
 */

function toCamelCase(string) {
  return space(string).replace(/\s(\w)/g, function (matches, letter) {
    return letter.toUpperCase()
  })
}


/***/ }),

/***/ "./node_modules/to-no-case/index.js":
/*!******************************************!*\
  !*** ./node_modules/to-no-case/index.js ***!
  \******************************************/
/***/ (function(module) {


/**
 * Export.
 */

module.exports = toNoCase

/**
 * Test whether a string is camel-case.
 */

var hasSpace = /\s/
var hasSeparator = /(_|-|\.|:)/
var hasCamel = /([a-z][A-Z]|[A-Z][a-z])/

/**
 * Remove any starting case from a `string`, like camel or snake, but keep
 * spaces and punctuation that may be important otherwise.
 *
 * @param {String} string
 * @return {String}
 */

function toNoCase(string) {
  if (hasSpace.test(string)) return string.toLowerCase()
  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase()
  if (hasCamel.test(string)) return uncamelize(string).toLowerCase()
  return string.toLowerCase()
}

/**
 * Separator splitter.
 */

var separatorSplitter = /[\W_]+(.|$)/g

/**
 * Un-separate a `string`.
 *
 * @param {String} string
 * @return {String}
 */

function unseparate(string) {
  return string.replace(separatorSplitter, function (m, next) {
    return next ? ' ' + next : ''
  })
}

/**
 * Camelcase splitter.
 */

var camelSplitter = /(.)([A-Z]+)/g

/**
 * Un-camelcase a `string`.
 *
 * @param {String} string
 * @return {String}
 */

function uncamelize(string) {
  return string.replace(camelSplitter, function (m, previous, uppers) {
    return previous + ' ' + uppers.toLowerCase().split('').join(' ')
  })
}


/***/ }),

/***/ "./node_modules/to-space-case/index.js":
/*!*********************************************!*\
  !*** ./node_modules/to-space-case/index.js ***!
  \*********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {


var clean = __webpack_require__(/*! to-no-case */ "./node_modules/to-no-case/index.js")

/**
 * Export.
 */

module.exports = toSpaceCase

/**
 * Convert a `string` to space case.
 *
 * @param {String} string
 * @return {String}
 */

function toSpaceCase(string) {
  return clean(string).replace(/[\W_]+(.|$)/g, function (matches, match) {
    return match ? ' ' + match : ''
  }).trim()
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _arrayLikeToArray; }
/* harmony export */ });
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _arrayWithoutHoles; }
/* harmony export */ });
/* harmony import */ var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayLikeToArray.js */ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(arr);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _defineProperty; }
/* harmony export */ });
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/iterableToArray.js":
/*!********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/iterableToArray.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _iterableToArray; }
/* harmony export */ });
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _nonIterableSpread; }
/* harmony export */ });
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _toConsumableArray; }
/* harmony export */ });
/* harmony import */ var _arrayWithoutHoles_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithoutHoles.js */ "./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js");
/* harmony import */ var _iterableToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArray.js */ "./node_modules/@babel/runtime/helpers/esm/iterableToArray.js");
/* harmony import */ var _unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./unsupportedIterableToArray.js */ "./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");
/* harmony import */ var _nonIterableSpread_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nonIterableSpread.js */ "./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js");




function _toConsumableArray(arr) {
  return (0,_arrayWithoutHoles_js__WEBPACK_IMPORTED_MODULE_0__["default"])(arr) || (0,_iterableToArray_js__WEBPACK_IMPORTED_MODULE_1__["default"])(arr) || (0,_unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__["default"])(arr) || (0,_nonIterableSpread_js__WEBPACK_IMPORTED_MODULE_3__["default"])();
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _unsupportedIterableToArray; }
/* harmony export */ });
/* harmony import */ var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayLikeToArray.js */ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o, minLen);
}

/***/ }),

/***/ "./node_modules/swr/infinite/dist/index.mjs":
/*!**************************************************!*\
  !*** ./node_modules/swr/infinite/dist/index.mjs ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ index; },
/* harmony export */   "infinite": function() { return /* binding */ infinite; },
/* harmony export */   "unstable_serialize": function() { return /* binding */ unstable_serialize; }
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ "./node_modules/swr/dist/index.mjs");



/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

var noop = function () { };
// Using noop() as the undefined value as undefined can possibly be replaced
// by something else.  Prettier ignore and extra parentheses are necessary here
// to ensure that tsc doesn't remove the __NOINLINE__ comment.
// prettier-ignore
var UNDEFINED = ( /*#__NOINLINE__*/noop());
var OBJECT = Object;
var isUndefined = function (v) { return v === UNDEFINED; };
var isFunction = function (v) { return typeof v == 'function'; };
var STR_UNDEFINED = 'undefined';
// NOTE: Use function to guarantee it's re-evaluated between jsdom and node runtime for tests.
var hasWindow = function () { return typeof window != STR_UNDEFINED; };

var IS_SERVER = !hasWindow() || 'Deno' in window;
// React currently throws a warning when using useLayoutEffect on the server.
// To get around it, we can conditionally useEffect on the server (no-op) and
// useLayoutEffect in the browser.
var useIsomorphicLayoutEffect = IS_SERVER ? react__WEBPACK_IMPORTED_MODULE_0__.useEffect : react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect;

// use WeakMap to store the object->key mapping
// so the objects can be garbage collected.
// WeakMap uses a hashtable under the hood, so the lookup
// complexity is almost O(1).
var table = new WeakMap();
// counter of the key
var counter = 0;
// A stable hash implementation that supports:
// - Fast and ensures unique hash properties
// - Handles unserializable values
// - Handles object key ordering
// - Generates short results
//
// This is not a serialization function, and the result is not guaranteed to be
// parsible.
var stableHash = function (arg) {
    var type = typeof arg;
    var constructor = arg && arg.constructor;
    var isDate = constructor == Date;
    var result;
    var index;
    if (OBJECT(arg) === arg && !isDate && constructor != RegExp) {
        // Object/function, not null/date/regexp. Use WeakMap to store the id first.
        // If it's already hashed, directly return the result.
        result = table.get(arg);
        if (result)
            return result;
        // Store the hash first for circular reference detection before entering the
        // recursive `stableHash` calls.
        // For other objects like set and map, we use this id directly as the hash.
        result = ++counter + '~';
        table.set(arg, result);
        if (constructor == Array) {
            // Array.
            result = '@';
            for (index = 0; index < arg.length; index++) {
                result += stableHash(arg[index]) + ',';
            }
            table.set(arg, result);
        }
        if (constructor == OBJECT) {
            // Object, sort keys.
            result = '#';
            var keys = OBJECT.keys(arg).sort();
            while (!isUndefined((index = keys.pop()))) {
                if (!isUndefined(arg[index])) {
                    result += index + ':' + stableHash(arg[index]) + ',';
                }
            }
            table.set(arg, result);
        }
    }
    else {
        result = isDate
            ? arg.toJSON()
            : type == 'symbol'
                ? arg.toString()
                : type == 'string'
                    ? JSON.stringify(arg)
                    : '' + arg;
    }
    return result;
};

var serialize = function (key) {
    if (isFunction(key)) {
        try {
            key = key();
        }
        catch (err) {
            // dependencies not ready
            key = '';
        }
    }
    var args = [].concat(key);
    // If key is not falsy, or not an empty array, hash it.
    key =
        typeof key == 'string'
            ? key
            : (Array.isArray(key) ? key.length : key)
                ? stableHash(key)
                : '';
    var infoKey = key ? '$swr$' + key : '';
    return [key, args, infoKey];
};

var normalize = function (args) {
    return isFunction(args[1])
        ? [args[0], args[1], args[2] || {}]
        : [args[0], null, (args[1] === null ? args[2] : args[1]) || {}];
};

// Create a custom hook with a middleware
var withMiddleware = function (useSWR, middleware) {
    return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var _a = normalize(args), key = _a[0], fn = _a[1], config = _a[2];
        var uses = (config.use || []).concat(middleware);
        return useSWR(key, fn, __assign(__assign({}, config), { use: uses }));
    };
};

// We have to several type castings here because `useSWRInfinite` is a special
var INFINITE_PREFIX = '$inf$';
var getFirstPageKey = function (getKey) {
    return serialize(getKey ? getKey(0, null) : null)[0];
};
var unstable_serialize = function (getKey) {
    return INFINITE_PREFIX + getFirstPageKey(getKey);
};
var infinite = (function (useSWRNext) {
    return function (getKey, fn, config) {
        var rerender = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({})[1];
        var didMountRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);
        var dataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
        var cache = config.cache, _a = config.initialSize, initialSize = _a === void 0 ? 1 : _a, _b = config.revalidateAll, revalidateAll = _b === void 0 ? false : _b, _c = config.persistSize, persistSize = _c === void 0 ? false : _c, _d = config.revalidateFirstPage, revalidateFirstPage = _d === void 0 ? true : _d, _e = config.revalidateOnMount, revalidateOnMount = _e === void 0 ? false : _e;
        // The serialized key of the first page.
        var firstPageKey = null;
        try {
            firstPageKey = getFirstPageKey(getKey);
        }
        catch (err) {
            // not ready
        }
        // We use cache to pass extra info (context) to fetcher so it can be globally
        // shared. The key of the context data is based on the first page key.
        var contextCacheKey = null;
        // Page size is also cached to share the page data between hooks with the
        // same key.
        var pageSizeCacheKey = null;
        if (firstPageKey) {
            contextCacheKey = '$ctx$' + firstPageKey;
            pageSizeCacheKey = '$len$' + firstPageKey;
        }
        var resolvePageSize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {
            var cachedPageSize = cache.get(pageSizeCacheKey);
            return isUndefined(cachedPageSize) ? initialSize : cachedPageSize;
            // `cache` isn't allowed to change during the lifecycle
            // eslint-disable-next-line react-hooks/exhaustive-deps
        }, [pageSizeCacheKey, initialSize]);
        // keep the last page size to restore it with the persistSize option
        var lastPageSizeRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(resolvePageSize());
        // When the page key changes, we reset the page size if it's not persisted
        useIsomorphicLayoutEffect(function () {
            if (!didMountRef.current) {
                didMountRef.current = true;
                return;
            }
            if (firstPageKey) {
                // If the key has been changed, we keep the current page size if persistSize is enabled
                cache.set(pageSizeCacheKey, persistSize ? lastPageSizeRef.current : initialSize);
            }
            // `initialSize` isn't allowed to change during the lifecycle
            // eslint-disable-next-line react-hooks/exhaustive-deps
        }, [firstPageKey]);
        // Needs to check didMountRef during mounting, not in the fetcher
        var shouldRevalidateOnMount = revalidateOnMount && !didMountRef.current;
        // Actual SWR hook to load all pages in one fetcher.
        var swr = useSWRNext(firstPageKey ? INFINITE_PREFIX + firstPageKey : null, function () { return __awaiter(void 0, void 0, void 0, function () {
            var _a, forceRevalidateAll, originalData, data, pageSize, previousPageData, i, _b, pageKey, pageArgs, pageData, shouldFetchPage;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = cache.get(contextCacheKey) || [], forceRevalidateAll = _a[0], originalData = _a[1];
                        data = [];
                        pageSize = resolvePageSize();
                        previousPageData = null;
                        i = 0;
                        _c.label = 1;
                    case 1:
                        if (!(i < pageSize)) return [3 /*break*/, 5];
                        _b = serialize(getKey(i, previousPageData)), pageKey = _b[0], pageArgs = _b[1];
                        if (!pageKey) {
                            // `pageKey` is falsy, stop fetching new pages.
                            return [3 /*break*/, 5];
                        }
                        pageData = cache.get(pageKey);
                        shouldFetchPage = revalidateAll ||
                            forceRevalidateAll ||
                            isUndefined(pageData) ||
                            (revalidateFirstPage && !i && !isUndefined(dataRef.current)) ||
                            shouldRevalidateOnMount ||
                            (originalData &&
                                !isUndefined(originalData[i]) &&
                                !config.compare(originalData[i], pageData));
                        if (!(fn && shouldFetchPage)) return [3 /*break*/, 3];
                        return [4 /*yield*/, fn.apply(void 0, pageArgs)];
                    case 2:
                        pageData = _c.sent();
                        cache.set(pageKey, pageData);
                        _c.label = 3;
                    case 3:
                        data.push(pageData);
                        previousPageData = pageData;
                        _c.label = 4;
                    case 4:
                        ++i;
                        return [3 /*break*/, 1];
                    case 5:
                        // once we executed the data fetching based on the context, clear the context
                        cache.delete(contextCacheKey);
                        // return the data
                        return [2 /*return*/, data];
                }
            });
        }); }, config);
        // update dataRef
        useIsomorphicLayoutEffect(function () {
            dataRef.current = swr.data;
        }, [swr.data]);
        var mutate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var data = args[0];
            // Default to true.
            var shouldRevalidate = args[1] !== false;
            // It is possible that the key is still falsy.
            if (!contextCacheKey)
                return;
            if (shouldRevalidate) {
                if (!isUndefined(data)) {
                    // We only revalidate the pages that are changed
                    var originalData = dataRef.current;
                    cache.set(contextCacheKey, [false, originalData]);
                }
                else {
                    // Calling `mutate()`, we revalidate all pages
                    cache.set(contextCacheKey, [true]);
                }
            }
            return args.length ? swr.mutate(data, shouldRevalidate) : swr.mutate();
        }, 
        // swr.mutate is always the same reference
        // eslint-disable-next-line react-hooks/exhaustive-deps
        [contextCacheKey]);
        // Function to load pages data from the cache based on the page size.
        var resolvePagesFromCache = function (pageSize) {
            // return an array of page data
            var data = [];
            var previousPageData = null;
            for (var i = 0; i < pageSize; ++i) {
                var pageKey = serialize(getKey(i, previousPageData))[0];
                // Get the cached page data.
                var pageData = pageKey ? cache.get(pageKey) : UNDEFINED;
                // Return the current data if we can't get it from the cache.
                if (isUndefined(pageData))
                    return dataRef.current;
                data.push(pageData);
                previousPageData = pageData;
            }
            // Return the data
            return data;
        };
        // Extend the SWR API
        var setSize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (arg) {
            // It is possible that the key is still falsy.
            if (!pageSizeCacheKey)
                return;
            var size;
            if (isFunction(arg)) {
                size = arg(resolvePageSize());
            }
            else if (typeof arg == 'number') {
                size = arg;
            }
            if (typeof size != 'number')
                return;
            cache.set(pageSizeCacheKey, size);
            lastPageSizeRef.current = size;
            rerender({});
            return mutate(resolvePagesFromCache(size));
        }, 
        // `cache` and `rerender` isn't allowed to change during the lifecycle
        // eslint-disable-next-line react-hooks/exhaustive-deps
        [pageSizeCacheKey, resolvePageSize, mutate]);
        // Use getter functions to avoid unnecessary re-renders caused by triggering
        // all the getters of the returned swr object.
        return {
            size: resolvePageSize(),
            setSize: setSize,
            mutate: mutate,
            get error() {
                return swr.error;
            },
            get data() {
                return swr.data;
            },
            get isValidating() {
                return swr.isValidating;
            }
        };
    };
});
var index = withMiddleware(swr__WEBPACK_IMPORTED_MODULE_1__["default"], infinite);




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXV0b3NpemVfZGlzdF9hdXRvc2l6ZV9lc21fanMtbm9kZV9tb2R1bGVzX2RheWpzX2RheWpzX21pbl9qcy1ub2RlX21vZHVsLWZlYzQ1NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3hDQSxxREFBcUQsZ0JBQWdCLHVCQUF1QixpQkFBaUIsdUJBQXVCLG1CQUFtQix5Q0FBeUMsb0JBQW9CLG1CQUFtQixxQ0FBcUMsZ0JBQWdCLG9CQUFvQixXQUFXLEdBQUcsSUFBSSxrQkFBa0IsU0FBUyxjQUFjLG9DQUFvQywrQkFBK0IsY0FBYyxlQUFlLGVBQWUsY0FBYyxlQUFlLGNBQWMsV0FBVyx1RkFBdUYsU0FBUyxzQkFBc0IsU0FBUyxzQkFBc0IsU0FBUyxvQkFBb0Isa0VBQWtFLG1CQUFtQixzREFBc0Qsd0NBQXdDLHVCQUF1QixlQUFlLGtQQUFrUCxnQkFBZ0IsY0FBYyxTQUFTLDhIQUE4SCxFQUFFLHlTQUF5UyxtQkFBbUIsd1NBQXdTLGNBQWMsb0JBQW9CLHdEQUF3RCxhQUFhLHVCQUF1QixrQkFBa0IsYUFBYSxpREFBaUQsaUNBQWlDLG1EQUFtRCxpQkFBaUIsU0FBUyxtRUFBbUUsNkZBQTZGLDZCQUE2Qiw2Q0FBNkMsYUFBYSxJQUFJLDZKQUE2SiwwVEFBMFQsSUFBSSw0QkFBNEIsSUFBSSxtQkFBbUIsYUFBYSxJQUFJLElBQUksc0JBQXNCLDJEQUEyRCxzQkFBc0IsMkRBQTJELEVBQUUsUUFBUSwrREFBZSxDQUFDLEVBQUM7Ozs7Ozs7Ozs7O0FDQS9xRyxlQUFlLEtBQW9ELG9CQUFvQixDQUErRyxDQUFDLGtCQUFrQixhQUFhLHdKQUF3SixFQUFFLFVBQVUsSUFBSSxXQUFXLElBQUksWUFBWSxJQUFJLFFBQVEsSUFBSSxRQUFRLElBQUksaUNBQWlDLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxPQUFPLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxVQUFVLG1NQUFtTSxtQkFBbUIsZ0JBQWdCLHlEQUF5RCxJQUFJLGtCQUFrQiw2REFBNkQsK0NBQStDLG1CQUFtQixtQ0FBbUMsOEdBQThHLG1DQUFtQyxlQUFlLHlDQUF5QyxlQUFlLE9BQU8seUNBQXlDLGtEQUFrRCxlQUFlLG1CQUFtQixhQUFhLE9BQU8sa0JBQWtCLHNCQUFzQixxQkFBcUIsTUFBTSxlQUFlLHVCQUF1QixzQkFBc0IsNEJBQTRCLG1CQUFtQixpQ0FBaUMsS0FBSyxhQUFhLFdBQVcsNEJBQTRCLGlCQUFpQix5QkFBeUIsOEJBQThCLDBDQUEwQyxLQUFLLDhCQUE4QixZQUFZLDhDQUE4QyxHQUFHLGlCQUFpQixjQUFjLDBDQUEwQyxrQkFBa0IsMkJBQTJCLG9CQUFvQixxQkFBcUIsaUNBQWlDLDBCQUEwQix3Q0FBd0MsdUNBQXVDLGlCQUFpQixNQUFNLDZDQUE2QywwSEFBMEgsbUJBQW1CLG1CQUFtQixhQUFhLG1CQUFtQixjQUFjLG9MQUFvTCxxQkFBcUIsU0FBUyxzQkFBc0IsZ0NBQWdDLHdCQUF3QixXQUFXLDRDQUE0Qyx5QkFBeUIsNEJBQTRCLDBCQUEwQiwwQkFBMEIsc0JBQXNCLG9DQUFvQyxtQkFBbUIsc0NBQXNDLHNCQUFzQix5QkFBeUIseUJBQXlCLGtEQUFrRCx3REFBd0Qsc0JBQXNCLGlCQUFpQix1RkFBdUYsMERBQTBELFVBQVUsZ0NBQWdDLGdDQUFnQyx5REFBeUQsMEJBQTBCLG9DQUFvQywrQkFBK0IsK0JBQStCLG9DQUFvQyw2QkFBNkIscUJBQXFCLDBCQUEwQixzQkFBc0IsaURBQWlELHlLQUF5SyxpQkFBaUIsNEJBQTRCLDBFQUEwRSxzQkFBc0Isd0JBQXdCLHFCQUFxQiw4QkFBOEIsbUJBQW1CLHNCQUFzQixxQkFBcUIsYUFBYSxZQUFZLDJCQUEyQixXQUFXLGdEQUFnRCxzQ0FBc0Msc0NBQXNDLHFCQUFxQixxQkFBcUIsV0FBVyx1REFBdUQsbUJBQW1CLDBCQUEwQix3QkFBd0Isc0JBQXNCLDRCQUE0QiwyQ0FBMkMsc0hBQXNILDBDQUEwQyxlQUFlLDJCQUEyQiwrQkFBK0IscUJBQXFCLDJCQUEyQixJQUFJLGtaQUFrWixrQ0FBa0Msa0NBQWtDLEdBQUcsd0JBQXdCLHNEQUFzRCx3QkFBd0Isa0ZBQWtGLGNBQWMsNkdBQTZHLDBCQUEwQix3QkFBd0Isc0JBQXNCLGtCQUFrQix3QkFBd0IscUJBQXFCLCtCQUErQixxQkFBcUIsb0JBQW9CLHlCQUF5QixxQkFBcUIsZ0NBQWdDLHFCQUFxQiw4Q0FBOEMsMEJBQTBCLDZCQUE2Qix1QkFBdUIsNkJBQTZCLEdBQUcsaUJBQWlCLHFIQUFxSCxvQkFBb0IsNkJBQTZCLDBCQUEwQixrQ0FBa0MsMkNBQTJDLGdCQUFnQix3QkFBd0IsR0FBRzs7Ozs7Ozs7OztBQ0F2Nk0sYUFBYSxtQkFBTyxDQUFDLDBEQUFjO0FBQ25DLGtCQUFrQixtQkFBTyxDQUFDLDREQUFlO0FBQ3pDLGNBQWM7QUFDZCxtQkFBbUIsbUJBQU8sQ0FBQyxnRUFBaUI7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCOztBQUVsQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVCxJQUFJO0FBQ0o7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSxJQUFxQztBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQywwQkFBMEI7QUFDckU7QUFDQTtBQUNBOztBQUVBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7OztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7O0FDekZBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOzs7Ozs7Ozs7OztBQ25DQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQyxRQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViOztBQUVBLElBQUksSUFBcUM7QUFDekMsNkJBQTZCLG1CQUFPLENBQUMseUZBQTRCO0FBQ2pFO0FBQ0EsWUFBWSxtQkFBTyxDQUFDLHVEQUFXOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sWUFBWTtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsV0FBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQXFDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkc7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBcUM7QUFDM0M7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUN0R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViLGNBQWMsbUJBQU8sQ0FBQyxrREFBVTtBQUNoQyxhQUFhLG1CQUFPLENBQUMsNERBQWU7O0FBRXBDLDJCQUEyQixtQkFBTyxDQUFDLHlGQUE0QjtBQUMvRCxVQUFVLG1CQUFPLENBQUMsdURBQVc7QUFDN0IscUJBQXFCLG1CQUFPLENBQUMscUVBQWtCOztBQUUvQzs7QUFFQSxJQUFJLElBQXFDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQzs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDhCQUE4QjtBQUM5QixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULDRCQUE0QjtBQUM1QixPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUSxJQUFxQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFNBQVMsS0FBcUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzQkFBc0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLElBQXFDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Es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RztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIseUJBQXlCO0FBQ3JEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsWUFBWTtBQUN6RSwyREFBMkQsWUFBWTtBQUN2RTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1FQUFtRSxZQUFZO0FBQy9FLGlFQUFpRSxZQUFZO0FBQzdFLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FB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RDtBQUNBLG1CQUFtQixRQUFRLFNBQVMsT0FBTyxPQUFPLE9BQU8sUUFBUSxRQUFRLFFBQVEsUUFBUSxRQUFRLE9BQU8sUUFBUSxRQUFRLE9BQU8sT0FBTyxPQUFPLFFBQVEsT0FBTyxPQUFPLE9BQU8sUUFBUSxRQUFRLE9BQU8sUUFBUSxPQUFPLFFBQVEsUUFBUSxPQUFPLE9BQU8sT0FBTztBQUNyUCxDQUFDO0FBQ0Q7QUFDQSxtQkFBbUIsUUFBUSxTQUFTLFFBQVEsT0FBTyxTQUFTO0FBQzVELENBQUM7QUFDRDtBQUNBLG1CQUFtQixRQUFRLFNBQVMsT0FBTyxPQUFPLFFBQVEsT0FBTyxPQUFPLE9BQU8sT0FBTyxPQUFPLE9BQU8sU0FBUyxRQUFRLFNBQVM7QUFDOUgsQ0FBQztBQUNEO0FBQ0EsbUJBQW1CLFFBQVEsU0FBUyxPQUFPLFFBQVEsUUFBUSxPQUFPLFFBQVEsUUFBUSxRQUFRLFFBQVEsT0FBTyxTQUFTLFNBQVMsT0FBTztBQUNsSSxDQUFDO0FBQ0Q7QUFDQSxtQkFBbUI7QUFDbkIsQ0FBQztBQUNEO0FBQ0EsbUJBQW1CLFFBQVEsU0FBUyxPQUFPLE9BQU8sT0FBTyxPQUFPLE9BQU8sT0FBTyxPQUFPLFFBQVEsUUFBUSxPQUFPLE9BQU8sT0FBTyxRQUFRLE9BQU8sUUFBUSxPQUFPLE9BQU87QUFDL0osQ0FBQztBQUNEO0FBQ0EsbUJBQW1CO0FBQ25CLENBQUM7QUFDRDtBQUNBLG1CQUFtQixRQUFRLFNBQVMsT0FBTyxPQUFPLE9BQU87QUFDekQsQ0FBQztBQUNEO0FBQ0EsbUJBQW1CLFFBQVEsU0FBUyxRQUFRLE9BQU8sUUFBUSxPQUFPLFFBQVEsT0FBTyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVM7QUFDOUgsQ0FBQztBQUNEO0FBQ0EsbUJBQW1CLFFBQVEsU0FBUyxPQUFPLE9BQU8sT0FBTyxRQUFRLFFBQVEsT0FBTyxRQUFRLFFBQVEsT0FBTyxPQUFPLE9BQU8sU0FBUyxTQUFTLFNBQVMsU0FBUztBQUN6SixDQUFDO0FBQ0Q7QUFDQSxtQkFBbUI7QUFDbkIsQ0FBQztBQUNEO0FBQ0Es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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0EsU0FBUztBQUNUO0FBQ0EsbUdBQW1HOztBQUVuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxNQUFNOztBQUVOLEdBQUc7O0FBRUg7QUFDQSxDQUFDLENBQUMsd0RBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7OztBQUdBLHFGQUFlOztBQUVmLHFGQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscURB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LXN0eWxlL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL2F1dG9zaXplL2Rpc3QvYXV0b3NpemUuZXNtLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL2RheWpzL2RheWpzLm1pbi5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9kb20tY3NzL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL2ludmFyaWFudC9icm93c2VyLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL29iamVjdC1hc3NpZ24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcGVyZm9ybWFuY2Utbm93L2xpYi9wZXJmb3JtYW5jZS1ub3cuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcHJlZml4LXN0eWxlL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvY2hlY2tQcm9wVHlwZXMuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9mYWN0b3J5V2l0aFR5cGVDaGVja2Vycy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvbGliL2hhcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yYWYvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL1Njcm9sbGJhcnMvZGVmYXVsdFJlbmRlckVsZW1lbnRzLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi9TY3JvbGxiYXJzL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi9TY3JvbGxiYXJzL3N0eWxlcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL3V0aWxzL2dldElubmVySGVpZ2h0LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9nZXRJbm5lcldpZHRoLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9nZXRTY3JvbGxiYXJXaWR0aC5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvaXNTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL3V0aWxzL3JldHVybkZhbHNlLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL2Rpc3QvcmVhY3QtbWVudGlvbnMuZXNtLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhIb2xlcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlXaXRob3V0SG9sZXMuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9ub25JdGVyYWJsZVJlc3QuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybi5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9yZWFjdC1tZW50aW9ucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2V0UHJvdG90eXBlT2YuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVhY3QtbWVudGlvbnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3JlYWN0LW1lbnRpb25zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvcmVnZXhpZnktc3RyaW5nL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3N1YnN0eWxlL2VzNi9Qcm9wc0RlY29yYXRvclByb3ZpZGVyLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3N1YnN0eWxlL2VzNi9jb2VyY2VTZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3Vic3R5bGUvZXM2L2NyZWF0ZVN1YnN0eWxlLmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3N1YnN0eWxlL2VzNi9kZWZhdWx0UHJvcHNEZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3Vic3R5bGUvZXM2L2ZpbHRlcktleXMuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3Vic3R5bGUvZXM2L2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3N1YnN0eWxlL2VzNi9pbmxpbmUuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3Vic3R5bGUvZXM2L21lbW9pemUuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3Vic3R5bGUvZXM2L3BpY2tTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3Vic3R5bGUvZXM2L3VzZVN0eWxlcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9zdWJzdHlsZS9lczYvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvdG8tY2FtZWwtY2FzZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy90by1uby1jYXNlL2luZGV4LmpzIiwid2VicGFjazovL2FsZWN0dXJlLy4vbm9kZV9tb2R1bGVzL3RvLXNwYWNlLWNhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlMaWtlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9hbGVjdHVyZS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vbm9uSXRlcmFibGVTcHJlYWQuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vYWxlY3R1cmUvLi9ub2RlX21vZHVsZXMvc3dyL2luZmluaXRlL2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIFRoZSBmb2xsb3dpbmcgbGlzdCBpcyBkZWZpbmVkIGluIFJlYWN0J3MgY29yZSAqL1xudmFyIElTX1VOSVRMRVNTID0ge1xuICBhbmltYXRpb25JdGVyYXRpb25Db3VudDogdHJ1ZSxcbiAgYm94RmxleDogdHJ1ZSxcbiAgYm94RmxleEdyb3VwOiB0cnVlLFxuICBib3hPcmRpbmFsR3JvdXA6IHRydWUsXG4gIGNvbHVtbkNvdW50OiB0cnVlLFxuICBmbGV4OiB0cnVlLFxuICBmbGV4R3JvdzogdHJ1ZSxcbiAgZmxleFBvc2l0aXZlOiB0cnVlLFxuICBmbGV4U2hyaW5rOiB0cnVlLFxuICBmbGV4TmVnYXRpdmU6IHRydWUsXG4gIGZsZXhPcmRlcjogdHJ1ZSxcbiAgZ3JpZFJvdzogdHJ1ZSxcbiAgZ3JpZENvbHVtbjogdHJ1ZSxcbiAgZm9udFdlaWdodDogdHJ1ZSxcbiAgbGluZUNsYW1wOiB0cnVlLFxuICBsaW5lSGVpZ2h0OiB0cnVlLFxuICBvcGFjaXR5OiB0cnVlLFxuICBvcmRlcjogdHJ1ZSxcbiAgb3JwaGFuczogdHJ1ZSxcbiAgdGFiU2l6ZTogdHJ1ZSxcbiAgd2lkb3dzOiB0cnVlLFxuICB6SW5kZXg6IHRydWUsXG4gIHpvb206IHRydWUsXG5cbiAgLy8gU1ZHLXJlbGF0ZWQgcHJvcGVydGllc1xuICBmaWxsT3BhY2l0eTogdHJ1ZSxcbiAgc3RvcE9wYWNpdHk6IHRydWUsXG4gIHN0cm9rZURhc2hvZmZzZXQ6IHRydWUsXG4gIHN0cm9rZU9wYWNpdHk6IHRydWUsXG4gIHN0cm9rZVdpZHRoOiB0cnVlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIUlTX1VOSVRMRVNTWyBuYW1lIF0pIHtcbiAgICByZXR1cm4gdmFsdWUgKyAncHgnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufTsiLCJ2YXIgZSx0LG49XCJmdW5jdGlvblwiPT10eXBlb2YgTWFwP25ldyBNYXA6KGU9W10sdD1bXSx7aGFzOmZ1bmN0aW9uKHQpe3JldHVybiBlLmluZGV4T2YodCk+LTF9LGdldDpmdW5jdGlvbihuKXtyZXR1cm4gdFtlLmluZGV4T2YobildfSxzZXQ6ZnVuY3Rpb24obixvKXstMT09PWUuaW5kZXhPZihuKSYmKGUucHVzaChuKSx0LnB1c2gobykpfSxkZWxldGU6ZnVuY3Rpb24obil7dmFyIG89ZS5pbmRleE9mKG4pO28+LTEmJihlLnNwbGljZShvLDEpLHQuc3BsaWNlKG8sMSkpfX0pLG89ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBFdmVudChlLHtidWJibGVzOiEwfSl9O3RyeXtuZXcgRXZlbnQoXCJ0ZXN0XCIpfWNhdGNoKGUpe289ZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtyZXR1cm4gdC5pbml0RXZlbnQoZSwhMCwhMSksdH19ZnVuY3Rpb24gcihlKXt2YXIgdD1uLmdldChlKTt0JiZ0LmRlc3Ryb3koKX1mdW5jdGlvbiBpKGUpe3ZhciB0PW4uZ2V0KGUpO3QmJnQudXBkYXRlKCl9dmFyIGw9bnVsbDtcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT8oKGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KS5kZXN0cm95PWZ1bmN0aW9uKGUpe3JldHVybiBlfSxsLnVwZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZX0pOigobD1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUubGVuZ3RoP2U6W2VdLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihlJiZlLm5vZGVOYW1lJiZcIlRFWFRBUkVBXCI9PT1lLm5vZGVOYW1lJiYhbi5oYXMoZSkpe3ZhciB0LHI9bnVsbCxpPW51bGwsbD1udWxsLGQ9ZnVuY3Rpb24oKXtlLmNsaWVudFdpZHRoIT09aSYmYygpfSxhPWZ1bmN0aW9uKHQpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsZCwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5wdXRcIixjLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLGMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImF1dG9zaXplOmRlc3Ryb3lcIixhLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhdXRvc2l6ZTp1cGRhdGVcIixjLCExKSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Uuc3R5bGVbbl09dFtuXX0pLG4uZGVsZXRlKGUpfS5iaW5kKGUse2hlaWdodDplLnN0eWxlLmhlaWdodCxyZXNpemU6ZS5zdHlsZS5yZXNpemUsb3ZlcmZsb3dZOmUuc3R5bGUub3ZlcmZsb3dZLG92ZXJmbG93WDplLnN0eWxlLm92ZXJmbG93WCx3b3JkV3JhcDplLnN0eWxlLndvcmRXcmFwfSk7ZS5hZGRFdmVudExpc3RlbmVyKFwiYXV0b3NpemU6ZGVzdHJveVwiLGEsITEpLFwib25wcm9wZXJ0eWNoYW5nZVwiaW4gZSYmXCJvbmlucHV0XCJpbiBlJiZlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLGMsITEpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsZCwhMSksZS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIixjLCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJhdXRvc2l6ZTp1cGRhdGVcIixjLCExKSxlLnN0eWxlLm92ZXJmbG93WD1cImhpZGRlblwiLGUuc3R5bGUud29yZFdyYXA9XCJicmVhay13b3JkXCIsbi5zZXQoZSx7ZGVzdHJveTphLHVwZGF0ZTpjfSksXCJ2ZXJ0aWNhbFwiPT09KHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSxudWxsKSkucmVzaXplP2Uuc3R5bGUucmVzaXplPVwibm9uZVwiOlwiYm90aFwiPT09dC5yZXNpemUmJihlLnN0eWxlLnJlc2l6ZT1cImhvcml6b250YWxcIikscj1cImNvbnRlbnQtYm94XCI9PT10LmJveFNpemluZz8tKHBhcnNlRmxvYXQodC5wYWRkaW5nVG9wKStwYXJzZUZsb2F0KHQucGFkZGluZ0JvdHRvbSkpOnBhcnNlRmxvYXQodC5ib3JkZXJUb3BXaWR0aCkrcGFyc2VGbG9hdCh0LmJvcmRlckJvdHRvbVdpZHRoKSxpc05hTihyKSYmKHI9MCksYygpfWZ1bmN0aW9uIHUodCl7dmFyIG49ZS5zdHlsZS53aWR0aDtlLnN0eWxlLndpZHRoPVwiMHB4XCIsZS5zdHlsZS53aWR0aD1uLGUuc3R5bGUub3ZlcmZsb3dZPXR9ZnVuY3Rpb24gcygpe2lmKDAhPT1lLnNjcm9sbEhlaWdodCl7dmFyIHQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdO2UmJmUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgRWxlbWVudDspZS5wYXJlbnROb2RlLnNjcm9sbFRvcCYmdC5wdXNoKHtub2RlOmUucGFyZW50Tm9kZSxzY3JvbGxUb3A6ZS5wYXJlbnROb2RlLnNjcm9sbFRvcH0pLGU9ZS5wYXJlbnROb2RlO3JldHVybiB0fShlKSxuPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtlLnN0eWxlLmhlaWdodD1cIlwiLGUuc3R5bGUuaGVpZ2h0PWUuc2Nyb2xsSGVpZ2h0K3IrXCJweFwiLGk9ZS5jbGllbnRXaWR0aCx0LmZvckVhY2goZnVuY3Rpb24oZSl7ZS5ub2RlLnNjcm9sbFRvcD1lLnNjcm9sbFRvcH0pLG4mJihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wPW4pfX1mdW5jdGlvbiBjKCl7cygpO3ZhciB0PU1hdGgucm91bmQocGFyc2VGbG9hdChlLnN0eWxlLmhlaWdodCkpLG49d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSxudWxsKSxyPVwiY29udGVudC1ib3hcIj09PW4uYm94U2l6aW5nP01hdGgucm91bmQocGFyc2VGbG9hdChuLmhlaWdodCkpOmUub2Zmc2V0SGVpZ2h0O2lmKHI8dD9cImhpZGRlblwiPT09bi5vdmVyZmxvd1kmJih1KFwic2Nyb2xsXCIpLHMoKSxyPVwiY29udGVudC1ib3hcIj09PW4uYm94U2l6aW5nP01hdGgucm91bmQocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLmhlaWdodCkpOmUub2Zmc2V0SGVpZ2h0KTpcImhpZGRlblwiIT09bi5vdmVyZmxvd1kmJih1KFwiaGlkZGVuXCIpLHMoKSxyPVwiY29udGVudC1ib3hcIj09PW4uYm94U2l6aW5nP01hdGgucm91bmQocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLmhlaWdodCkpOmUub2Zmc2V0SGVpZ2h0KSxsIT09cil7bD1yO3ZhciBpPW8oXCJhdXRvc2l6ZTpyZXNpemVkXCIpO3RyeXtlLmRpc3BhdGNoRXZlbnQoaSl9Y2F0Y2goZSl7fX19fShlKX0pLGV9KS5kZXN0cm95PWZ1bmN0aW9uKGUpe3JldHVybiBlJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUubGVuZ3RoP2U6W2VdLHIpLGV9LGwudXBkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUubGVuZ3RoP2U6W2VdLGkpLGV9KTt2YXIgZD1sO2V4cG9ydCBkZWZhdWx0IGQ7XG4iLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKToodD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOnR8fHNlbGYpLmRheWpzPWUoKX0odGhpcywoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdD0xZTMsZT02ZTQsbj0zNmU1LHI9XCJtaWxsaXNlY29uZFwiLGk9XCJzZWNvbmRcIixzPVwibWludXRlXCIsdT1cImhvdXJcIixhPVwiZGF5XCIsbz1cIndlZWtcIixmPVwibW9udGhcIixoPVwicXVhcnRlclwiLGM9XCJ5ZWFyXCIsZD1cImRhdGVcIiwkPVwiSW52YWxpZCBEYXRlXCIsbD0vXihcXGR7NH0pWy0vXT8oXFxkezEsMn0pP1stL10/KFxcZHswLDJ9KVtUdFxcc10qKFxcZHsxLDJ9KT86PyhcXGR7MSwyfSk/Oj8oXFxkezEsMn0pP1suOl0/KFxcZCspPyQvLHk9L1xcWyhbXlxcXV0rKV18WXsxLDR9fE17MSw0fXxEezEsMn18ZHsxLDR9fEh7MSwyfXxoezEsMn18YXxBfG17MSwyfXxzezEsMn18WnsxLDJ9fFNTUy9nLE09e25hbWU6XCJlblwiLHdlZWtkYXlzOlwiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXlcIi5zcGxpdChcIl9cIiksbW9udGhzOlwiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlclwiLnNwbGl0KFwiX1wiKX0sbT1mdW5jdGlvbih0LGUsbil7dmFyIHI9U3RyaW5nKHQpO3JldHVybiFyfHxyLmxlbmd0aD49ZT90OlwiXCIrQXJyYXkoZSsxLXIubGVuZ3RoKS5qb2luKG4pK3R9LGc9e3M6bSx6OmZ1bmN0aW9uKHQpe3ZhciBlPS10LnV0Y09mZnNldCgpLG49TWF0aC5hYnMoZSkscj1NYXRoLmZsb29yKG4vNjApLGk9biU2MDtyZXR1cm4oZTw9MD9cIitcIjpcIi1cIikrbShyLDIsXCIwXCIpK1wiOlwiK20oaSwyLFwiMFwiKX0sbTpmdW5jdGlvbiB0KGUsbil7aWYoZS5kYXRlKCk8bi5kYXRlKCkpcmV0dXJuLXQobixlKTt2YXIgcj0xMioobi55ZWFyKCktZS55ZWFyKCkpKyhuLm1vbnRoKCktZS5tb250aCgpKSxpPWUuY2xvbmUoKS5hZGQocixmKSxzPW4taTwwLHU9ZS5jbG9uZSgpLmFkZChyKyhzPy0xOjEpLGYpO3JldHVybisoLShyKyhuLWkpLyhzP2ktdTp1LWkpKXx8MCl9LGE6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MD9NYXRoLmNlaWwodCl8fDA6TWF0aC5mbG9vcih0KX0scDpmdW5jdGlvbih0KXtyZXR1cm57TTpmLHk6Yyx3Om8sZDphLEQ6ZCxoOnUsbTpzLHM6aSxtczpyLFE6aH1bdF18fFN0cmluZyh0fHxcIlwiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL3MkLyxcIlwiKX0sdTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH19LHY9XCJlblwiLEQ9e307RFt2XT1NO3ZhciBwPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgX30sUz1mdW5jdGlvbiB0KGUsbixyKXt2YXIgaTtpZighZSlyZXR1cm4gdjtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIHM9ZS50b0xvd2VyQ2FzZSgpO0Rbc10mJihpPXMpLG4mJihEW3NdPW4saT1zKTt2YXIgdT1lLnNwbGl0KFwiLVwiKTtpZighaSYmdS5sZW5ndGg+MSlyZXR1cm4gdCh1WzBdKX1lbHNle3ZhciBhPWUubmFtZTtEW2FdPWUsaT1hfXJldHVybiFyJiZpJiYodj1pKSxpfHwhciYmdn0sdz1mdW5jdGlvbih0LGUpe2lmKHAodCkpcmV0dXJuIHQuY2xvbmUoKTt2YXIgbj1cIm9iamVjdFwiPT10eXBlb2YgZT9lOnt9O3JldHVybiBuLmRhdGU9dCxuLmFyZ3M9YXJndW1lbnRzLG5ldyBfKG4pfSxPPWc7Ty5sPVMsTy5pPXAsTy53PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHcodCx7bG9jYWxlOmUuJEwsdXRjOmUuJHUseDplLiR4LCRvZmZzZXQ6ZS4kb2Zmc2V0fSl9O3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTSh0KXt0aGlzLiRMPVModC5sb2NhbGUsbnVsbCwhMCksdGhpcy5wYXJzZSh0KX12YXIgbT1NLnByb3RvdHlwZTtyZXR1cm4gbS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLiRkPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0ZSxuPXQudXRjO2lmKG51bGw9PT1lKXJldHVybiBuZXcgRGF0ZShOYU4pO2lmKE8udShlKSlyZXR1cm4gbmV3IERhdGU7aWYoZSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIG5ldyBEYXRlKGUpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYhL1okL2kudGVzdChlKSl7dmFyIHI9ZS5tYXRjaChsKTtpZihyKXt2YXIgaT1yWzJdLTF8fDAscz0ocls3XXx8XCIwXCIpLnN1YnN0cmluZygwLDMpO3JldHVybiBuP25ldyBEYXRlKERhdGUuVVRDKHJbMV0saSxyWzNdfHwxLHJbNF18fDAscls1XXx8MCxyWzZdfHwwLHMpKTpuZXcgRGF0ZShyWzFdLGksclszXXx8MSxyWzRdfHwwLHJbNV18fDAscls2XXx8MCxzKX19cmV0dXJuIG5ldyBEYXRlKGUpfSh0KSx0aGlzLiR4PXQueHx8e30sdGhpcy5pbml0KCl9LG0uaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGQ7dGhpcy4keT10LmdldEZ1bGxZZWFyKCksdGhpcy4kTT10LmdldE1vbnRoKCksdGhpcy4kRD10LmdldERhdGUoKSx0aGlzLiRXPXQuZ2V0RGF5KCksdGhpcy4kSD10LmdldEhvdXJzKCksdGhpcy4kbT10LmdldE1pbnV0ZXMoKSx0aGlzLiRzPXQuZ2V0U2Vjb25kcygpLHRoaXMuJG1zPXQuZ2V0TWlsbGlzZWNvbmRzKCl9LG0uJHV0aWxzPWZ1bmN0aW9uKCl7cmV0dXJuIE99LG0uaXNWYWxpZD1mdW5jdGlvbigpe3JldHVybiEodGhpcy4kZC50b1N0cmluZygpPT09JCl9LG0uaXNTYW1lPWZ1bmN0aW9uKHQsZSl7dmFyIG49dyh0KTtyZXR1cm4gdGhpcy5zdGFydE9mKGUpPD1uJiZuPD10aGlzLmVuZE9mKGUpfSxtLmlzQWZ0ZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdyh0KTx0aGlzLnN0YXJ0T2YoZSl9LG0uaXNCZWZvcmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbmRPZihlKTx3KHQpfSxtLiRnPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTy51KHQpP3RoaXNbZV06dGhpcy5zZXQobix0KX0sbS51bml4PWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IodGhpcy52YWx1ZU9mKCkvMWUzKX0sbS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGQuZ2V0VGltZSgpfSxtLnN0YXJ0T2Y9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9ISFPLnUoZSl8fGUsaD1PLnAodCksJD1mdW5jdGlvbih0LGUpe3ZhciBpPU8udyhuLiR1P0RhdGUuVVRDKG4uJHksZSx0KTpuZXcgRGF0ZShuLiR5LGUsdCksbik7cmV0dXJuIHI/aTppLmVuZE9mKGEpfSxsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE8udyhuLnRvRGF0ZSgpW3RdLmFwcGx5KG4udG9EYXRlKFwic1wiKSwocj9bMCwwLDAsMF06WzIzLDU5LDU5LDk5OV0pLnNsaWNlKGUpKSxuKX0seT10aGlzLiRXLE09dGhpcy4kTSxtPXRoaXMuJEQsZz1cInNldFwiKyh0aGlzLiR1P1wiVVRDXCI6XCJcIik7c3dpdGNoKGgpe2Nhc2UgYzpyZXR1cm4gcj8kKDEsMCk6JCgzMSwxMSk7Y2FzZSBmOnJldHVybiByPyQoMSxNKTokKDAsTSsxKTtjYXNlIG86dmFyIHY9dGhpcy4kbG9jYWxlKCkud2Vla1N0YXJ0fHwwLEQ9KHk8dj95Kzc6eSktdjtyZXR1cm4gJChyP20tRDptKyg2LUQpLE0pO2Nhc2UgYTpjYXNlIGQ6cmV0dXJuIGwoZytcIkhvdXJzXCIsMCk7Y2FzZSB1OnJldHVybiBsKGcrXCJNaW51dGVzXCIsMSk7Y2FzZSBzOnJldHVybiBsKGcrXCJTZWNvbmRzXCIsMik7Y2FzZSBpOnJldHVybiBsKGcrXCJNaWxsaXNlY29uZHNcIiwzKTtkZWZhdWx0OnJldHVybiB0aGlzLmNsb25lKCl9fSxtLmVuZE9mPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXJ0T2YodCwhMSl9LG0uJHNldD1mdW5jdGlvbih0LGUpe3ZhciBuLG89Ty5wKHQpLGg9XCJzZXRcIisodGhpcy4kdT9cIlVUQ1wiOlwiXCIpLCQ9KG49e30sblthXT1oK1wiRGF0ZVwiLG5bZF09aCtcIkRhdGVcIixuW2ZdPWgrXCJNb250aFwiLG5bY109aCtcIkZ1bGxZZWFyXCIsblt1XT1oK1wiSG91cnNcIixuW3NdPWgrXCJNaW51dGVzXCIsbltpXT1oK1wiU2Vjb25kc1wiLG5bcl09aCtcIk1pbGxpc2Vjb25kc1wiLG4pW29dLGw9bz09PWE/dGhpcy4kRCsoZS10aGlzLiRXKTplO2lmKG89PT1mfHxvPT09Yyl7dmFyIHk9dGhpcy5jbG9uZSgpLnNldChkLDEpO3kuJGRbJF0obCkseS5pbml0KCksdGhpcy4kZD15LnNldChkLE1hdGgubWluKHRoaXMuJEQseS5kYXlzSW5Nb250aCgpKSkuJGR9ZWxzZSAkJiZ0aGlzLiRkWyRdKGwpO3JldHVybiB0aGlzLmluaXQoKSx0aGlzfSxtLnNldD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNsb25lKCkuJHNldCh0LGUpfSxtLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpc1tPLnAodCldKCl9LG0uYWRkPWZ1bmN0aW9uKHIsaCl7dmFyIGQsJD10aGlzO3I9TnVtYmVyKHIpO3ZhciBsPU8ucChoKSx5PWZ1bmN0aW9uKHQpe3ZhciBlPXcoJCk7cmV0dXJuIE8udyhlLmRhdGUoZS5kYXRlKCkrTWF0aC5yb3VuZCh0KnIpKSwkKX07aWYobD09PWYpcmV0dXJuIHRoaXMuc2V0KGYsdGhpcy4kTStyKTtpZihsPT09YylyZXR1cm4gdGhpcy5zZXQoYyx0aGlzLiR5K3IpO2lmKGw9PT1hKXJldHVybiB5KDEpO2lmKGw9PT1vKXJldHVybiB5KDcpO3ZhciBNPShkPXt9LGRbc109ZSxkW3VdPW4sZFtpXT10LGQpW2xdfHwxLG09dGhpcy4kZC5nZXRUaW1lKCkrcipNO3JldHVybiBPLncobSx0aGlzKX0sbS5zdWJ0cmFjdD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFkZCgtMSp0LGUpfSxtLmZvcm1hdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy4kbG9jYWxlKCk7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBuLmludmFsaWREYXRlfHwkO3ZhciByPXR8fFwiWVlZWS1NTS1ERFRISDptbTpzc1pcIixpPU8ueih0aGlzKSxzPXRoaXMuJEgsdT10aGlzLiRtLGE9dGhpcy4kTSxvPW4ud2Vla2RheXMsZj1uLm1vbnRocyxoPWZ1bmN0aW9uKHQsbixpLHMpe3JldHVybiB0JiYodFtuXXx8dChlLHIpKXx8aVtuXS5zbGljZSgwLHMpfSxjPWZ1bmN0aW9uKHQpe3JldHVybiBPLnMocyUxMnx8MTIsdCxcIjBcIil9LGQ9bi5tZXJpZGllbXx8ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQ8MTI/XCJBTVwiOlwiUE1cIjtyZXR1cm4gbj9yLnRvTG93ZXJDYXNlKCk6cn0sbD17WVk6U3RyaW5nKHRoaXMuJHkpLnNsaWNlKC0yKSxZWVlZOnRoaXMuJHksTTphKzEsTU06Ty5zKGErMSwyLFwiMFwiKSxNTU06aChuLm1vbnRoc1Nob3J0LGEsZiwzKSxNTU1NOmgoZixhKSxEOnRoaXMuJEQsREQ6Ty5zKHRoaXMuJEQsMixcIjBcIiksZDpTdHJpbmcodGhpcy4kVyksZGQ6aChuLndlZWtkYXlzTWluLHRoaXMuJFcsbywyKSxkZGQ6aChuLndlZWtkYXlzU2hvcnQsdGhpcy4kVyxvLDMpLGRkZGQ6b1t0aGlzLiRXXSxIOlN0cmluZyhzKSxISDpPLnMocywyLFwiMFwiKSxoOmMoMSksaGg6YygyKSxhOmQocyx1LCEwKSxBOmQocyx1LCExKSxtOlN0cmluZyh1KSxtbTpPLnModSwyLFwiMFwiKSxzOlN0cmluZyh0aGlzLiRzKSxzczpPLnModGhpcy4kcywyLFwiMFwiKSxTU1M6Ty5zKHRoaXMuJG1zLDMsXCIwXCIpLFo6aX07cmV0dXJuIHIucmVwbGFjZSh5LChmdW5jdGlvbih0LGUpe3JldHVybiBlfHxsW3RdfHxpLnJlcGxhY2UoXCI6XCIsXCJcIil9KSl9LG0udXRjT2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDE1Ki1NYXRoLnJvdW5kKHRoaXMuJGQuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSl9LG0uZGlmZj1mdW5jdGlvbihyLGQsJCl7dmFyIGwseT1PLnAoZCksTT13KHIpLG09KE0udXRjT2Zmc2V0KCktdGhpcy51dGNPZmZzZXQoKSkqZSxnPXRoaXMtTSx2PU8ubSh0aGlzLE0pO3JldHVybiB2PShsPXt9LGxbY109di8xMixsW2ZdPXYsbFtoXT12LzMsbFtvXT0oZy1tKS82MDQ4ZTUsbFthXT0oZy1tKS84NjRlNSxsW3VdPWcvbixsW3NdPWcvZSxsW2ldPWcvdCxsKVt5XXx8ZywkP3Y6Ty5hKHYpfSxtLmRheXNJbk1vbnRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kT2YoZikuJER9LG0uJGxvY2FsZT1mdW5jdGlvbigpe3JldHVybiBEW3RoaXMuJExdfSxtLmxvY2FsZT1mdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybiB0aGlzLiRMO3ZhciBuPXRoaXMuY2xvbmUoKSxyPVModCxlLCEwKTtyZXR1cm4gciYmKG4uJEw9ciksbn0sbS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBPLncodGhpcy4kZCx0aGlzKX0sbS50b0RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkpfSxtLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQoKT90aGlzLnRvSVNPU3RyaW5nKCk6bnVsbH0sbS50b0lTT1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRkLnRvSVNPU3RyaW5nKCl9LG0udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZC50b1VUQ1N0cmluZygpfSxNfSgpLFQ9Xy5wcm90b3R5cGU7cmV0dXJuIHcucHJvdG90eXBlPVQsW1tcIiRtc1wiLHJdLFtcIiRzXCIsaV0sW1wiJG1cIixzXSxbXCIkSFwiLHVdLFtcIiRXXCIsYV0sW1wiJE1cIixmXSxbXCIkeVwiLGNdLFtcIiREXCIsZF1dLmZvckVhY2goKGZ1bmN0aW9uKHQpe1RbdFsxXV09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuJGcoZSx0WzBdLHRbMV0pfX0pKSx3LmV4dGVuZD1mdW5jdGlvbih0LGUpe3JldHVybiB0LiRpfHwodChlLF8sdyksdC4kaT0hMCksd30sdy5sb2NhbGU9Uyx3LmlzRGF5anM9cCx3LnVuaXg9ZnVuY3Rpb24odCl7cmV0dXJuIHcoMWUzKnQpfSx3LmVuPURbdl0sdy5Mcz1ELHcucD17fSx3fSkpOyIsInZhciBwcmVmaXggPSByZXF1aXJlKCdwcmVmaXgtc3R5bGUnKVxudmFyIHRvQ2FtZWxDYXNlID0gcmVxdWlyZSgndG8tY2FtZWwtY2FzZScpXG52YXIgY2FjaGUgPSB7ICdmbG9hdCc6ICdjc3NGbG9hdCcgfVxudmFyIGFkZFB4VG9TdHlsZSA9IHJlcXVpcmUoJ2FkZC1weC10by1zdHlsZScpXG5cbmZ1bmN0aW9uIHN0eWxlIChlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgdmFyIGNhbWVsID0gY2FjaGVbcHJvcGVydHldXG4gIGlmICh0eXBlb2YgY2FtZWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY2FtZWwgPSBkZXRlY3QocHJvcGVydHkpXG4gIH1cblxuICAvLyBtYXkgYmUgZmFsc2UgaWYgQ1NTIHByb3AgaXMgdW5zdXBwb3J0ZWRcbiAgaWYgKGNhbWVsKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW2NhbWVsXVxuICAgIH1cblxuICAgIGVsZW1lbnQuc3R5bGVbY2FtZWxdID0gYWRkUHhUb1N0eWxlKGNhbWVsLCB2YWx1ZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBlYWNoIChlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gIGZvciAodmFyIGsgaW4gcHJvcGVydGllcykge1xuICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICBzdHlsZShlbGVtZW50LCBrLCBwcm9wZXJ0aWVzW2tdKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZXRlY3QgKGNzc1Byb3ApIHtcbiAgdmFyIGNhbWVsID0gdG9DYW1lbENhc2UoY3NzUHJvcClcbiAgdmFyIHJlc3VsdCA9IHByZWZpeChjYW1lbClcbiAgY2FjaGVbY2FtZWxdID0gY2FjaGVbY3NzUHJvcF0gPSBjYWNoZVtyZXN1bHRdID0gcmVzdWx0XG4gIHJldHVybiByZXN1bHRcbn1cblxuZnVuY3Rpb24gc2V0ICgpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFyZ3VtZW50c1swXS5zdHlsZS5jc3NUZXh0ID0gYXJndW1lbnRzWzFdXG4gICAgfSBlbHNlIHtcbiAgICAgIGVhY2goYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHN0eWxlKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRcbm1vZHVsZS5leHBvcnRzLnNldCA9IHNldFxuXG5tb2R1bGUuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydGllcykge1xuICBpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0aWVzKSkge1xuICAgIHJldHVybiBwcm9wZXJ0aWVzLnJlZHVjZShmdW5jdGlvbiAob2JqLCBwcm9wKSB7XG4gICAgICBvYmpbcHJvcF0gPSBzdHlsZShlbGVtZW50LCBwcm9wIHx8ICcnKVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHlsZShlbGVtZW50LCBwcm9wZXJ0aWVzIHx8ICcnKVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVc2UgaW52YXJpYW50KCkgdG8gYXNzZXJ0IHN0YXRlIHdoaWNoIHlvdXIgcHJvZ3JhbSBhc3N1bWVzIHRvIGJlIHRydWUuXG4gKlxuICogUHJvdmlkZSBzcHJpbnRmLXN0eWxlIGZvcm1hdCAob25seSAlcyBpcyBzdXBwb3J0ZWQpIGFuZCBhcmd1bWVudHNcbiAqIHRvIHByb3ZpZGUgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBicm9rZSBhbmQgd2hhdCB5b3Ugd2VyZVxuICogZXhwZWN0aW5nLlxuICpcbiAqIFRoZSBpbnZhcmlhbnQgbWVzc2FnZSB3aWxsIGJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24sIGJ1dCB0aGUgaW52YXJpYW50XG4gKiB3aWxsIHJlbWFpbiB0byBlbnN1cmUgbG9naWMgZG9lcyBub3QgZGlmZmVyIGluIHByb2R1Y3Rpb24uXG4gKi9cblxudmFyIGludmFyaWFudCA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgK1xuICAgICAgICAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJnc1thcmdJbmRleCsrXTsgfSlcbiAgICAgICk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7XG4iLCIvKlxub2JqZWN0LWFzc2lnblxuKGMpIFNpbmRyZSBTb3JodXNcbkBsaWNlbnNlIE1JVFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFPYmplY3QuYXNzaWduKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxuXHRcdHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctd3JhcHBlcnNcblx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xuXHRcdH1cblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xuXHRcdH0pO1xuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XG5cdFx0fSk7XG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0dmFyIGZyb207XG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdHZhciBzeW1ib2xzO1xuXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XG5cdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdFx0XHRzeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjJcbihmdW5jdGlvbigpIHtcbiAgdmFyIGdldE5hbm9TZWNvbmRzLCBocnRpbWUsIGxvYWRUaW1lLCBtb2R1bGVMb2FkVGltZSwgbm9kZUxvYWRUaW1lLCB1cFRpbWU7XG5cbiAgaWYgKCh0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2UgIT09IG51bGwpICYmIHBlcmZvcm1hbmNlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfTtcbiAgfSBlbHNlIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCkgJiYgcHJvY2Vzcy5ocnRpbWUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChnZXROYW5vU2Vjb25kcygpIC0gbm9kZUxvYWRUaW1lKSAvIDFlNjtcbiAgICB9O1xuICAgIGhydGltZSA9IHByb2Nlc3MuaHJ0aW1lO1xuICAgIGdldE5hbm9TZWNvbmRzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaHI7XG4gICAgICBociA9IGhydGltZSgpO1xuICAgICAgcmV0dXJuIGhyWzBdICogMWU5ICsgaHJbMV07XG4gICAgfTtcbiAgICBtb2R1bGVMb2FkVGltZSA9IGdldE5hbm9TZWNvbmRzKCk7XG4gICAgdXBUaW1lID0gcHJvY2Vzcy51cHRpbWUoKSAqIDFlOTtcbiAgICBub2RlTG9hZFRpbWUgPSBtb2R1bGVMb2FkVGltZSAtIHVwVGltZTtcbiAgfSBlbHNlIGlmIChEYXRlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBEYXRlLm5vdygpO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2FkVGltZTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGVyZm9ybWFuY2Utbm93LmpzLm1hcFxuIiwidmFyIGRpdiA9IG51bGxcbnZhciBwcmVmaXhlcyA9IFsgJ1dlYmtpdCcsICdNb3onLCAnTycsICdtcycgXVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHByZWZpeFN0eWxlIChwcm9wKSB7XG4gIC8vIHJlLXVzZSBhIGR1bW15IGRpdlxuICBpZiAoIWRpdikge1xuICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gIH1cblxuICB2YXIgc3R5bGUgPSBkaXYuc3R5bGVcblxuICAvLyBwcm9wIGV4aXN0cyB3aXRob3V0IHByZWZpeFxuICBpZiAocHJvcCBpbiBzdHlsZSkge1xuICAgIHJldHVybiBwcm9wXG4gIH1cblxuICAvLyBib3JkZXJSYWRpdXMgLT4gQm9yZGVyUmFkaXVzXG4gIHZhciB0aXRsZUNhc2UgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKVxuXG4gIC8vIGZpbmQgdGhlIHZlbmRvci1wcmVmaXhlZCBwcm9wXG4gIGZvciAodmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIG5hbWUgPSBwcmVmaXhlc1tpXSArIHRpdGxlQ2FzZVxuICAgIC8vIGUuZy4gV2Via2l0Qm9yZGVyUmFkaXVzIG9yIHdlYmtpdEJvcmRlclJhZGl1c1xuICAgIGlmIChuYW1lIGluIHN0eWxlKSB7XG4gICAgICByZXR1cm4gbmFtZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBwcmludFdhcm5pbmcgPSBmdW5jdGlvbigpIHt9O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSByZXF1aXJlKCcuL2xpYi9SZWFjdFByb3BUeXBlc1NlY3JldCcpO1xuICB2YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307XG4gIHZhciBoYXMgPSByZXF1aXJlKCcuL2xpYi9oYXMnKTtcblxuICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIHRleHQ7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS1cbiAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFja1xuICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfSBjYXRjaCAoeCkgeyAvKiovIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhhdCB0aGUgdmFsdWVzIG1hdGNoIHdpdGggdGhlIHR5cGUgc3BlY3MuXG4gKiBFcnJvciBtZXNzYWdlcyBhcmUgbWVtb3JpemVkIGFuZCB3aWxsIG9ubHkgYmUgc2hvd24gb25jZS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gdHlwZVNwZWNzIE1hcCBvZiBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZVxuICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcyBSdW50aW1lIHZhbHVlcyB0aGF0IG5lZWQgdG8gYmUgdHlwZS1jaGVja2VkXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gZS5nLiBcInByb3BcIiwgXCJjb250ZXh0XCIsIFwiY2hpbGQgY29udGV4dFwiXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuICogQHBhcmFtIHs/RnVuY3Rpb259IGdldFN0YWNrIFJldHVybnMgdGhlIGNvbXBvbmVudCBzdGFjay5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNoZWNrUHJvcFR5cGVzKHR5cGVTcGVjcywgdmFsdWVzLCBsb2NhdGlvbiwgY29tcG9uZW50TmFtZSwgZ2V0U3RhY2spIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBmb3IgKHZhciB0eXBlU3BlY05hbWUgaW4gdHlwZVNwZWNzKSB7XG4gICAgICBpZiAoaGFzKHR5cGVTcGVjcywgdHlwZVNwZWNOYW1lKSkge1xuICAgICAgICB2YXIgZXJyb3I7XG4gICAgICAgIC8vIFByb3AgdHlwZSB2YWxpZGF0aW9uIG1heSB0aHJvdy4gSW4gY2FzZSB0aGV5IGRvLCB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAgIC8vIGZhaWwgdGhlIHJlbmRlciBwaGFzZSB3aGVyZSBpdCBkaWRuJ3QgZmFpbCBiZWZvcmUuIFNvIHdlIGxvZyBpdC5cbiAgICAgICAgLy8gQWZ0ZXIgdGhlc2UgaGF2ZSBiZWVuIGNsZWFuZWQgdXAsIHdlJ2xsIGxldCB0aGVtIHRocm93LlxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBhbiBpbnZhcmlhbnQgdGhhdCBnZXRzIGNhdWdodC4gSXQncyB0aGUgc2FtZVxuICAgICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbiAgICAgICAgICBpZiAodHlwZW9mIHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gRXJyb3IoXG4gICAgICAgICAgICAgIChjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycpICsgJzogJyArIGxvY2F0aW9uICsgJyB0eXBlIGAnICsgdHlwZVNwZWNOYW1lICsgJ2AgaXMgaW52YWxpZDsgJyArXG4gICAgICAgICAgICAgICdpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UsIGJ1dCByZWNlaXZlZCBgJyArIHR5cGVvZiB0eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSArICdgLicgK1xuICAgICAgICAgICAgICAnVGhpcyBvZnRlbiBoYXBwZW5zIGJlY2F1c2Ugb2YgdHlwb3Mgc3VjaCBhcyBgUHJvcFR5cGVzLmZ1bmN0aW9uYCBpbnN0ZWFkIG9mIGBQcm9wVHlwZXMuZnVuY2AuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGVyci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlcnJvciA9IHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdKHZhbHVlcywgdHlwZVNwZWNOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIGVycm9yID0gZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yICYmICEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICBwcmludFdhcm5pbmcoXG4gICAgICAgICAgICAoY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnKSArICc6IHR5cGUgc3BlY2lmaWNhdGlvbiBvZiAnICtcbiAgICAgICAgICAgIGxvY2F0aW9uICsgJyBgJyArIHR5cGVTcGVjTmFtZSArICdgIGlzIGludmFsaWQ7IHRoZSB0eXBlIGNoZWNrZXIgJyArXG4gICAgICAgICAgICAnZnVuY3Rpb24gbXVzdCByZXR1cm4gYG51bGxgIG9yIGFuIGBFcnJvcmAgYnV0IHJldHVybmVkIGEgJyArIHR5cGVvZiBlcnJvciArICcuICcgK1xuICAgICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgdHlwZSBjaGVja2VyICcgK1xuICAgICAgICAgICAgJ2NyZWF0b3IgKGFycmF5T2YsIGluc3RhbmNlT2YsIG9iamVjdE9mLCBvbmVPZiwgb25lT2ZUeXBlLCBhbmQgJyArXG4gICAgICAgICAgICAnc2hhcGUgYWxsIHJlcXVpcmUgYW4gYXJndW1lbnQpLidcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICEoZXJyb3IubWVzc2FnZSBpbiBsb2dnZWRUeXBlRmFpbHVyZXMpKSB7XG4gICAgICAgICAgLy8gT25seSBtb25pdG9yIHRoaXMgZmFpbHVyZSBvbmNlIGJlY2F1c2UgdGhlcmUgdGVuZHMgdG8gYmUgYSBsb3Qgb2YgdGhlXG4gICAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgICBsb2dnZWRUeXBlRmFpbHVyZXNbZXJyb3IubWVzc2FnZV0gPSB0cnVlO1xuXG4gICAgICAgICAgdmFyIHN0YWNrID0gZ2V0U3RhY2sgPyBnZXRTdGFjaygpIDogJyc7XG5cbiAgICAgICAgICBwcmludFdhcm5pbmcoXG4gICAgICAgICAgICAnRmFpbGVkICcgKyBsb2NhdGlvbiArICcgdHlwZTogJyArIGVycm9yLm1lc3NhZ2UgKyAoc3RhY2sgIT0gbnVsbCA/IHN0YWNrIDogJycpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlc2V0cyB3YXJuaW5nIGNhY2hlIHdoZW4gdGVzdGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5jaGVja1Byb3BUeXBlcy5yZXNldFdhcm5pbmdDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGxvZ2dlZFR5cGVGYWlsdXJlcyA9IHt9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hlY2tQcm9wVHlwZXM7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0SXMgPSByZXF1aXJlKCdyZWFjdC1pcycpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcbnZhciBoYXMgPSByZXF1aXJlKCcuL2xpYi9oYXMnKTtcbnZhciBjaGVja1Byb3BUeXBlcyA9IHJlcXVpcmUoJy4vY2hlY2tQcm9wVHlwZXMnKTtcblxudmFyIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKCkge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHByaW50V2FybmluZyA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgdGV4dDtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4gICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9IGNhdGNoICh4KSB7fVxuICB9O1xufVxuXG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpc1ZhbGlkRWxlbWVudCwgdGhyb3dPbkRpcmVjdEFjY2Vzcykge1xuICAvKiBnbG9iYWwgU3ltYm9sICovXG4gIHZhciBJVEVSQVRPUl9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvcjtcbiAgdmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGl0ZXJhdG9yIG1ldGhvZCBmdW5jdGlvbiBjb250YWluZWQgb24gdGhlIGl0ZXJhYmxlIG9iamVjdC5cbiAgICpcbiAgICogQmUgc3VyZSB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGl0ZXJhYmxlIGFzIGNvbnRleHQ6XG4gICAqXG4gICAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7XG4gICAqICAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgKiAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobXlJdGVyYWJsZSk7XG4gICAqICAgICAgIC4uLlxuICAgKiAgICAgfVxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGVcbiAgICogQHJldHVybiB7P2Z1bmN0aW9ufVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7XG4gICAgdmFyIGl0ZXJhdG9yRm4gPSBtYXliZUl0ZXJhYmxlICYmIChJVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtJVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTtcbiAgICBpZiAodHlwZW9mIGl0ZXJhdG9yRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBpdGVyYXRvckZuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsZWN0aW9uIG9mIG1ldGhvZHMgdGhhdCBhbGxvdyBkZWNsYXJhdGlvbiBhbmQgdmFsaWRhdGlvbiBvZiBwcm9wcyB0aGF0IGFyZVxuICAgKiBzdXBwbGllZCB0byBSZWFjdCBjb21wb25lbnRzLiBFeGFtcGxlIHVzYWdlOlxuICAgKlxuICAgKiAgIHZhciBQcm9wcyA9IHJlcXVpcmUoJ1JlYWN0UHJvcFR5cGVzJyk7XG4gICAqICAgdmFyIE15QXJ0aWNsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICogICAgIHByb3BUeXBlczoge1xuICAgKiAgICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgcHJvcCBuYW1lZCBcImRlc2NyaXB0aW9uXCIuXG4gICAqICAgICAgIGRlc2NyaXB0aW9uOiBQcm9wcy5zdHJpbmcsXG4gICAqXG4gICAqICAgICAgIC8vIEEgcmVxdWlyZWQgZW51bSBwcm9wIG5hbWVkIFwiY2F0ZWdvcnlcIi5cbiAgICogICAgICAgY2F0ZWdvcnk6IFByb3BzLm9uZU9mKFsnTmV3cycsJ1Bob3RvcyddKS5pc1JlcXVpcmVkLFxuICAgKlxuICAgKiAgICAgICAvLyBBIHByb3AgbmFtZWQgXCJkaWFsb2dcIiB0aGF0IHJlcXVpcmVzIGFuIGluc3RhbmNlIG9mIERpYWxvZy5cbiAgICogICAgICAgZGlhbG9nOiBQcm9wcy5pbnN0YW5jZU9mKERpYWxvZykuaXNSZXF1aXJlZFxuICAgKiAgICAgfSxcbiAgICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7IC4uLiB9XG4gICAqICAgfSk7XG4gICAqXG4gICAqIEEgbW9yZSBmb3JtYWwgc3BlY2lmaWNhdGlvbiBvZiBob3cgdGhlc2UgbWV0aG9kcyBhcmUgdXNlZDpcbiAgICpcbiAgICogICB0eXBlIDo9IGFycmF5fGJvb2x8ZnVuY3xvYmplY3R8bnVtYmVyfHN0cmluZ3xvbmVPZihbLi4uXSl8aW5zdGFuY2VPZiguLi4pXG4gICAqICAgZGVjbCA6PSBSZWFjdFByb3BUeXBlcy57dHlwZX0oLmlzUmVxdWlyZWQpP1xuICAgKlxuICAgKiBFYWNoIGFuZCBldmVyeSBkZWNsYXJhdGlvbiBwcm9kdWNlcyBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgc2lnbmF0dXJlLiBUaGlzXG4gICAqIGFsbG93cyB0aGUgY3JlYXRpb24gb2YgY3VzdG9tIHZhbGlkYXRpb24gZnVuY3Rpb25zLiBGb3IgZXhhbXBsZTpcbiAgICpcbiAgICogIHZhciBNeUxpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAqICAgIHByb3BUeXBlczoge1xuICAgKiAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBvciBVUkkgcHJvcCBuYW1lZCBcImhyZWZcIi5cbiAgICogICAgICBocmVmOiBmdW5jdGlvbihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAgICogICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAqICAgICAgICBpZiAocHJvcFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHByb3BWYWx1ZSAhPT0gJ3N0cmluZycgJiZcbiAgICogICAgICAgICAgICAhKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFVSSSkpIHtcbiAgICogICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcbiAgICogICAgICAgICAgICAnRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYW4gVVJJIGZvciAnICsgcHJvcE5hbWUgKyAnIGluICcgK1xuICAgKiAgICAgICAgICAgIGNvbXBvbmVudE5hbWVcbiAgICogICAgICAgICAgKTtcbiAgICogICAgICAgIH1cbiAgICogICAgICB9XG4gICAqICAgIH0sXG4gICAqICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7Li4ufVxuICAgKiAgfSk7XG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICB2YXIgQU5PTllNT1VTID0gJzw8YW5vbnltb3VzPj4nO1xuXG4gIC8vIEltcG9ydGFudCFcbiAgLy8gS2VlcCB0aGlzIGxpc3QgaW4gc3luYyB3aXRoIHByb2R1Y3Rpb24gdmVyc2lvbiBpbiBgLi9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanNgLlxuICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7XG4gICAgYXJyYXk6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdhcnJheScpLFxuICAgIGJpZ2ludDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2JpZ2ludCcpLFxuICAgIGJvb2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdib29sZWFuJyksXG4gICAgZnVuYzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Z1bmN0aW9uJyksXG4gICAgbnVtYmVyOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignbnVtYmVyJyksXG4gICAgb2JqZWN0OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignb2JqZWN0JyksXG4gICAgc3RyaW5nOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3RyaW5nJyksXG4gICAgc3ltYm9sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3ltYm9sJyksXG5cbiAgICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksXG4gICAgYXJyYXlPZjogY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyLFxuICAgIGVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpLFxuICAgIGVsZW1lbnRUeXBlOiBjcmVhdGVFbGVtZW50VHlwZVR5cGVDaGVja2VyKCksXG4gICAgaW5zdGFuY2VPZjogY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcixcbiAgICBub2RlOiBjcmVhdGVOb2RlQ2hlY2tlcigpLFxuICAgIG9iamVjdE9mOiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyLFxuICAgIG9uZU9mOiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIsXG4gICAgb25lT2ZUeXBlOiBjcmVhdGVVbmlvblR5cGVDaGVja2VyLFxuICAgIHNoYXBlOiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyLFxuICAgIGV4YWN0OiBjcmVhdGVTdHJpY3RTaGFwZVR5cGVDaGVja2VyLFxuICB9O1xuXG4gIC8qKlxuICAgKiBpbmxpbmVkIE9iamVjdC5pcyBwb2x5ZmlsbCB0byBhdm9pZCByZXF1aXJpbmcgY29uc3VtZXJzIHNoaXAgdGhlaXIgb3duXG4gICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgKi9cbiAgLyplc2xpbnQtZGlzYWJsZSBuby1zZWxmLWNvbXBhcmUqL1xuICBmdW5jdGlvbiBpcyh4LCB5KSB7XG4gICAgLy8gU2FtZVZhbHVlIGFsZ29yaXRobVxuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAvLyBTdGVwcyAxLTUsIDctMTBcbiAgICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG4gICAgICByZXR1cm4geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgICByZXR1cm4geCAhPT0geCAmJiB5ICE9PSB5O1xuICAgIH1cbiAgfVxuICAvKmVzbGludC1lbmFibGUgbm8tc2VsZi1jb21wYXJlKi9cblxuICAvKipcbiAgICogV2UgdXNlIGFuIEVycm9yLWxpa2Ugb2JqZWN0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGFzIHBlb3BsZSBtYXkgY2FsbFxuICAgKiBQcm9wVHlwZXMgZGlyZWN0bHkgYW5kIGluc3BlY3QgdGhlaXIgb3V0cHV0LiBIb3dldmVyLCB3ZSBkb24ndCB1c2UgcmVhbFxuICAgKiBFcnJvcnMgYW55bW9yZS4gV2UgZG9uJ3QgaW5zcGVjdCB0aGVpciBzdGFjayBhbnl3YXksIGFuZCBjcmVhdGluZyB0aGVtXG4gICAqIGlzIHByb2hpYml0aXZlbHkgZXhwZW5zaXZlIGlmIHRoZXkgYXJlIGNyZWF0ZWQgdG9vIG9mdGVuLCBzdWNoIGFzIHdoYXRcbiAgICogaGFwcGVucyBpbiBvbmVPZlR5cGUoKSBmb3IgYW55IHR5cGUgYmVmb3JlIHRoZSBvbmUgdGhhdCBtYXRjaGVkLlxuICAgKi9cbiAgZnVuY3Rpb24gUHJvcFR5cGVFcnJvcihtZXNzYWdlLCBkYXRhKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyA/IGRhdGE6IHt9O1xuICAgIHRoaXMuc3RhY2sgPSAnJztcbiAgfVxuICAvLyBNYWtlIGBpbnN0YW5jZW9mIEVycm9yYCBzdGlsbCB3b3JrIGZvciByZXR1cm5lZCBlcnJvcnMuXG4gIFByb3BUeXBlRXJyb3IucHJvdG90eXBlID0gRXJyb3IucHJvdG90eXBlO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBtYW51YWxQcm9wVHlwZUNhbGxDYWNoZSA9IHt9O1xuICAgICAgdmFyIG1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50ID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tUeXBlKGlzUmVxdWlyZWQsIHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgICBjb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZSB8fCBBTk9OWU1PVVM7XG4gICAgICBwcm9wRnVsbE5hbWUgPSBwcm9wRnVsbE5hbWUgfHwgcHJvcE5hbWU7XG5cbiAgICAgIGlmIChzZWNyZXQgIT09IFJlYWN0UHJvcFR5cGVzU2VjcmV0KSB7XG4gICAgICAgIGlmICh0aHJvd09uRGlyZWN0QWNjZXNzKSB7XG4gICAgICAgICAgLy8gTmV3IGJlaGF2aW9yIG9ubHkgZm9yIHVzZXJzIG9mIGBwcm9wLXR5cGVzYCBwYWNrYWdlXG4gICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICtcbiAgICAgICAgICAgICdVc2UgYFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpYCB0byBjYWxsIHRoZW0uICcgK1xuICAgICAgICAgICAgJ1JlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBlcnIubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAvLyBPbGQgYmVoYXZpb3IgZm9yIHBlb3BsZSB1c2luZyBSZWFjdC5Qcm9wVHlwZXNcbiAgICAgICAgICB2YXIgY2FjaGVLZXkgPSBjb21wb25lbnROYW1lICsgJzonICsgcHJvcE5hbWU7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgIW1hbnVhbFByb3BUeXBlQ2FsbENhY2hlW2NhY2hlS2V5XSAmJlxuICAgICAgICAgICAgLy8gQXZvaWQgc3BhbW1pbmcgdGhlIGNvbnNvbGUgYmVjYXVzZSB0aGV5IGFyZSBvZnRlbiBub3QgYWN0aW9uYWJsZSBleGNlcHQgZm9yIGxpYiBhdXRob3JzXG4gICAgICAgICAgICBtYW51YWxQcm9wVHlwZVdhcm5pbmdDb3VudCA8IDNcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHByaW50V2FybmluZyhcbiAgICAgICAgICAgICAgJ1lvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBhIFJlYWN0LlByb3BUeXBlcyB2YWxpZGF0aW9uICcgK1xuICAgICAgICAgICAgICAnZnVuY3Rpb24gZm9yIHRoZSBgJyArIHByb3BGdWxsTmFtZSArICdgIHByb3Agb24gYCcgKyBjb21wb25lbnROYW1lICsgJ2AuIFRoaXMgaXMgZGVwcmVjYXRlZCAnICtcbiAgICAgICAgICAgICAgJ2FuZCB3aWxsIHRocm93IGluIHRoZSBzdGFuZGFsb25lIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICtcbiAgICAgICAgICAgICAgJ1lvdSBtYXkgYmUgc2VlaW5nIHRoaXMgd2FybmluZyBkdWUgdG8gYSB0aGlyZC1wYXJ0eSBQcm9wVHlwZXMgJyArXG4gICAgICAgICAgICAgICdsaWJyYXJ5LiBTZWUgaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLWRvbnQtY2FsbC1wcm9wdHlwZXMgJyArICdmb3IgZGV0YWlscy4nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldID0gdHJ1ZTtcbiAgICAgICAgICAgIG1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2AgaXMgbWFya2VkIGFzIHJlcXVpcmVkICcgKyAoJ2luIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBidXQgaXRzIHZhbHVlIGlzIGBudWxsYC4nKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignVGhlICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBpcyBtYXJrZWQgYXMgcmVxdWlyZWQgaW4gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGJ1dCBpdHMgdmFsdWUgaXMgYHVuZGVmaW5lZGAuJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNoYWluZWRDaGVja1R5cGUgPSBjaGVja1R5cGUuYmluZChudWxsLCBmYWxzZSk7XG4gICAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gY2hhaW5lZENoZWNrVHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKGV4cGVjdGVkVHlwZSkge1xuICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7XG4gICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICAgIGlmIChwcm9wVHlwZSAhPT0gZXhwZWN0ZWRUeXBlKSB7XG4gICAgICAgIC8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0J1xuICAgICAgICAvLyBjaGVjaywgYnV0IHdlIGNhbiBvZmZlciBhIG1vcmUgcHJlY2lzZSBlcnJvciBtZXNzYWdlIGhlcmUgcmF0aGVyIHRoYW5cbiAgICAgICAgLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxuICAgICAgICB2YXIgcHJlY2lzZVR5cGUgPSBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcihcbiAgICAgICAgICAnSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByZWNpc2VUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdgJyArIGV4cGVjdGVkVHlwZSArICdgLicpLFxuICAgICAgICAgIHtleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZX1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGwpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7XG4gICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIHR5cGVDaGVja2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiBjb21wb25lbnQgYCcgKyBjb21wb25lbnROYW1lICsgJ2AgaGFzIGludmFsaWQgUHJvcFR5cGUgbm90YXRpb24gaW5zaWRlIGFycmF5T2YuJyk7XG4gICAgICB9XG4gICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJywgUmVhY3RQcm9wVHlwZXNTZWNyZXQpO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSB7XG4gICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7XG4gICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudC4nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlVHlwZUNoZWNrZXIoKSB7XG4gICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgICAgaWYgKCFSZWFjdElzLmlzVmFsaWRFbGVtZW50VHlwZShwcm9wVmFsdWUpKSB7XG4gICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudCB0eXBlLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcihleHBlY3RlZENsYXNzKSB7XG4gICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgICBpZiAoIShwcm9wc1twcm9wTmFtZV0gaW5zdGFuY2VvZiBleHBlY3RlZENsYXNzKSkge1xuICAgICAgICB2YXIgZXhwZWN0ZWRDbGFzc05hbWUgPSBleHBlY3RlZENsYXNzLm5hbWUgfHwgQU5PTllNT1VTO1xuICAgICAgICB2YXIgYWN0dWFsQ2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKHByb3BzW3Byb3BOYW1lXSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIGFjdHVhbENsYXNzTmFtZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnaW5zdGFuY2Ugb2YgYCcgKyBleHBlY3RlZENsYXNzTmFtZSArICdgLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlRW51bVR5cGVDaGVja2VyKGV4cGVjdGVkVmFsdWVzKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVmFsdWVzKSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcHJpbnRXYXJuaW5nKFxuICAgICAgICAgICAgJ0ludmFsaWQgYXJndW1lbnRzIHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheSwgZ290ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBhcmd1bWVudHMuICcgK1xuICAgICAgICAgICAgJ0EgY29tbW9uIG1pc3Rha2UgaXMgdG8gd3JpdGUgb25lT2YoeCwgeSwgeikgaW5zdGVhZCBvZiBvbmVPZihbeCwgeSwgel0pLidcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZiwgZXhwZWN0ZWQgYW4gYXJyYXkuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzKHByb3BWYWx1ZSwgZXhwZWN0ZWRWYWx1ZXNbaV0pKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHZhbHVlc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGV4cGVjdGVkVmFsdWVzLCBmdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciB0eXBlID0gZ2V0UHJlY2lzZVR5cGUodmFsdWUpO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3N5bWJvbCcpIHtcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdmFsdWUgYCcgKyBTdHJpbmcocHJvcFZhbHVlKSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBvbmUgb2YgJyArIHZhbHVlc1N0cmluZyArICcuJykpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgICAgaWYgKHR5cGVvZiB0eXBlQ2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1Byb3BlcnR5IGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgY29tcG9uZW50IGAnICsgY29tcG9uZW50TmFtZSArICdgIGhhcyBpbnZhbGlkIFByb3BUeXBlIG5vdGF0aW9uIGluc2lkZSBvYmplY3RPZi4nKTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBvYmplY3QuJykpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIga2V5IGluIHByb3BWYWx1ZSkge1xuICAgICAgICBpZiAoaGFzKHByb3BWYWx1ZSwga2V5KSkge1xuICAgICAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7XG4gICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5T2ZUeXBlQ2hlY2tlcnMpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gcHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJykgOiB2b2lkIDA7XG4gICAgICByZXR1cm4gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5T2ZUeXBlQ2hlY2tlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgY2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcmludFdhcm5pbmcoXG4gICAgICAgICAgJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2ZUeXBlLiBFeHBlY3RlZCBhbiBhcnJheSBvZiBjaGVjayBmdW5jdGlvbnMsIGJ1dCAnICtcbiAgICAgICAgICAncmVjZWl2ZWQgJyArIGdldFBvc3RmaXhGb3JUeXBlV2FybmluZyhjaGVja2VyKSArICcgYXQgaW5kZXggJyArIGkgKyAnLidcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTtcbiAgICAgICAgdmFyIGNoZWNrZXJSZXN1bHQgPSBjaGVja2VyKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpO1xuICAgICAgICBpZiAoY2hlY2tlclJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoZWNrZXJSZXN1bHQuZGF0YSAmJiBoYXMoY2hlY2tlclJlc3VsdC5kYXRhLCAnZXhwZWN0ZWRUeXBlJykpIHtcbiAgICAgICAgICBleHBlY3RlZFR5cGVzLnB1c2goY2hlY2tlclJlc3VsdC5kYXRhLmV4cGVjdGVkVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBleHBlY3RlZFR5cGVzTWVzc2FnZSA9IChleHBlY3RlZFR5cGVzLmxlbmd0aCA+IDApID8gJywgZXhwZWN0ZWQgb25lIG9mIHR5cGUgWycgKyBleHBlY3RlZFR5cGVzLmpvaW4oJywgJykgKyAnXSc6ICcnO1xuICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCcgKyBleHBlY3RlZFR5cGVzTWVzc2FnZSArICcuJykpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKSB7XG4gICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgICBpZiAoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgUmVhY3ROb2RlLicpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFZhbGlkYXRvckVycm9yKGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIGtleSwgdHlwZSkge1xuICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcihcbiAgICAgIChjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycpICsgJzogJyArIGxvY2F0aW9uICsgJyB0eXBlIGAnICsgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5ICsgJ2AgaXMgaW52YWxpZDsgJyArXG4gICAgICAnaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5IGZyb20gdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLCBidXQgcmVjZWl2ZWQgYCcgKyB0eXBlICsgJ2AuJ1xuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpIHtcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc2hhcGVUeXBlcykge1xuICAgICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGVja2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIGludmFsaWRWYWxpZGF0b3JFcnJvcihjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCBrZXksIGdldFByZWNpc2VUeXBlKGNoZWNrZXIpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVTdHJpY3RTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpIHtcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7XG4gICAgICB9XG4gICAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGFsbCBrZXlzIGluIGNhc2Ugc29tZSBhcmUgcmVxdWlyZWQgYnV0IG1pc3NpbmcgZnJvbSBwcm9wcy5cbiAgICAgIHZhciBhbGxLZXlzID0gYXNzaWduKHt9LCBwcm9wc1twcm9wTmFtZV0sIHNoYXBlVHlwZXMpO1xuICAgICAgZm9yICh2YXIga2V5IGluIGFsbEtleXMpIHtcbiAgICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07XG4gICAgICAgIGlmIChoYXMoc2hhcGVUeXBlcywga2V5KSAmJiB0eXBlb2YgY2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBpbnZhbGlkVmFsaWRhdG9yRXJyb3IoY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwga2V5LCBnZXRQcmVjaXNlVHlwZShjaGVja2VyKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjaGVja2VyKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKFxuICAgICAgICAgICAgJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIGtleSBgJyArIGtleSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLicgK1xuICAgICAgICAgICAgJ1xcbkJhZCBvYmplY3Q6ICcgKyBKU09OLnN0cmluZ2lmeShwcm9wc1twcm9wTmFtZV0sIG51bGwsICcgICcpICtcbiAgICAgICAgICAgICdcXG5WYWxpZCBrZXlzOiAnICsgSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmtleXMoc2hhcGVUeXBlcyksIG51bGwsICcgICcpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBwcm9wVmFsdWUpIHtcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgcmV0dXJuICFwcm9wVmFsdWU7XG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BWYWx1ZS5ldmVyeShpc05vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wVmFsdWUgPT09IG51bGwgfHwgaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKHByb3BWYWx1ZSk7XG4gICAgICAgIGlmIChpdGVyYXRvckZuKSB7XG4gICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7XG4gICAgICAgICAgdmFyIHN0ZXA7XG4gICAgICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IHByb3BWYWx1ZS5lbnRyaWVzKSB7XG4gICAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICAgIGlmICghaXNOb2RlKHN0ZXAudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxuICAgICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlO1xuICAgICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTm9kZShlbnRyeVsxXSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNTeW1ib2wocHJvcFR5cGUsIHByb3BWYWx1ZSkge1xuICAgIC8vIE5hdGl2ZSBTeW1ib2wuXG4gICAgaWYgKHByb3BUeXBlID09PSAnc3ltYm9sJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gZmFsc3kgdmFsdWUgY2FuJ3QgYmUgYSBTeW1ib2xcbiAgICBpZiAoIXByb3BWYWx1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10gPT09ICdTeW1ib2wnXG4gICAgaWYgKHByb3BWYWx1ZVsnQEB0b1N0cmluZ1RhZyddID09PSAnU3ltYm9sJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgZm9yIG5vbi1zcGVjIGNvbXBsaWFudCBTeW1ib2xzIHdoaWNoIGFyZSBwb2x5ZmlsbGVkLlxuICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHByb3BWYWx1ZSBpbnN0YW5jZW9mIFN5bWJvbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuICBmdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpIHtcbiAgICB2YXIgcHJvcFR5cGUgPSB0eXBlb2YgcHJvcFZhbHVlO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICAgIHJldHVybiAnYXJyYXknO1xuICAgIH1cbiAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuXG4gICAgICAvLyAnb2JqZWN0JyBmb3IgdHlwZW9mIGEgUmVnRXhwLiBXZSdsbCBub3JtYWxpemUgdGhpcyBoZXJlIHNvIHRoYXQgL2JsYS9cbiAgICAgIC8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LlxuICAgICAgcmV0dXJuICdvYmplY3QnO1xuICAgIH1cbiAgICBpZiAoaXNTeW1ib2wocHJvcFR5cGUsIHByb3BWYWx1ZSkpIHtcbiAgICAgIHJldHVybiAnc3ltYm9sJztcbiAgICB9XG4gICAgcmV0dXJuIHByb3BUeXBlO1xuICB9XG5cbiAgLy8gVGhpcyBoYW5kbGVzIG1vcmUgdHlwZXMgdGhhbiBgZ2V0UHJvcFR5cGVgLiBPbmx5IHVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuICAvLyBTZWUgYGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyYC5cbiAgZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHByb3BWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnICsgcHJvcFZhbHVlO1xuICAgIH1cbiAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIHJldHVybiAnZGF0ZSc7XG4gICAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICByZXR1cm4gJ3JlZ2V4cCc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wVHlwZTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBzdHJpbmcgdGhhdCBpcyBwb3N0Zml4ZWQgdG8gYSB3YXJuaW5nIGFib3V0IGFuIGludmFsaWQgdHlwZS5cbiAgLy8gRm9yIGV4YW1wbGUsIFwidW5kZWZpbmVkXCIgb3IgXCJvZiB0eXBlIGFycmF5XCJcbiAgZnVuY3Rpb24gZ2V0UG9zdGZpeEZvclR5cGVXYXJuaW5nKHZhbHVlKSB7XG4gICAgdmFyIHR5cGUgPSBnZXRQcmVjaXNlVHlwZSh2YWx1ZSk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdhcnJheSc6XG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICByZXR1cm4gJ2FuICcgKyB0eXBlO1xuICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgIGNhc2UgJ3JlZ2V4cCc6XG4gICAgICAgIHJldHVybiAnYSAnICsgdHlwZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG4gIGZ1bmN0aW9uIGdldENsYXNzTmFtZShwcm9wVmFsdWUpIHtcbiAgICBpZiAoIXByb3BWYWx1ZS5jb25zdHJ1Y3RvciB8fCAhcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpIHtcbiAgICAgIHJldHVybiBBTk9OWU1PVVM7XG4gICAgfVxuICAgIHJldHVybiBwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZTtcbiAgfVxuXG4gIFJlYWN0UHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzID0gY2hlY2tQcm9wVHlwZXM7XG4gIFJlYWN0UHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlID0gY2hlY2tQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGU7XG4gIFJlYWN0UHJvcFR5cGVzLlByb3BUeXBlcyA9IFJlYWN0UHJvcFR5cGVzO1xuXG4gIHJldHVybiBSZWFjdFByb3BUeXBlcztcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBSZWFjdElzID0gcmVxdWlyZSgncmVhY3QtaXMnKTtcblxuICAvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBkZXZlbG9wbWVudCBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICB2YXIgdGhyb3dPbkRpcmVjdEFjY2VzcyA9IHRydWU7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9mYWN0b3J5V2l0aFR5cGVDaGVja2VycycpKFJlYWN0SXMuaXNFbGVtZW50LCB0aHJvd09uRGlyZWN0QWNjZXNzKTtcbn0gZWxzZSB7XG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IHByb2R1Y3Rpb24gYmVoYXZpb3IuXG4gIC8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2RcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcycpKCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDtcbiIsIm1vZHVsZS5leHBvcnRzID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO1xuIiwidmFyIG5vdyA9IHJlcXVpcmUoJ3BlcmZvcm1hbmNlLW5vdycpXG4gICwgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93XG4gICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG4gICwgc3VmZml4ID0gJ0FuaW1hdGlvbkZyYW1lJ1xuICAsIHJhZiA9IHJvb3RbJ3JlcXVlc3QnICsgc3VmZml4XVxuICAsIGNhZiA9IHJvb3RbJ2NhbmNlbCcgKyBzdWZmaXhdIHx8IHJvb3RbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXG5mb3IodmFyIGkgPSAwOyAhcmFmICYmIGkgPCB2ZW5kb3JzLmxlbmd0aDsgaSsrKSB7XG4gIHJhZiA9IHJvb3RbdmVuZG9yc1tpXSArICdSZXF1ZXN0JyArIHN1ZmZpeF1cbiAgY2FmID0gcm9vdFt2ZW5kb3JzW2ldICsgJ0NhbmNlbCcgKyBzdWZmaXhdXG4gICAgICB8fCByb290W3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG59XG5cbi8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgaGF2ZSByQUYgYnV0IG5vdCBjQUZcbmlmKCFyYWYgfHwgIWNhZikge1xuICB2YXIgbGFzdCA9IDBcbiAgICAsIGlkID0gMFxuICAgICwgcXVldWUgPSBbXVxuICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXG4gIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgX25vdyA9IG5vdygpXG4gICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gY2FsbGJhY2tzIGZyb20gYXBwZW5kaW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICBjcFtpXS5jYWxsYmFjayhsYXN0KVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGgucm91bmQobmV4dCkpXG4gICAgfVxuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgaGFuZGxlOiArK2lkLFxuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuICAgIH0pXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHF1ZXVlW2ldLmhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcbiAgLy8gYGNhbmNlbGAgcG90ZW50aWFsbHkgYmVpbmcgYXNzaWduZWRcbiAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cbiAgcmV0dXJuIHJhZi5jYWxsKHJvb3QsIGZuKVxufVxubW9kdWxlLmV4cG9ydHMuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gIGNhZi5hcHBseShyb290LCBhcmd1bWVudHMpXG59XG5tb2R1bGUuZXhwb3J0cy5wb2x5ZmlsbCA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICBpZiAoIW9iamVjdCkge1xuICAgIG9iamVjdCA9IHJvb3Q7XG4gIH1cbiAgb2JqZWN0LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHJhZlxuICBvYmplY3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBjYWZcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzLnJlbmRlclZpZXdEZWZhdWx0ID0gcmVuZGVyVmlld0RlZmF1bHQ7XG5leHBvcnRzLnJlbmRlclRyYWNrSG9yaXpvbnRhbERlZmF1bHQgPSByZW5kZXJUcmFja0hvcml6b250YWxEZWZhdWx0O1xuZXhwb3J0cy5yZW5kZXJUcmFja1ZlcnRpY2FsRGVmYXVsdCA9IHJlbmRlclRyYWNrVmVydGljYWxEZWZhdWx0O1xuZXhwb3J0cy5yZW5kZXJUaHVtYkhvcml6b250YWxEZWZhdWx0ID0gcmVuZGVyVGh1bWJIb3Jpem9udGFsRGVmYXVsdDtcbmV4cG9ydHMucmVuZGVyVGh1bWJWZXJ0aWNhbERlZmF1bHQgPSByZW5kZXJUaHVtYlZlcnRpY2FsRGVmYXVsdDtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG5cbmZ1bmN0aW9uIHJlbmRlclZpZXdEZWZhdWx0KHByb3BzKSB7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHByb3BzKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVHJhY2tIb3Jpem9udGFsRGVmYXVsdChfcmVmKSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZi5zdHlsZSxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWydzdHlsZSddKTtcblxuICAgIHZhciBmaW5hbFN0eWxlID0gX2V4dGVuZHMoe30sIHN0eWxlLCB7XG4gICAgICAgIHJpZ2h0OiAyLFxuICAgICAgICBib3R0b206IDIsXG4gICAgICAgIGxlZnQ6IDIsXG4gICAgICAgIGJvcmRlclJhZGl1czogM1xuICAgIH0pO1xuICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCBfZXh0ZW5kcyh7IHN0eWxlOiBmaW5hbFN0eWxlIH0sIHByb3BzKSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRyYWNrVmVydGljYWxEZWZhdWx0KF9yZWYyKSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZjIuc3R5bGUsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYyLCBbJ3N0eWxlJ10pO1xuXG4gICAgdmFyIGZpbmFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgcmlnaHQ6IDIsXG4gICAgICAgIGJvdHRvbTogMixcbiAgICAgICAgdG9wOiAyLFxuICAgICAgICBib3JkZXJSYWRpdXM6IDNcbiAgICB9KTtcbiAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgX2V4dGVuZHMoeyBzdHlsZTogZmluYWxTdHlsZSB9LCBwcm9wcykpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUaHVtYkhvcml6b250YWxEZWZhdWx0KF9yZWYzKSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZjMuc3R5bGUsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYzLCBbJ3N0eWxlJ10pO1xuXG4gICAgdmFyIGZpbmFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGJvcmRlclJhZGl1czogJ2luaGVyaXQnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsMCwwLC4yKSdcbiAgICB9KTtcbiAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgX2V4dGVuZHMoeyBzdHlsZTogZmluYWxTdHlsZSB9LCBwcm9wcykpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUaHVtYlZlcnRpY2FsRGVmYXVsdChfcmVmNCkge1xuICAgIHZhciBzdHlsZSA9IF9yZWY0LnN0eWxlLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmNCwgWydzdHlsZSddKTtcblxuICAgIHZhciBmaW5hbFN0eWxlID0gX2V4dGVuZHMoe30sIHN0eWxlLCB7XG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICdpbmhlcml0JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwuMiknXG4gICAgfSk7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIF9leHRlbmRzKHsgc3R5bGU6IGZpbmFsU3R5bGUgfSwgcHJvcHMpKTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yYWYyID0gcmVxdWlyZSgncmFmJyk7XG5cbnZhciBfcmFmMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JhZjIpO1xuXG52YXIgX2RvbUNzcyA9IHJlcXVpcmUoJ2RvbS1jc3MnKTtcblxudmFyIF9kb21Dc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZG9tQ3NzKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX2lzU3RyaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMvaXNTdHJpbmcnKTtcblxudmFyIF9pc1N0cmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1N0cmluZyk7XG5cbnZhciBfZ2V0U2Nyb2xsYmFyV2lkdGggPSByZXF1aXJlKCcuLi91dGlscy9nZXRTY3JvbGxiYXJXaWR0aCcpO1xuXG52YXIgX2dldFNjcm9sbGJhcldpZHRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFNjcm9sbGJhcldpZHRoKTtcblxudmFyIF9yZXR1cm5GYWxzZSA9IHJlcXVpcmUoJy4uL3V0aWxzL3JldHVybkZhbHNlJyk7XG5cbnZhciBfcmV0dXJuRmFsc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmV0dXJuRmFsc2UpO1xuXG52YXIgX2dldElubmVyV2lkdGggPSByZXF1aXJlKCcuLi91dGlscy9nZXRJbm5lcldpZHRoJyk7XG5cbnZhciBfZ2V0SW5uZXJXaWR0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRJbm5lcldpZHRoKTtcblxudmFyIF9nZXRJbm5lckhlaWdodCA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldElubmVySGVpZ2h0Jyk7XG5cbnZhciBfZ2V0SW5uZXJIZWlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0SW5uZXJIZWlnaHQpO1xuXG52YXIgX3N0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGVzJyk7XG5cbnZhciBfZGVmYXVsdFJlbmRlckVsZW1lbnRzID0gcmVxdWlyZSgnLi9kZWZhdWx0UmVuZGVyRWxlbWVudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgU2Nyb2xsYmFycyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFNjcm9sbGJhcnMsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gU2Nyb2xsYmFycyhwcm9wcykge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Nyb2xsYmFycyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICByZXN0W19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfcmVmID0gU2Nyb2xsYmFycy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNjcm9sbGJhcnMpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzLCBwcm9wc10uY29uY2F0KHJlc3QpKSk7XG5cbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsTGVmdCA9IF90aGlzLmdldFNjcm9sbExlZnQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFNjcm9sbFRvcCA9IF90aGlzLmdldFNjcm9sbFRvcC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsV2lkdGggPSBfdGhpcy5nZXRTY3JvbGxXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsSGVpZ2h0ID0gX3RoaXMuZ2V0U2Nyb2xsSGVpZ2h0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRDbGllbnRXaWR0aCA9IF90aGlzLmdldENsaWVudFdpZHRoLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRDbGllbnRIZWlnaHQgPSBfdGhpcy5nZXRDbGllbnRIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFZhbHVlcyA9IF90aGlzLmdldFZhbHVlcy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0VGh1bWJIb3Jpem9udGFsV2lkdGggPSBfdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCA9IF90aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQgPSBfdGhpcy5nZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRTY3JvbGxUb3BGb3JPZmZzZXQgPSBfdGhpcy5nZXRTY3JvbGxUb3BGb3JPZmZzZXQuYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMuc2Nyb2xsTGVmdCA9IF90aGlzLnNjcm9sbExlZnQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnNjcm9sbFRvcCA9IF90aGlzLnNjcm9sbFRvcC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2Nyb2xsVG9MZWZ0ID0gX3RoaXMuc2Nyb2xsVG9MZWZ0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zY3JvbGxUb1RvcCA9IF90aGlzLnNjcm9sbFRvVG9wLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zY3JvbGxUb1JpZ2h0ID0gX3RoaXMuc2Nyb2xsVG9SaWdodC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2Nyb2xsVG9Cb3R0b20gPSBfdGhpcy5zY3JvbGxUb0JvdHRvbS5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIgPSBfdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZSA9IF90aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duID0gX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duID0gX3RoaXMuaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duID0gX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duID0gX3RoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlV2luZG93UmVzaXplID0gX3RoaXMuaGFuZGxlV2luZG93UmVzaXplLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVTY3JvbGwgPSBfdGhpcy5oYW5kbGVTY3JvbGwuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZURyYWcgPSBfdGhpcy5oYW5kbGVEcmFnLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRW5kID0gX3RoaXMuaGFuZGxlRHJhZ0VuZC5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRpZE1vdW50VW5pdmVyc2FsOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNjcm9sbGJhcnMsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudERpZE1vdW50VW5pdmVyc2FsKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50VW5pdmVyc2FsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50VW5pdmVyc2FsKCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSByZWFjdC9zb3J0LWNvbXBcbiAgICAgICAgICAgIHZhciB1bml2ZXJzYWwgPSB0aGlzLnByb3BzLnVuaXZlcnNhbDtcblxuICAgICAgICAgICAgaWYgKCF1bml2ZXJzYWwpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaWRNb3VudFVuaXZlcnNhbDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICgwLCBfcmFmMi5jYW5jZWwpKHRoaXMucmVxdWVzdEZyYW1lKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUcmFja3NUaW1lb3V0KTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kZXRlY3RTY3JvbGxpbmdJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbExlZnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2Nyb2xsTGVmdCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U2Nyb2xsVG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuc2Nyb2xsVG9wO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRTY3JvbGxXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxXaWR0aCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbEhlaWdodCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxIZWlnaHQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuIDA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3LnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0Q2xpZW50V2lkdGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50V2lkdGgoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuIDA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3LmNsaWVudFdpZHRoO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDbGllbnRIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50SGVpZ2h0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybiAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy5jbGllbnRIZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFZhbHVlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZXMoKSB7XG4gICAgICAgICAgICB2YXIgX3JlZjIgPSB0aGlzLnZpZXcgfHwge30sXG4gICAgICAgICAgICAgICAgX3JlZjIkc2Nyb2xsTGVmdCA9IF9yZWYyLnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF9yZWYyJHNjcm9sbExlZnQgPT09IHVuZGVmaW5lZCA/IDAgOiBfcmVmMiRzY3JvbGxMZWZ0LFxuICAgICAgICAgICAgICAgIF9yZWYyJHNjcm9sbFRvcCA9IF9yZWYyLnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3AgPSBfcmVmMiRzY3JvbGxUb3AgPT09IHVuZGVmaW5lZCA/IDAgOiBfcmVmMiRzY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgX3JlZjIkc2Nyb2xsV2lkdGggPSBfcmVmMi5zY3JvbGxXaWR0aCxcbiAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF9yZWYyJHNjcm9sbFdpZHRoID09PSB1bmRlZmluZWQgPyAwIDogX3JlZjIkc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgX3JlZjIkc2Nyb2xsSGVpZ2h0ID0gX3JlZjIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IF9yZWYyJHNjcm9sbEhlaWdodCA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWYyJHNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgICAgICBfcmVmMiRjbGllbnRXaWR0aCA9IF9yZWYyLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGNsaWVudFdpZHRoID0gX3JlZjIkY2xpZW50V2lkdGggPT09IHVuZGVmaW5lZCA/IDAgOiBfcmVmMiRjbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBfcmVmMiRjbGllbnRIZWlnaHQgPSBfcmVmMi5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX3JlZjIkY2xpZW50SGVpZ2h0ID09PSB1bmRlZmluZWQgPyAwIDogX3JlZjIkY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHNjcm9sbExlZnQgLyAoc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkgfHwgMCxcbiAgICAgICAgICAgICAgICB0b3A6IHNjcm9sbFRvcCAvIChzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQpIHx8IDAsXG4gICAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aDogc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0OiBzY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgY2xpZW50V2lkdGg6IGNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodDogY2xpZW50SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRUaHVtYkhvcml6b250YWxXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaHVtYkhvcml6b250YWxXaWR0aCgpIHtcbiAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgIHRodW1iU2l6ZSA9IF9wcm9wcy50aHVtYlNpemUsXG4gICAgICAgICAgICAgICAgdGh1bWJNaW5TaXplID0gX3Byb3BzLnRodW1iTWluU2l6ZTtcbiAgICAgICAgICAgIHZhciBfdmlldyA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF92aWV3LnNjcm9sbFdpZHRoLFxuICAgICAgICAgICAgICAgIGNsaWVudFdpZHRoID0gX3ZpZXcuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgIHZhciB0cmFja1dpZHRoID0gKDAsIF9nZXRJbm5lcldpZHRoMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbChjbGllbnRXaWR0aCAvIHNjcm9sbFdpZHRoICogdHJhY2tXaWR0aCk7XG4gICAgICAgICAgICBpZiAodHJhY2tXaWR0aCA9PT0gd2lkdGgpIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKHRodW1iU2l6ZSkgcmV0dXJuIHRodW1iU2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh3aWR0aCwgdGh1bWJNaW5TaXplKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaHVtYlZlcnRpY2FsSGVpZ2h0KCkge1xuICAgICAgICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgIHRodW1iU2l6ZSA9IF9wcm9wczIudGh1bWJTaXplLFxuICAgICAgICAgICAgICAgIHRodW1iTWluU2l6ZSA9IF9wcm9wczIudGh1bWJNaW5TaXplO1xuICAgICAgICAgICAgdmFyIF92aWV3MiA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBfdmlldzIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IF92aWV3Mi5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgICAgIHZhciB0cmFja0hlaWdodCA9ICgwLCBfZ2V0SW5uZXJIZWlnaHQyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja1ZlcnRpY2FsKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLmNlaWwoY2xpZW50SGVpZ2h0IC8gc2Nyb2xsSGVpZ2h0ICogdHJhY2tIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHRyYWNrSGVpZ2h0ID09PSBoZWlnaHQpIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKHRodW1iU2l6ZSkgcmV0dXJuIHRodW1iU2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChoZWlnaHQsIHRodW1iTWluU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbExlZnRGb3JPZmZzZXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2Nyb2xsTGVmdEZvck9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciBfdmlldzMgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBfdmlldzMuc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50V2lkdGggPSBfdmlldzMuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgIHZhciB0cmFja1dpZHRoID0gKDAsIF9nZXRJbm5lcldpZHRoMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsKTtcbiAgICAgICAgICAgIHZhciB0aHVtYldpZHRoID0gdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIG9mZnNldCAvICh0cmFja1dpZHRoIC0gdGh1bWJXaWR0aCkgKiAoc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbFRvcEZvck9mZnNldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxUb3BGb3JPZmZzZXQob2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgX3ZpZXc0ID0gdGhpcy52aWV3LFxuICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IF92aWV3NC5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX3ZpZXc0LmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgdmFyIHRyYWNrSGVpZ2h0ID0gKDAsIF9nZXRJbm5lckhlaWdodDJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwpO1xuICAgICAgICAgICAgdmFyIHRodW1iSGVpZ2h0ID0gdGhpcy5nZXRUaHVtYlZlcnRpY2FsSGVpZ2h0KCk7XG4gICAgICAgICAgICByZXR1cm4gb2Zmc2V0IC8gKHRyYWNrSGVpZ2h0IC0gdGh1bWJIZWlnaHQpICogKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbExlZnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsTGVmdCgpIHtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSBsZWZ0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxUb3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9wKCkge1xuICAgICAgICAgICAgdmFyIHRvcCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbFRvTGVmdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb0xlZnQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlldykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSAwO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxUb1RvcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb1RvcCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Nyb2xsVG9SaWdodCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb1JpZ2h0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZXcpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gdGhpcy52aWV3LnNjcm9sbFdpZHRoO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxUb0JvdHRvbScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsVG9wID0gdGhpcy52aWV3LnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWRkTGlzdGVuZXJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMudmlldykgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsID0gdGhpcy50cmFja0hvcml6b250YWwsXG4gICAgICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbCA9IHRoaXMudHJhY2tWZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICB0aHVtYkhvcml6b250YWwgPSB0aGlzLnRodW1iSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICB0aHVtYlZlcnRpY2FsID0gdGhpcy50aHVtYlZlcnRpY2FsO1xuXG4gICAgICAgICAgICB2aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgICAgICAgICAgIGlmICghKDAsIF9nZXRTY3JvbGxiYXJXaWR0aDJbXCJkZWZhdWx0XCJdKSgpKSByZXR1cm47XG4gICAgICAgICAgICB0cmFja0hvcml6b250YWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oYW5kbGVUcmFja01vdXNlTGVhdmUpO1xuICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUxlYXZlKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRodW1iSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZUhvcml6b250YWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB0aHVtYlZlcnRpY2FsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW1vdmVMaXN0ZW5lcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhdGhpcy52aWV3KSByZXR1cm47XG4gICAgICAgICAgICB2YXIgdmlldyA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICB0cmFja0hvcml6b250YWwgPSB0aGlzLnRyYWNrSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICB0cmFja1ZlcnRpY2FsID0gdGhpcy50cmFja1ZlcnRpY2FsLFxuICAgICAgICAgICAgICAgIHRodW1iSG9yaXpvbnRhbCA9IHRoaXMudGh1bWJIb3Jpem9udGFsLFxuICAgICAgICAgICAgICAgIHRodW1iVmVydGljYWwgPSB0aGlzLnRodW1iVmVydGljYWw7XG5cbiAgICAgICAgICAgIHZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwpO1xuICAgICAgICAgICAgaWYgKCEoMCwgX2dldFNjcm9sbGJhcldpZHRoMltcImRlZmF1bHRcIl0pKCkpIHJldHVybjtcbiAgICAgICAgICAgIHRyYWNrSG9yaXpvbnRhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIpO1xuICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZSk7XG4gICAgICAgICAgICB0cmFja0hvcml6b250YWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVIb3Jpem9udGFsVHJhY2tNb3VzZURvd24pO1xuICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIpO1xuICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oYW5kbGVUcmFja01vdXNlTGVhdmUpO1xuICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZVZlcnRpY2FsVHJhY2tNb3VzZURvd24pO1xuICAgICAgICAgICAgdGh1bWJIb3Jpem9udGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRodW1iVmVydGljYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZSk7XG4gICAgICAgICAgICAvLyBQb3NzaWJseSBzZXR1cCBieSBgaGFuZGxlRHJhZ1N0YXJ0YFxuICAgICAgICAgICAgdGhpcy50ZWFyZG93bkRyYWdnaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgX3Byb3BzMyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgb25TY3JvbGwgPSBfcHJvcHMzLm9uU2Nyb2xsLFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsRnJhbWUgPSBfcHJvcHMzLm9uU2Nyb2xsRnJhbWU7XG5cbiAgICAgICAgICAgIGlmIChvblNjcm9sbCkgb25TY3JvbGwoZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gdmFsdWVzLnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IHZhbHVlcy5zY3JvbGxUb3A7XG5cbiAgICAgICAgICAgICAgICBfdGhpczIudmlld1Njcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIF90aGlzMi52aWV3U2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIGlmIChvblNjcm9sbEZyYW1lKSBvblNjcm9sbEZyYW1lKHZhbHVlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0U2Nyb2xsaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbFN0YXJ0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFN0YXJ0KCkge1xuICAgICAgICAgICAgdmFyIG9uU2Nyb2xsU3RhcnQgPSB0aGlzLnByb3BzLm9uU2Nyb2xsU3RhcnQ7XG5cbiAgICAgICAgICAgIGlmIChvblNjcm9sbFN0YXJ0KSBvblNjcm9sbFN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbFN0YXJ0QXV0b0hpZGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlU2Nyb2xsU3RhcnRBdXRvSGlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGxTdGFydEF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zaG93VHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbFN0b3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsU3RvcCgpIHtcbiAgICAgICAgICAgIHZhciBvblNjcm9sbFN0b3AgPSB0aGlzLnByb3BzLm9uU2Nyb2xsU3RvcDtcblxuICAgICAgICAgICAgaWYgKG9uU2Nyb2xsU3RvcCkgb25TY3JvbGxTdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbFN0b3BBdXRvSGlkZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTY3JvbGxTdG9wQXV0b0hpZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsU3RvcEF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5oaWRlVHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVdpbmRvd1Jlc2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVXaW5kb3dSZXNpemUoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVIb3Jpem9udGFsVHJhY2tNb3VzZURvd24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRYID0gZXZlbnQuY2xpZW50WDtcblxuICAgICAgICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsLmxlZnQ7XG5cbiAgICAgICAgICAgIHZhciB0aHVtYldpZHRoID0gdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IE1hdGguYWJzKHRhcmdldExlZnQgLSBjbGllbnRYKSAtIHRodW1iV2lkdGggLyAyO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSB0aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRZID0gZXZlbnQuY2xpZW50WTtcblxuICAgICAgICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbDIgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsMi50b3A7XG5cbiAgICAgICAgICAgIHZhciB0aHVtYkhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IE1hdGguYWJzKHRhcmdldFRvcCAtIGNsaWVudFkpIC0gdGh1bWJIZWlnaHQgLyAyO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvcCA9IHRoaXMuZ2V0U2Nyb2xsVG9wRm9yT2Zmc2V0KG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUhvcml6b250YWxUaHVtYk1vdXNlRG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVIb3Jpem9udGFsVGh1bWJNb3VzZURvd24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURyYWdTdGFydChldmVudCk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgIGNsaWVudFggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgICAgdmFyIG9mZnNldFdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgICB2YXIgX3RhcmdldCRnZXRCb3VuZGluZ0NsMyA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICBsZWZ0ID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsMy5sZWZ0O1xuXG4gICAgICAgICAgICB0aGlzLnByZXZQYWdlWCA9IG9mZnNldFdpZHRoIC0gKGNsaWVudFggLSBsZWZ0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnU3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRIZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICB2YXIgX3RhcmdldCRnZXRCb3VuZGluZ0NsNCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICB0b3AgPSBfdGFyZ2V0JGdldEJvdW5kaW5nQ2w0LnRvcDtcblxuICAgICAgICAgICAgdGhpcy5wcmV2UGFnZVkgPSBvZmZzZXRIZWlnaHQgLSAoY2xpZW50WSAtIHRvcCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldHVwRHJhZ2dpbmcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBEcmFnZ2luZygpIHtcbiAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKGRvY3VtZW50LmJvZHksIF9zdHlsZXMuZGlzYWJsZVNlbGVjdFN0eWxlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlRHJhZyk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5oYW5kbGVEcmFnRW5kKTtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBfcmV0dXJuRmFsc2UyW1wiZGVmYXVsdFwiXTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndGVhcmRvd25EcmFnZ2luZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0ZWFyZG93bkRyYWdnaW5nKCkge1xuICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkoZG9jdW1lbnQuYm9keSwgX3N0eWxlcy5kaXNhYmxlU2VsZWN0U3R5bGVSZXNldCk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZURyYWcpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlRHJhZ0VuZCk7XG4gICAgICAgICAgICBkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVEcmFnU3RhcnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZXR1cERyYWdnaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZURyYWcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJhZyhldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldlBhZ2VYKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFggPSBldmVudC5jbGllbnRYO1xuXG4gICAgICAgICAgICAgICAgdmFyIF90cmFja0hvcml6b250YWwkZ2V0QiA9IHRoaXMudHJhY2tIb3Jpem9udGFsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmFja0xlZnQgPSBfdHJhY2tIb3Jpem9udGFsJGdldEIubGVmdDtcblxuICAgICAgICAgICAgICAgIHZhciB0aHVtYldpZHRoID0gdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aCgpO1xuICAgICAgICAgICAgICAgIHZhciBjbGlja1Bvc2l0aW9uID0gdGh1bWJXaWR0aCAtIHRoaXMucHJldlBhZ2VYO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAtdHJhY2tMZWZ0ICsgY2xpZW50WCAtIGNsaWNrUG9zaXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbExlZnQgPSB0aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQob2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZQYWdlWSkge1xuICAgICAgICAgICAgICAgIHZhciBjbGllbnRZID0gZXZlbnQuY2xpZW50WTtcblxuICAgICAgICAgICAgICAgIHZhciBfdHJhY2tWZXJ0aWNhbCRnZXRCb3UgPSB0aGlzLnRyYWNrVmVydGljYWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrVG9wID0gX3RyYWNrVmVydGljYWwkZ2V0Qm91LnRvcDtcblxuICAgICAgICAgICAgICAgIHZhciB0aHVtYkhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHZhciBfY2xpY2tQb3NpdGlvbiA9IHRodW1iSGVpZ2h0IC0gdGhpcy5wcmV2UGFnZVk7XG4gICAgICAgICAgICAgICAgdmFyIF9vZmZzZXQgPSAtdHJhY2tUb3AgKyBjbGllbnRZIC0gX2NsaWNrUG9zaXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvcCA9IHRoaXMuZ2V0U2Nyb2xsVG9wRm9yT2Zmc2V0KF9vZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVEcmFnRW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnByZXZQYWdlWCA9IHRoaXMucHJldlBhZ2VZID0gMDtcbiAgICAgICAgICAgIHRoaXMudGVhcmRvd25EcmFnZ2luZygpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnRW5kQXV0b0hpZGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlRHJhZ0VuZEF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdFbmRBdXRvSGlkZSgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvSGlkZSA9IHRoaXMucHJvcHMuYXV0b0hpZGU7XG5cbiAgICAgICAgICAgIGlmICghYXV0b0hpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRyYWNrcygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVUcmFja01vdXNlRW50ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlVHJhY2tNb3VzZUVudGVyKCkge1xuICAgICAgICAgICAgdGhpcy50cmFja01vdXNlT3ZlciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRyYWNrTW91c2VFbnRlckF1dG9IaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVRyYWNrTW91c2VFbnRlckF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVRyYWNrTW91c2VFbnRlckF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zaG93VHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVRyYWNrTW91c2VMZWF2ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVUcmFja01vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrTW91c2VPdmVyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZUF1dG9IaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVRyYWNrTW91c2VMZWF2ZUF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVRyYWNrTW91c2VMZWF2ZUF1dG9IaWRlKCkge1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlID0gdGhpcy5wcm9wcy5hdXRvSGlkZTtcblxuICAgICAgICAgICAgaWYgKCFhdXRvSGlkZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5oaWRlVHJhY2tzKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Nob3dUcmFja3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd1RyYWNrcygpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUcmFja3NUaW1lb3V0KTtcbiAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsLCB7IG9wYWNpdHk6IDEgfSk7XG4gICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwsIHsgb3BhY2l0eTogMSB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGlkZVRyYWNrcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlVHJhY2tzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrTW91c2VPdmVyKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgYXV0b0hpZGVUaW1lb3V0ID0gdGhpcy5wcm9wcy5hdXRvSGlkZVRpbWVvdXQ7XG5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUcmFja3NUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRyYWNrc1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKShfdGhpczMudHJhY2tIb3Jpem9udGFsLCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkoX3RoaXMzLnRyYWNrVmVydGljYWwsIHsgb3BhY2l0eTogMCB9KTtcbiAgICAgICAgICAgIH0sIGF1dG9IaWRlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RldGVjdFNjcm9sbGluZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRlY3RTY3JvbGxpbmcoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbFN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmRldGVjdFNjcm9sbGluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczQubGFzdFZpZXdTY3JvbGxMZWZ0ID09PSBfdGhpczQudmlld1Njcm9sbExlZnQgJiYgX3RoaXM0Lmxhc3RWaWV3U2Nyb2xsVG9wID09PSBfdGhpczQudmlld1Njcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzNC5kZXRlY3RTY3JvbGxpbmdJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5zY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmhhbmRsZVNjcm9sbFN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXM0Lmxhc3RWaWV3U2Nyb2xsTGVmdCA9IF90aGlzNC52aWV3U2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBfdGhpczQubGFzdFZpZXdTY3JvbGxUb3AgPSBfdGhpczQudmlld1Njcm9sbFRvcDtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JhZicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByYWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0RnJhbWUpIF9yYWYzW1wiZGVmYXVsdFwiXS5jYW5jZWwodGhpcy5yZXF1ZXN0RnJhbWUpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0RnJhbWUgPSAoMCwgX3JhZjNbXCJkZWZhdWx0XCJdKShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM1LnJlcXVlc3RGcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnJhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5fdXBkYXRlKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfdXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGUoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfcHJvcHM0ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSA9IF9wcm9wczQub25VcGRhdGUsXG4gICAgICAgICAgICAgICAgaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQgPSBfcHJvcHM0LmhpZGVUcmFja3NXaGVuTm90TmVlZGVkO1xuXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcbiAgICAgICAgICAgIGlmICgoMCwgX2dldFNjcm9sbGJhcldpZHRoMltcImRlZmF1bHRcIl0pKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHZhbHVlcy5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRXaWR0aCA9IHZhbHVlcy5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSB2YWx1ZXMuc2Nyb2xsV2lkdGg7XG5cbiAgICAgICAgICAgICAgICB2YXIgdHJhY2tIb3Jpem9udGFsV2lkdGggPSAoMCwgX2dldElubmVyV2lkdGgyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja0hvcml6b250YWwpO1xuICAgICAgICAgICAgICAgIHZhciB0aHVtYkhvcml6b250YWxXaWR0aCA9IHRoaXMuZ2V0VGh1bWJIb3Jpem9udGFsV2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJIb3Jpem9udGFsWCA9IHNjcm9sbExlZnQgLyAoc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkgKiAodHJhY2tIb3Jpem9udGFsV2lkdGggLSB0aHVtYkhvcml6b250YWxXaWR0aCk7XG4gICAgICAgICAgICAgICAgdmFyIHRodW1iSG9yaXpvbnRhbFN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGh1bWJIb3Jpem9udGFsV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHRodW1iSG9yaXpvbnRhbFggKyAncHgpJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHZhbHVlcy5zY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IHZhbHVlcy5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IHZhbHVlcy5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgdHJhY2tWZXJ0aWNhbEhlaWdodCA9ICgwLCBfZ2V0SW5uZXJIZWlnaHQyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja1ZlcnRpY2FsKTtcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJWZXJ0aWNhbEhlaWdodCA9IHRoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHZhciB0aHVtYlZlcnRpY2FsWSA9IHNjcm9sbFRvcCAvIChzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQpICogKHRyYWNrVmVydGljYWxIZWlnaHQgLSB0aHVtYlZlcnRpY2FsSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJWZXJ0aWNhbFN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRodW1iVmVydGljYWxIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoJyArIHRodW1iVmVydGljYWxZICsgJ3B4KSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2tIb3Jpem9udGFsU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBzY3JvbGxXaWR0aCA+IGNsaWVudFdpZHRoID8gJ3Zpc2libGUnIDogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrVmVydGljYWxTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHNjcm9sbEhlaWdodCA+IGNsaWVudEhlaWdodCA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsLCB0cmFja0hvcml6b250YWxTdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tWZXJ0aWNhbCwgdHJhY2tWZXJ0aWNhbFN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkodGhpcy50aHVtYkhvcml6b250YWwsIHRodW1iSG9yaXpvbnRhbFN0eWxlKTtcbiAgICAgICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRodW1iVmVydGljYWwsIHRodW1iVmVydGljYWxTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob25VcGRhdGUpIG9uVXBkYXRlKHZhbHVlcyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG4gICAgICAgICAgICBjYWxsYmFjayh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBzY3JvbGxiYXJXaWR0aCA9ICgwLCBfZ2V0U2Nyb2xsYmFyV2lkdGgyW1wiZGVmYXVsdFwiXSkoKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5cbiAgICAgICAgICAgIHZhciBfcHJvcHM1ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgICBvblNjcm9sbCA9IF9wcm9wczUub25TY3JvbGwsXG4gICAgICAgICAgICAgICAgb25TY3JvbGxGcmFtZSA9IF9wcm9wczUub25TY3JvbGxGcmFtZSxcbiAgICAgICAgICAgICAgICBvblNjcm9sbFN0YXJ0ID0gX3Byb3BzNS5vblNjcm9sbFN0YXJ0LFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsU3RvcCA9IF9wcm9wczUub25TY3JvbGxTdG9wLFxuICAgICAgICAgICAgICAgIG9uVXBkYXRlID0gX3Byb3BzNS5vblVwZGF0ZSxcbiAgICAgICAgICAgICAgICByZW5kZXJWaWV3ID0gX3Byb3BzNS5yZW5kZXJWaWV3LFxuICAgICAgICAgICAgICAgIHJlbmRlclRyYWNrSG9yaXpvbnRhbCA9IF9wcm9wczUucmVuZGVyVHJhY2tIb3Jpem9udGFsLFxuICAgICAgICAgICAgICAgIHJlbmRlclRyYWNrVmVydGljYWwgPSBfcHJvcHM1LnJlbmRlclRyYWNrVmVydGljYWwsXG4gICAgICAgICAgICAgICAgcmVuZGVyVGh1bWJIb3Jpem9udGFsID0gX3Byb3BzNS5yZW5kZXJUaHVtYkhvcml6b250YWwsXG4gICAgICAgICAgICAgICAgcmVuZGVyVGh1bWJWZXJ0aWNhbCA9IF9wcm9wczUucmVuZGVyVGh1bWJWZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICB0YWdOYW1lID0gX3Byb3BzNS50YWdOYW1lLFxuICAgICAgICAgICAgICAgIGhpZGVUcmFja3NXaGVuTm90TmVlZGVkID0gX3Byb3BzNS5oaWRlVHJhY2tzV2hlbk5vdE5lZWRlZCxcbiAgICAgICAgICAgICAgICBhdXRvSGlkZSA9IF9wcm9wczUuYXV0b0hpZGUsXG4gICAgICAgICAgICAgICAgYXV0b0hpZGVUaW1lb3V0ID0gX3Byb3BzNS5hdXRvSGlkZVRpbWVvdXQsXG4gICAgICAgICAgICAgICAgYXV0b0hpZGVEdXJhdGlvbiA9IF9wcm9wczUuYXV0b0hpZGVEdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0aHVtYlNpemUgPSBfcHJvcHM1LnRodW1iU2l6ZSxcbiAgICAgICAgICAgICAgICB0aHVtYk1pblNpemUgPSBfcHJvcHM1LnRodW1iTWluU2l6ZSxcbiAgICAgICAgICAgICAgICB1bml2ZXJzYWwgPSBfcHJvcHM1LnVuaXZlcnNhbCxcbiAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0ID0gX3Byb3BzNS5hdXRvSGVpZ2h0LFxuICAgICAgICAgICAgICAgIGF1dG9IZWlnaHRNaW4gPSBfcHJvcHM1LmF1dG9IZWlnaHRNaW4sXG4gICAgICAgICAgICAgICAgYXV0b0hlaWdodE1heCA9IF9wcm9wczUuYXV0b0hlaWdodE1heCxcbiAgICAgICAgICAgICAgICBzdHlsZSA9IF9wcm9wczUuc3R5bGUsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHM1LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wczUsIFsnb25TY3JvbGwnLCAnb25TY3JvbGxGcmFtZScsICdvblNjcm9sbFN0YXJ0JywgJ29uU2Nyb2xsU3RvcCcsICdvblVwZGF0ZScsICdyZW5kZXJWaWV3JywgJ3JlbmRlclRyYWNrSG9yaXpvbnRhbCcsICdyZW5kZXJUcmFja1ZlcnRpY2FsJywgJ3JlbmRlclRodW1iSG9yaXpvbnRhbCcsICdyZW5kZXJUaHVtYlZlcnRpY2FsJywgJ3RhZ05hbWUnLCAnaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQnLCAnYXV0b0hpZGUnLCAnYXV0b0hpZGVUaW1lb3V0JywgJ2F1dG9IaWRlRHVyYXRpb24nLCAndGh1bWJTaXplJywgJ3RodW1iTWluU2l6ZScsICd1bml2ZXJzYWwnLCAnYXV0b0hlaWdodCcsICdhdXRvSGVpZ2h0TWluJywgJ2F1dG9IZWlnaHRNYXgnLCAnc3R5bGUnLCAnY2hpbGRyZW4nXSk7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXG5cbiAgICAgICAgICAgIHZhciBkaWRNb3VudFVuaXZlcnNhbCA9IHRoaXMuc3RhdGUuZGlkTW91bnRVbml2ZXJzYWw7XG5cblxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lclN0eWxlID0gX2V4dGVuZHMoe30sIF9zdHlsZXMuY29udGFpbmVyU3R5bGVEZWZhdWx0LCBhdXRvSGVpZ2h0ICYmIF9leHRlbmRzKHt9LCBfc3R5bGVzLmNvbnRhaW5lclN0eWxlQXV0b0hlaWdodCwge1xuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogYXV0b0hlaWdodE1pbixcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IGF1dG9IZWlnaHRNYXhcbiAgICAgICAgICAgIH0pLCBzdHlsZSk7XG5cbiAgICAgICAgICAgIHZhciB2aWV3U3R5bGUgPSBfZXh0ZW5kcyh7fSwgX3N0eWxlcy52aWV3U3R5bGVEZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgLy8gSGlkZSBzY3JvbGxiYXJzIGJ5IHNldHRpbmcgYSBuZWdhdGl2ZSBtYXJnaW5cbiAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogc2Nyb2xsYmFyV2lkdGggPyAtc2Nyb2xsYmFyV2lkdGggOiAwLFxuICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogc2Nyb2xsYmFyV2lkdGggPyAtc2Nyb2xsYmFyV2lkdGggOiAwXG4gICAgICAgICAgICB9LCBhdXRvSGVpZ2h0ICYmIF9leHRlbmRzKHt9LCBfc3R5bGVzLnZpZXdTdHlsZUF1dG9IZWlnaHQsIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgc2Nyb2xsYmFyV2lkdGggdG8gYXV0b0hlaWdodCBpbiBvcmRlciB0byBjb21wZW5zYXRlIG5lZ2F0aXZlIG1hcmdpbnNcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICgwLCBfaXNTdHJpbmcyW1wiZGVmYXVsdFwiXSkoYXV0b0hlaWdodE1pbikgPyAnY2FsYygnICsgYXV0b0hlaWdodE1pbiArICcgKyAnICsgc2Nyb2xsYmFyV2lkdGggKyAncHgpJyA6IGF1dG9IZWlnaHRNaW4gKyBzY3JvbGxiYXJXaWR0aCxcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6ICgwLCBfaXNTdHJpbmcyW1wiZGVmYXVsdFwiXSkoYXV0b0hlaWdodE1heCkgPyAnY2FsYygnICsgYXV0b0hlaWdodE1heCArICcgKyAnICsgc2Nyb2xsYmFyV2lkdGggKyAncHgpJyA6IGF1dG9IZWlnaHRNYXggKyBzY3JvbGxiYXJXaWR0aFxuICAgICAgICAgICAgfSksIGF1dG9IZWlnaHQgJiYgdW5pdmVyc2FsICYmICFkaWRNb3VudFVuaXZlcnNhbCAmJiB7XG4gICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBhdXRvSGVpZ2h0TWluLFxuICAgICAgICAgICAgICAgIG1heEhlaWdodDogYXV0b0hlaWdodE1heFxuICAgICAgICAgICAgfSwgdW5pdmVyc2FsICYmICFkaWRNb3VudFVuaXZlcnNhbCAmJiBfc3R5bGVzLnZpZXdTdHlsZVVuaXZlcnNhbEluaXRpYWwpO1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tBdXRvSGVpZ2h0U3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ29wYWNpdHkgJyArIGF1dG9IaWRlRHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB0cmFja0hvcml6b250YWxTdHlsZSA9IF9leHRlbmRzKHt9LCBfc3R5bGVzLnRyYWNrSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCwgYXV0b0hpZGUgJiYgdHJhY2tBdXRvSGVpZ2h0U3R5bGUsICghc2Nyb2xsYmFyV2lkdGggfHwgdW5pdmVyc2FsICYmICFkaWRNb3VudFVuaXZlcnNhbCkgJiYge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB0cmFja1ZlcnRpY2FsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgX3N0eWxlcy50cmFja1ZlcnRpY2FsU3R5bGVEZWZhdWx0LCBhdXRvSGlkZSAmJiB0cmFja0F1dG9IZWlnaHRTdHlsZSwgKCFzY3JvbGxiYXJXaWR0aCB8fCB1bml2ZXJzYWwgJiYgIWRpZE1vdW50VW5pdmVyc2FsKSAmJiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuICgwLCBfcmVhY3QuY3JlYXRlRWxlbWVudCkodGFnTmFtZSwgX2V4dGVuZHMoe30sIHByb3BzLCB7IHN0eWxlOiBjb250YWluZXJTdHlsZSwgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjMpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNvbnRhaW5lciA9IF9yZWYzO1xuICAgICAgICAgICAgICAgIH0gfSksIFsoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkocmVuZGVyVmlldyh7IHN0eWxlOiB2aWV3U3R5bGUgfSksIHsga2V5OiAndmlldycsIHJlZjogZnVuY3Rpb24gcmVmKF9yZWY0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNy52aWV3ID0gX3JlZjQ7XG4gICAgICAgICAgICAgICAgfSB9LCBjaGlsZHJlbiksICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUcmFja0hvcml6b250YWwoeyBzdHlsZTogdHJhY2tIb3Jpem9udGFsU3R5bGUgfSksIHsga2V5OiAndHJhY2tIb3Jpem9udGFsJywgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnRyYWNrSG9yaXpvbnRhbCA9IF9yZWY1O1xuICAgICAgICAgICAgICAgIH0gfSwgKDAsIF9yZWFjdC5jbG9uZUVsZW1lbnQpKHJlbmRlclRodW1iSG9yaXpvbnRhbCh7IHN0eWxlOiBfc3R5bGVzLnRodW1iSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCB9KSwgeyByZWY6IGZ1bmN0aW9uIHJlZihfcmVmNikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczcudGh1bWJIb3Jpem9udGFsID0gX3JlZjY7XG4gICAgICAgICAgICAgICAgfSB9KSksICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUcmFja1ZlcnRpY2FsKHsgc3R5bGU6IHRyYWNrVmVydGljYWxTdHlsZSB9KSwgeyBrZXk6ICd0cmFja1ZlcnRpY2FsJywgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnRyYWNrVmVydGljYWwgPSBfcmVmNztcbiAgICAgICAgICAgICAgICB9IH0sICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUaHVtYlZlcnRpY2FsKHsgc3R5bGU6IF9zdHlsZXMudGh1bWJWZXJ0aWNhbFN0eWxlRGVmYXVsdCB9KSwgeyByZWY6IGZ1bmN0aW9uIHJlZihfcmVmOCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczcudGh1bWJWZXJ0aWNhbCA9IF9yZWY4O1xuICAgICAgICAgICAgICAgIH0gfSkpXSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2Nyb2xsYmFycztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gU2Nyb2xsYmFycztcblxuXG5TY3JvbGxiYXJzLnByb3BUeXBlcyA9IHtcbiAgICBvblNjcm9sbDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgb25TY3JvbGxGcmFtZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgb25TY3JvbGxTdGFydDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgb25TY3JvbGxTdG9wOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICBvblVwZGF0ZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgcmVuZGVyVmlldzogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgcmVuZGVyVHJhY2tIb3Jpem9udGFsOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICByZW5kZXJUcmFja1ZlcnRpY2FsOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICByZW5kZXJUaHVtYkhvcml6b250YWw6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIHJlbmRlclRodW1iVmVydGljYWw6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIHRhZ05hbWU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5zdHJpbmcsXG4gICAgdGh1bWJTaXplOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubnVtYmVyLFxuICAgIHRodW1iTWluU2l6ZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm51bWJlcixcbiAgICBoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmJvb2wsXG4gICAgYXV0b0hpZGU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5ib29sLFxuICAgIGF1dG9IaWRlVGltZW91dDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm51bWJlcixcbiAgICBhdXRvSGlkZUR1cmF0aW9uOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubnVtYmVyLFxuICAgIGF1dG9IZWlnaHQ6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5ib29sLFxuICAgIGF1dG9IZWlnaHRNaW46IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5vbmVPZlR5cGUoW19wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5udW1iZXIsIF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5zdHJpbmddKSxcbiAgICBhdXRvSGVpZ2h0TWF4OiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ub25lT2ZUeXBlKFtfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubnVtYmVyLCBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uc3RyaW5nXSksXG4gICAgdW5pdmVyc2FsOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uYm9vbCxcbiAgICBzdHlsZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm9iamVjdCxcbiAgICBjaGlsZHJlbjogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm5vZGVcbn07XG5cblNjcm9sbGJhcnMuZGVmYXVsdFByb3BzID0ge1xuICAgIHJlbmRlclZpZXc6IF9kZWZhdWx0UmVuZGVyRWxlbWVudHMucmVuZGVyVmlld0RlZmF1bHQsXG4gICAgcmVuZGVyVHJhY2tIb3Jpem9udGFsOiBfZGVmYXVsdFJlbmRlckVsZW1lbnRzLnJlbmRlclRyYWNrSG9yaXpvbnRhbERlZmF1bHQsXG4gICAgcmVuZGVyVHJhY2tWZXJ0aWNhbDogX2RlZmF1bHRSZW5kZXJFbGVtZW50cy5yZW5kZXJUcmFja1ZlcnRpY2FsRGVmYXVsdCxcbiAgICByZW5kZXJUaHVtYkhvcml6b250YWw6IF9kZWZhdWx0UmVuZGVyRWxlbWVudHMucmVuZGVyVGh1bWJIb3Jpem9udGFsRGVmYXVsdCxcbiAgICByZW5kZXJUaHVtYlZlcnRpY2FsOiBfZGVmYXVsdFJlbmRlckVsZW1lbnRzLnJlbmRlclRodW1iVmVydGljYWxEZWZhdWx0LFxuICAgIHRhZ05hbWU6ICdkaXYnLFxuICAgIHRodW1iTWluU2l6ZTogMzAsXG4gICAgaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQ6IGZhbHNlLFxuICAgIGF1dG9IaWRlOiBmYWxzZSxcbiAgICBhdXRvSGlkZVRpbWVvdXQ6IDEwMDAsXG4gICAgYXV0b0hpZGVEdXJhdGlvbjogMjAwLFxuICAgIGF1dG9IZWlnaHQ6IGZhbHNlLFxuICAgIGF1dG9IZWlnaHRNaW46IDAsXG4gICAgYXV0b0hlaWdodE1heDogMjAwLFxuICAgIHVuaXZlcnNhbDogZmFsc2Vcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgY29udGFpbmVyU3R5bGVEZWZhdWx0ID0gZXhwb3J0cy5jb250YWluZXJTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIHdpZHRoOiAnMTAwJScsXG4gICAgaGVpZ2h0OiAnMTAwJSdcbn07XG5cbi8vIE92ZXJyaWRlcyBjb250YWluZXJTdHlsZURlZmF1bHQgcHJvcGVydGllc1xudmFyIGNvbnRhaW5lclN0eWxlQXV0b0hlaWdodCA9IGV4cG9ydHMuY29udGFpbmVyU3R5bGVBdXRvSGVpZ2h0ID0ge1xuICAgIGhlaWdodDogJ2F1dG8nXG59O1xuXG52YXIgdmlld1N0eWxlRGVmYXVsdCA9IGV4cG9ydHMudmlld1N0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgb3ZlcmZsb3c6ICdzY3JvbGwnLFxuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnXG59O1xuXG4vLyBPdmVycmlkZXMgdmlld1N0eWxlRGVmYXVsdCBwcm9wZXJ0aWVzXG52YXIgdmlld1N0eWxlQXV0b0hlaWdodCA9IGV4cG9ydHMudmlld1N0eWxlQXV0b0hlaWdodCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICB0b3A6IHVuZGVmaW5lZCxcbiAgICBsZWZ0OiB1bmRlZmluZWQsXG4gICAgcmlnaHQ6IHVuZGVmaW5lZCxcbiAgICBib3R0b206IHVuZGVmaW5lZFxufTtcblxudmFyIHZpZXdTdHlsZVVuaXZlcnNhbEluaXRpYWwgPSBleHBvcnRzLnZpZXdTdHlsZVVuaXZlcnNhbEluaXRpYWwgPSB7XG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIG1hcmdpblJpZ2h0OiAwLFxuICAgIG1hcmdpbkJvdHRvbTogMFxufTtcblxudmFyIHRyYWNrSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCA9IGV4cG9ydHMudHJhY2tIb3Jpem9udGFsU3R5bGVEZWZhdWx0ID0ge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGhlaWdodDogNlxufTtcblxudmFyIHRyYWNrVmVydGljYWxTdHlsZURlZmF1bHQgPSBleHBvcnRzLnRyYWNrVmVydGljYWxTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgd2lkdGg6IDZcbn07XG5cbnZhciB0aHVtYkhvcml6b250YWxTdHlsZURlZmF1bHQgPSBleHBvcnRzLnRodW1iSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgIGhlaWdodDogJzEwMCUnXG59O1xuXG52YXIgdGh1bWJWZXJ0aWNhbFN0eWxlRGVmYXVsdCA9IGV4cG9ydHMudGh1bWJWZXJ0aWNhbFN0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgIHdpZHRoOiAnMTAwJSdcbn07XG5cbnZhciBkaXNhYmxlU2VsZWN0U3R5bGUgPSBleHBvcnRzLmRpc2FibGVTZWxlY3RTdHlsZSA9IHtcbiAgICB1c2VyU2VsZWN0OiAnbm9uZSdcbn07XG5cbnZhciBkaXNhYmxlU2VsZWN0U3R5bGVSZXNldCA9IGV4cG9ydHMuZGlzYWJsZVNlbGVjdFN0eWxlUmVzZXQgPSB7XG4gICAgdXNlclNlbGVjdDogJydcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5TY3JvbGxiYXJzID0gdW5kZWZpbmVkO1xuXG52YXIgX1Njcm9sbGJhcnMgPSByZXF1aXJlKCcuL1Njcm9sbGJhcnMnKTtcblxudmFyIF9TY3JvbGxiYXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Njcm9sbGJhcnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfU2Nyb2xsYmFyczJbXCJkZWZhdWx0XCJdO1xuZXhwb3J0cy5TY3JvbGxiYXJzID0gX1Njcm9sbGJhcnMyW1wiZGVmYXVsdFwiXTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBnZXRJbm5lckhlaWdodDtcbmZ1bmN0aW9uIGdldElubmVySGVpZ2h0KGVsKSB7XG4gICAgdmFyIGNsaWVudEhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcblxuICAgIHZhciBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpLFxuICAgICAgICBwYWRkaW5nVG9wID0gX2dldENvbXB1dGVkU3R5bGUucGFkZGluZ1RvcCxcbiAgICAgICAgcGFkZGluZ0JvdHRvbSA9IF9nZXRDb21wdXRlZFN0eWxlLnBhZGRpbmdCb3R0b207XG5cbiAgICByZXR1cm4gY2xpZW50SGVpZ2h0IC0gcGFyc2VGbG9hdChwYWRkaW5nVG9wKSAtIHBhcnNlRmxvYXQocGFkZGluZ0JvdHRvbSk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZ2V0SW5uZXJXaWR0aDtcbmZ1bmN0aW9uIGdldElubmVyV2lkdGgoZWwpIHtcbiAgICB2YXIgY2xpZW50V2lkdGggPSBlbC5jbGllbnRXaWR0aDtcblxuICAgIHZhciBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpLFxuICAgICAgICBwYWRkaW5nTGVmdCA9IF9nZXRDb21wdXRlZFN0eWxlLnBhZGRpbmdMZWZ0LFxuICAgICAgICBwYWRkaW5nUmlnaHQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5wYWRkaW5nUmlnaHQ7XG5cbiAgICByZXR1cm4gY2xpZW50V2lkdGggLSBwYXJzZUZsb2F0KHBhZGRpbmdMZWZ0KSAtIHBhcnNlRmxvYXQocGFkZGluZ1JpZ2h0KTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZ2V0U2Nyb2xsYmFyV2lkdGg7XG5cbnZhciBfZG9tQ3NzID0gcmVxdWlyZSgnZG9tLWNzcycpO1xuXG52YXIgX2RvbUNzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kb21Dc3MpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxudmFyIHNjcm9sbGJhcldpZHRoID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGdldFNjcm9sbGJhcldpZHRoKCkge1xuICAgIGlmIChzY3JvbGxiYXJXaWR0aCAhPT0gZmFsc2UpIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkoZGl2LCB7XG4gICAgICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHRvcDogLTk5OTksXG4gICAgICAgICAgICBvdmVyZmxvdzogJ3Njcm9sbCcsXG4gICAgICAgICAgICBNc092ZXJmbG93U3R5bGU6ICdzY3JvbGxiYXInXG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIHNjcm9sbGJhcldpZHRoID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGggfHwgMDtcbn0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gaXNTdHJpbmc7XG5mdW5jdGlvbiBpc1N0cmluZyhtYXliZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWF5YmUgPT09ICdzdHJpbmcnO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHJldHVybkZhbHNlO1xuZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufSIsImltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXknO1xuaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayc7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzJztcbmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJztcbmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YnO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkJztcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMnO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgUmVhY3QsIHsgQ2hpbGRyZW4sIENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5JztcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnO1xuaW1wb3J0IHVzZVN0eWxlcywgeyBpbmxpbmUgfSBmcm9tICdzdWJzdHlsZSc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbi8vIGVzY2FwZSBSZWdFeHAgc3BlY2lhbCBjaGFyYWN0ZXJzIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS85MzEwNzUyLzUxNDI0OTBcbnZhciBlc2NhcGVSZWdleCA9IGZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCAnXFxcXCQmJyk7XG59O1xuXG52YXIgUExBQ0VIT0xERVJTID0ge1xuICBpZDogJ19faWRfXycsXG4gIGRpc3BsYXk6ICdfX2Rpc3BsYXlfXydcbn07XG5cbnZhciBmaW5kUG9zaXRpb25PZkNhcHR1cmluZ0dyb3VwID0gZnVuY3Rpb24gZmluZFBvc2l0aW9uT2ZDYXB0dXJpbmdHcm91cChtYXJrdXAsIHBhcmFtZXRlck5hbWUpIHtcbiAgaW52YXJpYW50KHBhcmFtZXRlck5hbWUgPT09ICdpZCcgfHwgcGFyYW1ldGVyTmFtZSA9PT0gJ2Rpc3BsYXknLCBcIlNlY29uZCBhcmcgbXVzdCBiZSBlaXRoZXIgXFxcImlkXFxcIiBvciBcXFwiZGlzcGxheVxcXCIsIGdvdDogXFxcIlwiLmNvbmNhdChwYXJhbWV0ZXJOYW1lLCBcIlxcXCJcIikpOyAvLyBmaW5kIHBvc2l0aW9ucyBvZiBwbGFjZWhvbGRlcnMgaW4gdGhlIG1hcmt1cFxuXG4gIHZhciBpbmRleERpc3BsYXkgPSBtYXJrdXAuaW5kZXhPZihQTEFDRUhPTERFUlMuZGlzcGxheSk7XG4gIHZhciBpbmRleElkID0gbWFya3VwLmluZGV4T2YoUExBQ0VIT0xERVJTLmlkKTsgLy8gc2V0IGluZGljZXMgdG8gbnVsbCBpZiBub3QgZm91bmRcblxuICBpZiAoaW5kZXhEaXNwbGF5IDwgMCkgaW5kZXhEaXNwbGF5ID0gbnVsbDtcbiAgaWYgKGluZGV4SWQgPCAwKSBpbmRleElkID0gbnVsbDsgLy8gbWFya3VwIG11c3QgY29udGFpbiBvbmUgb2YgdGhlIG1hbmRhdG9yeSBwbGFjZWhvbGRlcnNcblxuICBpbnZhcmlhbnQoaW5kZXhEaXNwbGF5ICE9PSBudWxsIHx8IGluZGV4SWQgIT09IG51bGwsIFwiVGhlIG1hcmt1cCAnXCIuY29uY2F0KG1hcmt1cCwgXCInIGRvZXMgbm90IGNvbnRhaW4gZWl0aGVyIG9mIHRoZSBwbGFjZWhvbGRlcnMgJ19faWRfXycgb3IgJ19fZGlzcGxheV9fJ1wiKSk7XG5cbiAgaWYgKGluZGV4RGlzcGxheSAhPT0gbnVsbCAmJiBpbmRleElkICE9PSBudWxsKSB7XG4gICAgLy8gYm90aCBwbGFjZWhvbGRlcnMgYXJlIHVzZWQsIHJldHVybiAwIG9yIDEgZGVwZW5kaW5nIG9uIHRoZSBwb3NpdGlvbiBvZiB0aGUgcmVxdWVzdGVkIHBhcmFtZXRlclxuICAgIHJldHVybiBwYXJhbWV0ZXJOYW1lID09PSAnaWQnICYmIGluZGV4SWQgPD0gaW5kZXhEaXNwbGF5IHx8IHBhcmFtZXRlck5hbWUgPT09ICdkaXNwbGF5JyAmJiBpbmRleERpc3BsYXkgPD0gaW5kZXhJZCA/IDAgOiAxO1xuICB9IC8vIGp1c3Qgb25lIHBsYWNlaG9sZGVyIGlzIGJlaW5nIHVzZWQsIHdlJ2xsIHVzZSB0aGUgY2FwdHVyZWQgc3RyaW5nIGZvciBib3RoIHBhcmFtZXRlcnNcblxuXG4gIHJldHVybiAwO1xufTtcblxudmFyIGNvbWJpbmVSZWdFeHBzID0gZnVuY3Rpb24gY29tYmluZVJlZ0V4cHMocmVnRXhwcykge1xuICB2YXIgc2VyaWFsaXplZFJlZ2V4UGFyc2VyID0gL15cXC8oLispXFwvKFxcdyspPyQvO1xuICByZXR1cm4gbmV3IFJlZ0V4cChyZWdFeHBzLm1hcChmdW5jdGlvbiAocmVnZXgpIHtcbiAgICB2YXIgX3NlcmlhbGl6ZWRSZWdleFBhcnNlID0gc2VyaWFsaXplZFJlZ2V4UGFyc2VyLmV4ZWMocmVnZXgudG9TdHJpbmcoKSksXG4gICAgICAgIF9zZXJpYWxpemVkUmVnZXhQYXJzZTIgPSBfc2xpY2VkVG9BcnJheShfc2VyaWFsaXplZFJlZ2V4UGFyc2UsIDMpLFxuICAgICAgICByZWdleFN0cmluZyA9IF9zZXJpYWxpemVkUmVnZXhQYXJzZTJbMV0sXG4gICAgICAgIHJlZ2V4RmxhZ3MgPSBfc2VyaWFsaXplZFJlZ2V4UGFyc2UyWzJdO1xuXG4gICAgaW52YXJpYW50KCFyZWdleEZsYWdzLCBcIlJlZ0V4cCBmbGFncyBhcmUgbm90IHN1cHBvcnRlZC4gQ2hhbmdlIC9cIi5jb25jYXQocmVnZXhTdHJpbmcsIFwiL1wiKS5jb25jYXQocmVnZXhGbGFncywgXCIgaW50byAvXCIpLmNvbmNhdChyZWdleFN0cmluZywgXCIvXCIpKTtcbiAgICByZXR1cm4gXCIoXCIuY29uY2F0KHJlZ2V4U3RyaW5nLCBcIilcIik7XG4gIH0pLmpvaW4oJ3wnKSwgJ2cnKTtcbn07XG5cbnZhciBjb3VudFBsYWNlaG9sZGVycyA9IGZ1bmN0aW9uIGNvdW50UGxhY2Vob2xkZXJzKG1hcmt1cCkge1xuICB2YXIgY291bnQgPSAwO1xuICBpZiAobWFya3VwLmluZGV4T2YoJ19faWRfXycpID49IDApIGNvdW50Kys7XG4gIGlmIChtYXJrdXAuaW5kZXhPZignX19kaXNwbGF5X18nKSA+PSAwKSBjb3VudCsrO1xuICByZXR1cm4gY291bnQ7XG59O1xuXG52YXIgZW1wdHlGbiA9IGZ1bmN0aW9uIGVtcHR5Rm4oKSB7fTsgLy8gRmluZHMgYWxsIG9jY3VycmVuY2VzIG9mIHRoZSBtYXJrdXAgaW4gdGhlIHZhbHVlIGFuZCBjYWxscyB0aGUgYG1hcmt1cEl0ZXJhdGVlYCBjYWxsYmFjayBmb3IgZWFjaCBvZiB0aGVtLlxuLy8gVGhlIG9wdGlvbmFsIGB0ZXh0SXRlcmF0ZWVgIGNhbGxiYWNrIGlzIGNhbGxlZCBmb3IgZWFjaCBwbGFpbiB0ZXh0IHJhbmdlcyBpbiBiZXR3ZWVuIHRoZXNlIG1hcmt1cCBvY2N1cnJlbmNlcy5cblxuXG52YXIgaXRlcmF0ZU1lbnRpb25zTWFya3VwID0gZnVuY3Rpb24gaXRlcmF0ZU1lbnRpb25zTWFya3VwKHZhbHVlLCBjb25maWcsIG1hcmt1cEl0ZXJhdGVlKSB7XG4gIHZhciB0ZXh0SXRlcmF0ZWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGVtcHR5Rm47XG4gIHZhciByZWdleCA9IGNvbWJpbmVSZWdFeHBzKGNvbmZpZy5tYXAoZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gYy5yZWdleDtcbiAgfSkpO1xuICB2YXIgYWNjT2Zmc2V0ID0gMjsgLy8gZmlyc3QgaXMgd2hvbGUgbWF0Y2gsIHNlY29uZCBpcyB0aGUgZm9yIHRoZSBjYXB0dXJpbmcgZ3JvdXAgb2YgZmlyc3QgcmVnZXhwIGNvbXBvbmVudFxuXG4gIHZhciBjYXB0dXJlR3JvdXBPZmZzZXRzID0gY29uZmlnLm1hcChmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBtYXJrdXAgPSBfcmVmLm1hcmt1cDtcbiAgICB2YXIgcmVzdWx0ID0gYWNjT2Zmc2V0OyAvLyArIDEgaXMgZm9yIHRoZSBjYXB0dXJpbmcgZ3JvdXAgd2UgYWRkIGFyb3VuZCBlYWNoIHJlZ2V4cCBjb21wb25lbnQgaW4gY29tYmluZVJlZ0V4cHNcblxuICAgIGFjY09mZnNldCArPSBjb3VudFBsYWNlaG9sZGVycyhtYXJrdXApICsgMTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbiAgdmFyIG1hdGNoO1xuICB2YXIgc3RhcnQgPSAwO1xuICB2YXIgY3VycmVudFBsYWluVGV4dEluZGV4ID0gMDsgLy8gZGV0ZWN0IGFsbCBtZW50aW9uIG1hcmt1cCBvY2N1cnJlbmNlcyBpbiB0aGUgdmFsdWUgYW5kIGl0ZXJhdGUgdGhlIG1hdGNoZXNcblxuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyh2YWx1ZSkpICE9PSBudWxsKSB7XG4gICAgdmFyIG9mZnNldCA9IGNhcHR1cmVHcm91cE9mZnNldHMuZmluZChmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuICEhbWF0Y2hbb107XG4gICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9vcC1mdW5jXG5cbiAgICB2YXIgbWVudGlvbkNoaWxkSW5kZXggPSBjYXB0dXJlR3JvdXBPZmZzZXRzLmluZGV4T2Yob2Zmc2V0KTtcbiAgICB2YXIgX2NvbmZpZyRtZW50aW9uQ2hpbGRJID0gY29uZmlnW21lbnRpb25DaGlsZEluZGV4XSxcbiAgICAgICAgbWFya3VwID0gX2NvbmZpZyRtZW50aW9uQ2hpbGRJLm1hcmt1cCxcbiAgICAgICAgZGlzcGxheVRyYW5zZm9ybSA9IF9jb25maWckbWVudGlvbkNoaWxkSS5kaXNwbGF5VHJhbnNmb3JtO1xuICAgIHZhciBpZFBvcyA9IG9mZnNldCArIGZpbmRQb3NpdGlvbk9mQ2FwdHVyaW5nR3JvdXAobWFya3VwLCAnaWQnKTtcbiAgICB2YXIgZGlzcGxheVBvcyA9IG9mZnNldCArIGZpbmRQb3NpdGlvbk9mQ2FwdHVyaW5nR3JvdXAobWFya3VwLCAnZGlzcGxheScpO1xuICAgIHZhciBpZCA9IG1hdGNoW2lkUG9zXTtcbiAgICB2YXIgZGlzcGxheSA9IGRpc3BsYXlUcmFuc2Zvcm0oaWQsIG1hdGNoW2Rpc3BsYXlQb3NdKTtcbiAgICB2YXIgc3Vic3RyID0gdmFsdWUuc3Vic3RyaW5nKHN0YXJ0LCBtYXRjaC5pbmRleCk7XG4gICAgdGV4dEl0ZXJhdGVlKHN1YnN0ciwgc3RhcnQsIGN1cnJlbnRQbGFpblRleHRJbmRleCk7XG4gICAgY3VycmVudFBsYWluVGV4dEluZGV4ICs9IHN1YnN0ci5sZW5ndGg7XG4gICAgbWFya3VwSXRlcmF0ZWUobWF0Y2hbMF0sIG1hdGNoLmluZGV4LCBjdXJyZW50UGxhaW5UZXh0SW5kZXgsIGlkLCBkaXNwbGF5LCBtZW50aW9uQ2hpbGRJbmRleCwgc3RhcnQpO1xuICAgIGN1cnJlbnRQbGFpblRleHRJbmRleCArPSBkaXNwbGF5Lmxlbmd0aDtcbiAgICBzdGFydCA9IHJlZ2V4Lmxhc3RJbmRleDtcbiAgfVxuXG4gIGlmIChzdGFydCA8IHZhbHVlLmxlbmd0aCkge1xuICAgIHRleHRJdGVyYXRlZSh2YWx1ZS5zdWJzdHJpbmcoc3RhcnQpLCBzdGFydCwgY3VycmVudFBsYWluVGV4dEluZGV4KTtcbiAgfVxufTtcblxudmFyIGdldFBsYWluVGV4dCA9IGZ1bmN0aW9uIGdldFBsYWluVGV4dCh2YWx1ZSwgY29uZmlnKSB7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgaXRlcmF0ZU1lbnRpb25zTWFya3VwKHZhbHVlLCBjb25maWcsIGZ1bmN0aW9uIChtYXRjaCwgaW5kZXgsIHBsYWluVGV4dEluZGV4LCBpZCwgZGlzcGxheSkge1xuICAgIHJlc3VsdCArPSBkaXNwbGF5O1xuICB9LCBmdW5jdGlvbiAocGxhaW5UZXh0KSB7XG4gICAgcmVzdWx0ICs9IHBsYWluVGV4dDtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyBpbiB0aGUgbWFya2VkIHVwIHZhbHVlIHN0cmluZy5cbi8vIElmIHRoZSBwYXNzZWQgY2hhcmFjdGVyIGluZGV4IGxpZXMgaW5zaWRlIGEgbWVudGlvbiwgdGhlIHZhbHVlIG9mIGBpbk1hcmt1cENvcnJlY3Rpb25gIGRlZmluZXMgdGhlXG4vLyBjb3JyZWN0aW9uIHRvIGFwcGx5OlxuLy8gICAtICdTVEFSVCcgdG8gcmV0dXJuIHRoZSBpbmRleCBvZiB0aGUgbWVudGlvbiBtYXJrdXAncyBmaXJzdCBjaGFyIChkZWZhdWx0KVxuLy8gICAtICdFTkQnIHRvIHJldHVybiB0aGUgaW5kZXggYWZ0ZXIgaXRzIGxhc3QgY2hhclxuLy8gICAtICdOVUxMJyB0byByZXR1cm4gbnVsbFxuXG52YXIgbWFwUGxhaW5UZXh0SW5kZXggPSBmdW5jdGlvbiBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBpbmRleEluUGxhaW5UZXh0KSB7XG4gIHZhciBpbk1hcmt1cENvcnJlY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICdTVEFSVCc7XG5cbiAgaWYgKHR5cGVvZiBpbmRleEluUGxhaW5UZXh0ICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBpbmRleEluUGxhaW5UZXh0O1xuICB9XG5cbiAgdmFyIHJlc3VsdDtcblxuICB2YXIgdGV4dEl0ZXJhdGVlID0gZnVuY3Rpb24gdGV4dEl0ZXJhdGVlKHN1YnN0ciwgaW5kZXgsIHN1YnN0clBsYWluVGV4dEluZGV4KSB7XG4gICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICBpZiAoc3Vic3RyUGxhaW5UZXh0SW5kZXggKyBzdWJzdHIubGVuZ3RoID49IGluZGV4SW5QbGFpblRleHQpIHtcbiAgICAgIC8vIGZvdW5kIHRoZSBjb3JyZXNwb25kaW5nIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50IHBsYWluIHRleHQgcmFuZ2VcbiAgICAgIHJlc3VsdCA9IGluZGV4ICsgaW5kZXhJblBsYWluVGV4dCAtIHN1YnN0clBsYWluVGV4dEluZGV4O1xuICAgIH1cbiAgfTtcblxuICB2YXIgbWFya3VwSXRlcmF0ZWUgPSBmdW5jdGlvbiBtYXJrdXBJdGVyYXRlZShtYXJrdXAsIGluZGV4LCBtZW50aW9uUGxhaW5UZXh0SW5kZXgsIGlkLCBkaXNwbGF5LCBjaGlsZEluZGV4LCBsYXN0TWVudGlvbkVuZEluZGV4KSB7XG4gICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICBpZiAobWVudGlvblBsYWluVGV4dEluZGV4ICsgZGlzcGxheS5sZW5ndGggPiBpbmRleEluUGxhaW5UZXh0KSB7XG4gICAgICAvLyBmb3VuZCB0aGUgY29ycmVzcG9uZGluZyBwb3NpdGlvbiBpbnNpZGUgY3VycmVudCBtYXRjaCxcbiAgICAgIC8vIHJldHVybiB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG9yIGFmdGVyIHRoZSBsYXN0IGNoYXIgb2YgdGhlIG1hdGNoaW5nIG1hcmt1cFxuICAgICAgLy8gZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGBpbk1hcmt1cENvcnJlY3Rpb25gXG4gICAgICBpZiAoaW5NYXJrdXBDb3JyZWN0aW9uID09PSAnTlVMTCcpIHtcbiAgICAgICAgcmVzdWx0ID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGluZGV4ICsgKGluTWFya3VwQ29ycmVjdGlvbiA9PT0gJ0VORCcgPyBtYXJrdXAubGVuZ3RoIDogMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGl0ZXJhdGVNZW50aW9uc01hcmt1cCh2YWx1ZSwgY29uZmlnLCBtYXJrdXBJdGVyYXRlZSwgdGV4dEl0ZXJhdGVlKTsgLy8gd2hlbiBhIG1lbnRpb24gaXMgYXQgdGhlIGVuZCBvZiB0aGUgdmFsdWUgYW5kIHdlIHdhbnQgdG8gZ2V0IHRoZSBjYXJldCBwb3NpdGlvblxuICAvLyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcsIHJlc3VsdCBpcyB1bmRlZmluZWRcblxuICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyB2YWx1ZS5sZW5ndGggOiByZXN1bHQ7XG59O1xuXG52YXIgc3BsaWNlU3RyaW5nID0gZnVuY3Rpb24gc3BsaWNlU3RyaW5nKHN0ciwgc3RhcnQsIGVuZCwgaW5zZXJ0KSB7XG4gIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIHN0YXJ0KSArIGluc2VydCArIHN0ci5zdWJzdHJpbmcoZW5kKTtcbn07XG5cbi8vIGd1aWRlZCBieSB0aGUgdGV4dGFyZWEgdGV4dCBzZWxlY3Rpb24gcmFuZ2VzIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNoYW5nZVxuXG52YXIgYXBwbHlDaGFuZ2VUb1ZhbHVlID0gZnVuY3Rpb24gYXBwbHlDaGFuZ2VUb1ZhbHVlKHZhbHVlLCBwbGFpblRleHRWYWx1ZSwgX3JlZiwgY29uZmlnKSB7XG4gIHZhciBzZWxlY3Rpb25TdGFydEJlZm9yZSA9IF9yZWYuc2VsZWN0aW9uU3RhcnRCZWZvcmUsXG4gICAgICBzZWxlY3Rpb25FbmRCZWZvcmUgPSBfcmVmLnNlbGVjdGlvbkVuZEJlZm9yZSxcbiAgICAgIHNlbGVjdGlvbkVuZEFmdGVyID0gX3JlZi5zZWxlY3Rpb25FbmRBZnRlcjtcbiAgdmFyIG9sZFBsYWluVGV4dFZhbHVlID0gZ2V0UGxhaW5UZXh0KHZhbHVlLCBjb25maWcpO1xuICB2YXIgbGVuZ3RoRGVsdGEgPSBvbGRQbGFpblRleHRWYWx1ZS5sZW5ndGggLSBwbGFpblRleHRWYWx1ZS5sZW5ndGg7XG5cbiAgaWYgKHNlbGVjdGlvblN0YXJ0QmVmb3JlID09PSAndW5kZWZpbmVkJykge1xuICAgIHNlbGVjdGlvblN0YXJ0QmVmb3JlID0gc2VsZWN0aW9uRW5kQWZ0ZXIgKyBsZW5ndGhEZWx0YTtcbiAgfVxuXG4gIGlmIChzZWxlY3Rpb25FbmRCZWZvcmUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgc2VsZWN0aW9uRW5kQmVmb3JlID0gc2VsZWN0aW9uU3RhcnRCZWZvcmU7XG4gIH0gLy8gRml4ZXMgYW4gaXNzdWUgd2l0aCByZXBsYWNpbmcgY29tYmluZWQgY2hhcmFjdGVycyBmb3IgY29tcGxleCBpbnB1dC4gRWcgbGlrZSBhY2VudGVkIGxldHRlcnMgb24gT1NYXG5cblxuICBpZiAoc2VsZWN0aW9uU3RhcnRCZWZvcmUgPT09IHNlbGVjdGlvbkVuZEJlZm9yZSAmJiBzZWxlY3Rpb25FbmRCZWZvcmUgPT09IHNlbGVjdGlvbkVuZEFmdGVyICYmIG9sZFBsYWluVGV4dFZhbHVlLmxlbmd0aCA9PT0gcGxhaW5UZXh0VmFsdWUubGVuZ3RoKSB7XG4gICAgc2VsZWN0aW9uU3RhcnRCZWZvcmUgPSBzZWxlY3Rpb25TdGFydEJlZm9yZSAtIDE7XG4gIH0gLy8gZXh0cmFjdCB0aGUgaW5zZXJ0aW9uIGZyb20gdGhlIG5ldyBwbGFpbiB0ZXh0IHZhbHVlXG5cblxuICB2YXIgaW5zZXJ0ID0gcGxhaW5UZXh0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnRCZWZvcmUsIHNlbGVjdGlvbkVuZEFmdGVyKTsgLy8gaGFuZGxpbmcgZm9yIEJhY2tzcGFjZSBrZXkgd2l0aCBubyByYW5nZSBzZWxlY3Rpb25cblxuICB2YXIgc3BsaWNlU3RhcnQgPSBNYXRoLm1pbihzZWxlY3Rpb25TdGFydEJlZm9yZSwgc2VsZWN0aW9uRW5kQWZ0ZXIpO1xuICB2YXIgc3BsaWNlRW5kID0gc2VsZWN0aW9uRW5kQmVmb3JlO1xuXG4gIGlmIChzZWxlY3Rpb25TdGFydEJlZm9yZSA9PT0gc2VsZWN0aW9uRW5kQWZ0ZXIpIHtcbiAgICAvLyBoYW5kbGluZyBmb3IgRGVsZXRlIGtleSB3aXRoIG5vIHJhbmdlIHNlbGVjdGlvblxuICAgIHNwbGljZUVuZCA9IE1hdGgubWF4KHNlbGVjdGlvbkVuZEJlZm9yZSwgc2VsZWN0aW9uU3RhcnRCZWZvcmUgKyBsZW5ndGhEZWx0YSk7XG4gIH1cblxuICB2YXIgbWFwcGVkU3BsaWNlU3RhcnQgPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzcGxpY2VTdGFydCwgJ1NUQVJUJyk7XG4gIHZhciBtYXBwZWRTcGxpY2VFbmQgPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzcGxpY2VFbmQsICdFTkQnKTtcbiAgdmFyIGNvbnRyb2xTcGxpY2VTdGFydCA9IG1hcFBsYWluVGV4dEluZGV4KHZhbHVlLCBjb25maWcsIHNwbGljZVN0YXJ0LCAnTlVMTCcpO1xuICB2YXIgY29udHJvbFNwbGljZUVuZCA9IG1hcFBsYWluVGV4dEluZGV4KHZhbHVlLCBjb25maWcsIHNwbGljZUVuZCwgJ05VTEwnKTtcbiAgdmFyIHdpbGxSZW1vdmVNZW50aW9uID0gY29udHJvbFNwbGljZVN0YXJ0ID09PSBudWxsIHx8IGNvbnRyb2xTcGxpY2VFbmQgPT09IG51bGw7XG4gIHZhciBuZXdWYWx1ZSA9IHNwbGljZVN0cmluZyh2YWx1ZSwgbWFwcGVkU3BsaWNlU3RhcnQsIG1hcHBlZFNwbGljZUVuZCwgaW5zZXJ0KTtcblxuICBpZiAoIXdpbGxSZW1vdmVNZW50aW9uKSB7XG4gICAgLy8gdGVzdCBmb3IgYXV0by1jb21wbGV0aW9uIGNoYW5nZXNcbiAgICB2YXIgY29udHJvbFBsYWluVGV4dFZhbHVlID0gZ2V0UGxhaW5UZXh0KG5ld1ZhbHVlLCBjb25maWcpO1xuXG4gICAgaWYgKGNvbnRyb2xQbGFpblRleHRWYWx1ZSAhPT0gcGxhaW5UZXh0VmFsdWUpIHtcbiAgICAgIC8vIHNvbWUgYXV0by1jb3JyZWN0aW9uIGlzIGdvaW5nIG9uXG4gICAgICAvLyBmaW5kIHN0YXJ0IG9mIGRpZmZcbiAgICAgIHNwbGljZVN0YXJ0ID0gMDtcblxuICAgICAgd2hpbGUgKHBsYWluVGV4dFZhbHVlW3NwbGljZVN0YXJ0XSA9PT0gY29udHJvbFBsYWluVGV4dFZhbHVlW3NwbGljZVN0YXJ0XSkge1xuICAgICAgICBzcGxpY2VTdGFydCsrO1xuICAgICAgfSAvLyBleHRyYWN0IGF1dG8tY29ycmVjdGVkIGluc2VydGlvblxuXG5cbiAgICAgIGluc2VydCA9IHBsYWluVGV4dFZhbHVlLnNsaWNlKHNwbGljZVN0YXJ0LCBzZWxlY3Rpb25FbmRBZnRlcik7IC8vIGZpbmQgaW5kZXggb2YgdGhlIHVuY2hhbmdlZCByZW1haW5kZXJcblxuICAgICAgc3BsaWNlRW5kID0gb2xkUGxhaW5UZXh0VmFsdWUubGFzdEluZGV4T2YocGxhaW5UZXh0VmFsdWUuc3Vic3RyaW5nKHNlbGVjdGlvbkVuZEFmdGVyKSk7IC8vIHJlLW1hcCB0aGUgY29ycmVjdGVkIGluZGljZXNcblxuICAgICAgbWFwcGVkU3BsaWNlU3RhcnQgPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzcGxpY2VTdGFydCwgJ1NUQVJUJyk7XG4gICAgICBtYXBwZWRTcGxpY2VFbmQgPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzcGxpY2VFbmQsICdFTkQnKTtcbiAgICAgIG5ld1ZhbHVlID0gc3BsaWNlU3RyaW5nKHZhbHVlLCBtYXBwZWRTcGxpY2VTdGFydCwgbWFwcGVkU3BsaWNlRW5kLCBpbnNlcnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdWYWx1ZTtcbn07XG5cbi8vIHJldHVybnMgYSB0aGUgaW5kZXggb2Ygb2YgdGhlIGZpcnN0IGNoYXIgb2YgdGhlIG1lbnRpb24gaW4gdGhlIHBsYWluIHRleHQuXG4vLyBJZiBpbmRleEluUGxhaW5UZXh0IGRvZXMgbm90IGxpZSBpbnNpZGUgYSBtZW50aW9uLCByZXR1cm5zIGluZGV4SW5QbGFpblRleHQuXG5cbnZhciBmaW5kU3RhcnRPZk1lbnRpb25JblBsYWluVGV4dCA9IGZ1bmN0aW9uIGZpbmRTdGFydE9mTWVudGlvbkluUGxhaW5UZXh0KHZhbHVlLCBjb25maWcsIGluZGV4SW5QbGFpblRleHQpIHtcbiAgdmFyIHJlc3VsdCA9IGluZGV4SW5QbGFpblRleHQ7XG4gIHZhciBmb3VuZE1lbnRpb24gPSBmYWxzZTtcblxuICB2YXIgbWFya3VwSXRlcmF0ZWUgPSBmdW5jdGlvbiBtYXJrdXBJdGVyYXRlZShtYXJrdXAsIGluZGV4LCBtZW50aW9uUGxhaW5UZXh0SW5kZXgsIGlkLCBkaXNwbGF5LCBjaGlsZEluZGV4LCBsYXN0TWVudGlvbkVuZEluZGV4KSB7XG4gICAgaWYgKG1lbnRpb25QbGFpblRleHRJbmRleCA8PSBpbmRleEluUGxhaW5UZXh0ICYmIG1lbnRpb25QbGFpblRleHRJbmRleCArIGRpc3BsYXkubGVuZ3RoID4gaW5kZXhJblBsYWluVGV4dCkge1xuICAgICAgcmVzdWx0ID0gbWVudGlvblBsYWluVGV4dEluZGV4O1xuICAgICAgZm91bmRNZW50aW9uID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgaXRlcmF0ZU1lbnRpb25zTWFya3VwKHZhbHVlLCBjb25maWcsIG1hcmt1cEl0ZXJhdGVlKTtcblxuICBpZiAoZm91bmRNZW50aW9uKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxudmFyIGdldE1lbnRpb25zID0gZnVuY3Rpb24gZ2V0TWVudGlvbnModmFsdWUsIGNvbmZpZykge1xuICB2YXIgbWVudGlvbnMgPSBbXTtcbiAgaXRlcmF0ZU1lbnRpb25zTWFya3VwKHZhbHVlLCBjb25maWcsIGZ1bmN0aW9uIChtYXRjaCwgaW5kZXgsIHBsYWluVGV4dEluZGV4LCBpZCwgZGlzcGxheSwgY2hpbGRJbmRleCwgc3RhcnQpIHtcbiAgICBtZW50aW9ucy5wdXNoKHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIGRpc3BsYXk6IGRpc3BsYXksXG4gICAgICBjaGlsZEluZGV4OiBjaGlsZEluZGV4LFxuICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgcGxhaW5UZXh0SW5kZXg6IHBsYWluVGV4dEluZGV4XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gbWVudGlvbnM7XG59O1xuXG52YXIgZ2V0U3VnZ2VzdGlvbkh0bWxJZCA9IGZ1bmN0aW9uIGdldFN1Z2dlc3Rpb25IdG1sSWQocHJlZml4LCBpZCkge1xuICByZXR1cm4gXCJcIi5jb25jYXQocHJlZml4LCBcIi1cIikuY29uY2F0KGlkKTtcbn07XG5cbnZhciBjb3VudFN1Z2dlc3Rpb25zID0gZnVuY3Rpb24gY291bnRTdWdnZXN0aW9ucyhzdWdnZXN0aW9ucykge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzdWdnZXN0aW9ucykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIF9yZWYpIHtcbiAgICB2YXIgcmVzdWx0cyA9IF9yZWYucmVzdWx0cztcbiAgICByZXR1cm4gYWNjICsgcmVzdWx0cy5sZW5ndGg7XG4gIH0sIDApO1xufTtcblxudmFyIGdldEVuZE9mTGFzdE1lbnRpb24gPSBmdW5jdGlvbiBnZXRFbmRPZkxhc3RNZW50aW9uKHZhbHVlLCBjb25maWcpIHtcbiAgdmFyIG1lbnRpb25zID0gZ2V0TWVudGlvbnModmFsdWUsIGNvbmZpZyk7XG4gIHZhciBsYXN0TWVudGlvbiA9IG1lbnRpb25zW21lbnRpb25zLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gbGFzdE1lbnRpb24gPyBsYXN0TWVudGlvbi5wbGFpblRleHRJbmRleCArIGxhc3RNZW50aW9uLmRpc3BsYXkubGVuZ3RoIDogMDtcbn07XG5cbnZhciBtYXJrdXBUb1JlZ2V4ID0gZnVuY3Rpb24gbWFya3VwVG9SZWdleChtYXJrdXApIHtcbiAgdmFyIGVzY2FwZWRNYXJrdXAgPSBlc2NhcGVSZWdleChtYXJrdXApO1xuICB2YXIgY2hhckFmdGVyRGlzcGxheSA9IG1hcmt1cFttYXJrdXAuaW5kZXhPZihQTEFDRUhPTERFUlMuZGlzcGxheSkgKyBQTEFDRUhPTERFUlMuZGlzcGxheS5sZW5ndGhdO1xuICB2YXIgY2hhckFmdGVySWQgPSBtYXJrdXBbbWFya3VwLmluZGV4T2YoUExBQ0VIT0xERVJTLmlkKSArIFBMQUNFSE9MREVSUy5pZC5sZW5ndGhdO1xuICByZXR1cm4gbmV3IFJlZ0V4cChlc2NhcGVkTWFya3VwLnJlcGxhY2UoUExBQ0VIT0xERVJTLmRpc3BsYXksIFwiKFteXCIuY29uY2F0KGVzY2FwZVJlZ2V4KGNoYXJBZnRlckRpc3BsYXkgfHwgJycpLCBcIl0rPylcIikpLnJlcGxhY2UoUExBQ0VIT0xERVJTLmlkLCBcIihbXlwiLmNvbmNhdChlc2NhcGVSZWdleChjaGFyQWZ0ZXJJZCB8fCAnJyksIFwiXSs/KVwiKSkpO1xufTtcblxudmFyIHJlYWRDb25maWdGcm9tQ2hpbGRyZW4gPSBmdW5jdGlvbiByZWFkQ29uZmlnRnJvbUNoaWxkcmVuKGNoaWxkcmVuKSB7XG4gIHJldHVybiBDaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgX3JlZiRwcm9wcyA9IF9yZWYucHJvcHMsXG4gICAgICAgIG1hcmt1cCA9IF9yZWYkcHJvcHMubWFya3VwLFxuICAgICAgICByZWdleCA9IF9yZWYkcHJvcHMucmVnZXgsXG4gICAgICAgIGRpc3BsYXlUcmFuc2Zvcm0gPSBfcmVmJHByb3BzLmRpc3BsYXlUcmFuc2Zvcm07XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hcmt1cDogbWFya3VwLFxuICAgICAgcmVnZXg6IHJlZ2V4ID8gY29lcmNlQ2FwdHVyaW5nR3JvdXBzKHJlZ2V4LCBtYXJrdXApIDogbWFya3VwVG9SZWdleChtYXJrdXApLFxuICAgICAgZGlzcGxheVRyYW5zZm9ybTogZGlzcGxheVRyYW5zZm9ybSB8fCBmdW5jdGlvbiAoaWQsIGRpc3BsYXkpIHtcbiAgICAgICAgcmV0dXJuIGRpc3BsYXkgfHwgaWQ7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG59OyAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgY3VzdG9tIHJlZ2V4IGRlZmluZXMgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGNhcHR1cmluZyBncm91cHNcblxuXG52YXIgY29lcmNlQ2FwdHVyaW5nR3JvdXBzID0gZnVuY3Rpb24gY29lcmNlQ2FwdHVyaW5nR3JvdXBzKHJlZ2V4LCBtYXJrdXApIHtcbiAgdmFyIG51bWJlck9mR3JvdXBzID0gbmV3IFJlZ0V4cChyZWdleC50b1N0cmluZygpICsgJ3wnKS5leGVjKCcnKS5sZW5ndGggLSAxO1xuICB2YXIgbnVtYmVyT2ZQbGFjZWhvbGRlcnMgPSBjb3VudFBsYWNlaG9sZGVycyhtYXJrdXApO1xuICBpbnZhcmlhbnQobnVtYmVyT2ZHcm91cHMgPT09IG51bWJlck9mUGxhY2Vob2xkZXJzLCBcIk51bWJlciBvZiBjYXB0dXJpbmcgZ3JvdXBzIGluIFJlZ0V4cCBcIi5jb25jYXQocmVnZXgudG9TdHJpbmcoKSwgXCIgKFwiKS5jb25jYXQobnVtYmVyT2ZHcm91cHMsIFwiKSBkb2VzIG5vdCBtYXRjaCB0aGUgbnVtYmVyIG9mIHBsYWNlaG9sZGVycyBpbiB0aGUgbWFya3VwICdcIikuY29uY2F0KG1hcmt1cCwgXCInIChcIikuY29uY2F0KG51bWJlck9mUGxhY2Vob2xkZXJzLCBcIilcIikpO1xuICByZXR1cm4gcmVnZXg7XG59O1xuXG52YXIgbWFrZU1lbnRpb25zTWFya3VwID0gZnVuY3Rpb24gbWFrZU1lbnRpb25zTWFya3VwKG1hcmt1cCwgaWQsIGRpc3BsYXkpIHtcbiAgcmV0dXJuIG1hcmt1cC5yZXBsYWNlKFBMQUNFSE9MREVSUy5pZCwgaWQpLnJlcGxhY2UoUExBQ0VIT0xERVJTLmRpc3BsYXksIGRpc3BsYXkpO1xufTtcblxuLy8gVGhpcyBjb250YWlucyBhbGwgdGhlIGxhdGluIGxldHRlcnMgYW5kIHRoZSByZWdleCB0aGF0IG1hdGNoIHRoZXNlIGxldHRlcnMgd2l0aCBkaWFjcml0aWNzXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy85OTA5MDQvcmVtb3ZlLWFjY2VudHMtZGlhY3JpdGljcy1pbi1hLXN0cmluZy1pbi1qYXZhc2NyaXB0XG52YXIgbGV0dGVyc0RpYWNyaXRpY3MgPSBbe1xuICBiYXNlOiAnQScsXG4gIGxldHRlcnM6IC8oJiM2NTt8JiM5Mzk4O3wmIzY1MzEzO3wmIzE5Mjt8JiMxOTM7fCYjMTk0O3wmIzc4NDY7fCYjNzg0NDt8JiM3ODUwO3wmIzc4NDg7fCYjMTk1O3wmIzI1Njt8JiMyNTg7fCYjNzg1Njt8JiM3ODU0O3wmIzc4NjA7fCYjNzg1ODt8JiM1NTA7fCYjNDgwO3wmIzE5Njt8JiM0Nzg7fCYjNzg0Mjt8JiMxOTc7fCYjNTA2O3wmIzQ2MTt8JiM1MTI7fCYjNTE0O3wmIzc4NDA7fCYjNzg1Mjt8JiM3ODYyO3wmIzc2ODA7fCYjMjYwO3wmIzU3MDt8JiMxMTM3NTt8W1xcdTAwNDFcXHUyNEI2XFx1RkYyMVxcdTAwQzBcXHUwMEMxXFx1MDBDMlxcdTFFQTZcXHUxRUE0XFx1MUVBQVxcdTFFQThcXHUwMEMzXFx1MDEwMFxcdTAxMDJcXHUxRUIwXFx1MUVBRVxcdTFFQjRcXHUxRUIyXFx1MDIyNlxcdTAxRTBcXHUwMEM0XFx1MDFERVxcdTFFQTJcXHUwMEM1XFx1MDFGQVxcdTAxQ0RcXHUwMjAwXFx1MDIwMlxcdTFFQTBcXHUxRUFDXFx1MUVCNlxcdTFFMDBcXHUwMTA0XFx1MDIzQVxcdTJDNkZdKS9nXG59LCB7XG4gIGJhc2U6ICdBQScsXG4gIGxldHRlcnM6IC8oJiM0MjgwMjt8W1xcdUE3MzJdKS9nXG59LCB7XG4gIGJhc2U6ICdBRScsXG4gIGxldHRlcnM6IC8oJiMxOTg7fCYjNTA4O3wmIzQ4Mjt8W1xcdTAwQzZcXHUwMUZDXFx1MDFFMl0pL2dcbn0sIHtcbiAgYmFzZTogJ0FPJyxcbiAgbGV0dGVyczogLygmIzQyODA0O3xbXFx1QTczNF0pL2dcbn0sIHtcbiAgYmFzZTogJ0FVJyxcbiAgbGV0dGVyczogLygmIzQyODA2O3xbXFx1QTczNl0pL2dcbn0sIHtcbiAgYmFzZTogJ0FWJyxcbiAgbGV0dGVyczogLygmIzQyODA4O3wmIzQyODEwO3xbXFx1QTczOFxcdUE3M0FdKS9nXG59LCB7XG4gIGJhc2U6ICdBWScsXG4gIGxldHRlcnM6IC8oJiM0MjgxMjt8W1xcdUE3M0NdKS9nXG59LCB7XG4gIGJhc2U6ICdCJyxcbiAgbGV0dGVyczogLygmIzY2O3wmIzkzOTk7fCYjNjUzMTQ7fCYjNzY4Mjt8JiM3Njg0O3wmIzc2ODY7fCYjNTc5O3wmIzM4Njt8JiMzODU7fFtcXHUwMDQyXFx1MjRCN1xcdUZGMjJcXHUxRTAyXFx1MUUwNFxcdTFFMDZcXHUwMjQzXFx1MDE4MlxcdTAxODFdKS9nXG59LCB7XG4gIGJhc2U6ICdDJyxcbiAgbGV0dGVyczogLygmIzY3O3wmIzk0MDA7fCYjNjUzMTU7fCYjMjYyO3wmIzI2NDt8JiMyNjY7fCYjMjY4O3wmIzE5OTt8JiM3Njg4O3wmIzM5MTt8JiM1NzE7fCYjNDI4MTQ7fFtcXHUwMDQzXFx1MjRCOFxcdUZGMjNcXHUwMTA2XFx1MDEwOFxcdTAxMEFcXHUwMTBDXFx1MDBDN1xcdTFFMDhcXHUwMTg3XFx1MDIzQlxcdUE3M0VdKS9nXG59LCB7XG4gIGJhc2U6ICdEJyxcbiAgbGV0dGVyczogLygmIzY4O3wmIzk0MDE7fCYjNjUzMTY7fCYjNzY5MDt8JiMyNzA7fCYjNzY5Mjt8JiM3Njk2O3wmIzc2OTg7fCYjNzY5NDt8JiMyNzI7fCYjMzk1O3wmIzM5NDt8JiMzOTM7fCYjNDI4NzM7fCYjMjA4O3xbXFx1MDA0NFxcdTI0QjlcXHVGRjI0XFx1MUUwQVxcdTAxMEVcXHUxRTBDXFx1MUUxMFxcdTFFMTJcXHUxRTBFXFx1MDExMFxcdTAxOEJcXHUwMThBXFx1MDE4OVxcdUE3NzlcXHUwMEQwXSkvZ1xufSwge1xuICBiYXNlOiAnRFonLFxuICBsZXR0ZXJzOiAvKCYjNDk3O3wmIzQ1Mjt8W1xcdTAxRjFcXHUwMUM0XSkvZ1xufSwge1xuICBiYXNlOiAnRHonLFxuICBsZXR0ZXJzOiAvKCYjNDk4O3wmIzQ1Mzt8W1xcdTAxRjJcXHUwMUM1XSkvZ1xufSwge1xuICBiYXNlOiAnRScsXG4gIGxldHRlcnM6IC8oJiM2OTt8JiM5NDAyO3wmIzY1MzE3O3wmIzIwMDt8JiMyMDE7fCYjMjAyO3wmIzc4NzI7fCYjNzg3MDt8JiM3ODc2O3wmIzc4NzQ7fCYjNzg2ODt8JiMyNzQ7fCYjNzcwMDt8JiM3NzAyO3wmIzI3Njt8JiMyNzg7fCYjMjAzO3wmIzc4NjY7fCYjMjgyO3wmIzUxNjt8JiM1MTg7fCYjNzg2NDt8JiM3ODc4O3wmIzU1Mjt8JiM3NzA4O3wmIzI4MDt8JiM3NzA0O3wmIzc3MDY7fCYjNDAwO3wmIzM5ODt8W1xcdTAwNDVcXHUyNEJBXFx1RkYyNVxcdTAwQzhcXHUwMEM5XFx1MDBDQVxcdTFFQzBcXHUxRUJFXFx1MUVDNFxcdTFFQzJcXHUxRUJDXFx1MDExMlxcdTFFMTRcXHUxRTE2XFx1MDExNFxcdTAxMTZcXHUwMENCXFx1MUVCQVxcdTAxMUFcXHUwMjA0XFx1MDIwNlxcdTFFQjhcXHUxRUM2XFx1MDIyOFxcdTFFMUNcXHUwMTE4XFx1MUUxOFxcdTFFMUFcXHUwMTkwXFx1MDE4RV0pL2dcbn0sIHtcbiAgYmFzZTogJ0YnLFxuICBsZXR0ZXJzOiAvKCYjNzA7fCYjOTQwMzt8JiM2NTMxODt8JiM3NzEwO3wmIzQwMTt8JiM0Mjg3NTt8W1xcdTAwNDZcXHUyNEJCXFx1RkYyNlxcdTFFMUVcXHUwMTkxXFx1QTc3Ql0pL2dcbn0sIHtcbiAgYmFzZTogJ0cnLFxuICBsZXR0ZXJzOiAvKCYjNzE7fCYjOTQwNDt8JiM2NTMxOTt8JiM1MDA7fCYjMjg0O3wmIzc3MTI7fCYjMjg2O3wmIzI4ODt8JiM0ODY7fCYjMjkwO3wmIzQ4NDt8JiM0MDM7fCYjNDI5MTI7fCYjNDI4Nzc7fCYjNDI4Nzg7fFtcXHUwMDQ3XFx1MjRCQ1xcdUZGMjdcXHUwMUY0XFx1MDExQ1xcdTFFMjBcXHUwMTFFXFx1MDEyMFxcdTAxRTZcXHUwMTIyXFx1MDFFNFxcdTAxOTNcXHVBN0EwXFx1QTc3RFxcdUE3N0VdKS9nXG59LCB7XG4gIGJhc2U6ICdIJyxcbiAgbGV0dGVyczogLygmIzcyO3wmIzk0MDU7fCYjNjUzMjA7fCYjMjkyO3wmIzc3MTQ7fCYjNzcxODt8JiM1NDI7fCYjNzcxNjt8JiM3NzIwO3wmIzc3MjI7fCYjMjk0O3wmIzExMzY3O3wmIzExMzgxO3wmIzQyODkzO3xbXFx1MDA0OFxcdTI0QkRcXHVGRjI4XFx1MDEyNFxcdTFFMjJcXHUxRTI2XFx1MDIxRVxcdTFFMjRcXHUxRTI4XFx1MUUyQVxcdTAxMjZcXHUyQzY3XFx1MkM3NVxcdUE3OERdKS9nXG59LCB7XG4gIGJhc2U6ICdJJyxcbiAgbGV0dGVyczogLygmIzczO3wmIzk0MDY7fCYjNjUzMjE7fCYjMjA0O3wmIzIwNTt8JiMyMDY7fCYjMjk2O3wmIzI5ODt8JiMzMDA7fCYjMzA0O3wmIzIwNzt8JiM3NzI2O3wmIzc4ODA7fCYjNDYzO3wmIzUyMDt8JiM1MjI7fCYjNzg4Mjt8JiMzMDI7fCYjNzcyNDt8JiM0MDc7fFtcXHUwMDQ5XFx1MjRCRVxcdUZGMjlcXHUwMENDXFx1MDBDRFxcdTAwQ0VcXHUwMTI4XFx1MDEyQVxcdTAxMkNcXHUwMTMwXFx1MDBDRlxcdTFFMkVcXHUxRUM4XFx1MDFDRlxcdTAyMDhcXHUwMjBBXFx1MUVDQVxcdTAxMkVcXHUxRTJDXFx1MDE5N10pL2dcbn0sIHtcbiAgYmFzZTogJ0onLFxuICBsZXR0ZXJzOiAvKCYjNzQ7fCYjOTQwNzt8JiM2NTMyMjt8JiMzMDg7fCYjNTg0O3xbXFx1MDA0QVxcdTI0QkZcXHVGRjJBXFx1MDEzNFxcdTAyNDhdKS9nXG59LCB7XG4gIGJhc2U6ICdLJyxcbiAgbGV0dGVyczogLygmIzc1O3wmIzk0MDg7fCYjNjUzMjM7fCYjNzcyODt8JiM0ODg7fCYjNzczMDt8JiMzMTA7fCYjNzczMjt8JiM0MDg7fCYjMTEzNjk7fCYjNDI4MTY7fCYjNDI4MTg7fCYjNDI4MjA7fCYjNDI5MTQ7fFtcXHUwMDRCXFx1MjRDMFxcdUZGMkJcXHUxRTMwXFx1MDFFOFxcdTFFMzJcXHUwMTM2XFx1MUUzNFxcdTAxOThcXHUyQzY5XFx1QTc0MFxcdUE3NDJcXHVBNzQ0XFx1QTdBMl0pL2dcbn0sIHtcbiAgYmFzZTogJ0wnLFxuICBsZXR0ZXJzOiAvKCYjNzY7fCYjOTQwOTt8JiM2NTMyNDt8JiMzMTk7fCYjMzEzO3wmIzMxNzt8JiM3NzM0O3wmIzc3MzY7fCYjMzE1O3wmIzc3NDA7fCYjNzczODt8JiMzMjE7fCYjNTczO3wmIzExMzYyO3wmIzExMzYwO3wmIzQyODI0O3wmIzQyODIyO3wmIzQyODgwO3xbXFx1MDA0Q1xcdTI0QzFcXHVGRjJDXFx1MDEzRlxcdTAxMzlcXHUwMTNEXFx1MUUzNlxcdTFFMzhcXHUwMTNCXFx1MUUzQ1xcdTFFM0FcXHUwMTQxXFx1MDIzRFxcdTJDNjJcXHUyQzYwXFx1QTc0OFxcdUE3NDZcXHVBNzgwXSkvZ1xufSwge1xuICBiYXNlOiAnTEonLFxuICBsZXR0ZXJzOiAvKCYjNDU1O3xbXFx1MDFDN10pL2dcbn0sIHtcbiAgYmFzZTogJ0xqJyxcbiAgbGV0dGVyczogLygmIzQ1Njt8W1xcdTAxQzhdKS9nXG59LCB7XG4gIGJhc2U6ICdNJyxcbiAgbGV0dGVyczogLygmIzc3O3wmIzk0MTA7fCYjNjUzMjU7fCYjNzc0Mjt8JiM3NzQ0O3wmIzc3NDY7fCYjMTEzNzQ7fCYjNDEyO3xbXFx1MDA0RFxcdTI0QzJcXHVGRjJEXFx1MUUzRVxcdTFFNDBcXHUxRTQyXFx1MkM2RVxcdTAxOUNdKS9nXG59LCB7XG4gIGJhc2U6ICdOJyxcbiAgbGV0dGVyczogLygmIzc4O3wmIzk0MTE7fCYjNjUzMjY7fCYjNTA0O3wmIzMyMzt8JiMyMDk7fCYjNzc0ODt8JiMzMjc7fCYjNzc1MDt8JiMzMjU7fCYjNzc1NDt8JiM3NzUyO3wmIzU0NDt8JiM0MTM7fCYjNDI4OTY7fCYjNDI5MTY7fCYjMzMwO3xbXFx1MDA0RVxcdTI0QzNcXHVGRjJFXFx1MDFGOFxcdTAxNDNcXHUwMEQxXFx1MUU0NFxcdTAxNDdcXHUxRTQ2XFx1MDE0NVxcdTFFNEFcXHUxRTQ4XFx1MDIyMFxcdTAxOURcXHVBNzkwXFx1QTdBNFxcdTAxNEFdKS9nXG59LCB7XG4gIGJhc2U6ICdOSicsXG4gIGxldHRlcnM6IC8oJiM0NTg7fFtcXHUwMUNBXSkvZ1xufSwge1xuICBiYXNlOiAnTmonLFxuICBsZXR0ZXJzOiAvKCYjNDU5O3xbXFx1MDFDQl0pL2dcbn0sIHtcbiAgYmFzZTogJ08nLFxuICBsZXR0ZXJzOiAvKCYjNzk7fCYjOTQxMjt8JiM2NTMyNzt8JiMyMTA7fCYjMjExO3wmIzIxMjt8JiM3ODkwO3wmIzc4ODg7fCYjNzg5NDt8JiM3ODkyO3wmIzIxMzt8JiM3NzU2O3wmIzU1Njt8JiM3NzU4O3wmIzMzMjt8JiM3NzYwO3wmIzc3NjI7fCYjMzM0O3wmIzU1ODt8JiM1NjA7fCYjMjE0O3wmIzU1NDt8JiM3ODg2O3wmIzMzNjt8JiM0NjU7fCYjNTI0O3wmIzUyNjt8JiM0MTY7fCYjNzkwMDt8JiM3ODk4O3wmIzc5MDQ7fCYjNzkwMjt8JiM3OTA2O3wmIzc4ODQ7fCYjNzg5Njt8JiM0OTA7fCYjNDkyO3wmIzIxNjt8JiM1MTA7fCYjMzkwO3wmIzQxNTt8JiM0MjgyNjt8JiM0MjgyODt8W1xcdTAwNEZcXHUyNEM0XFx1RkYyRlxcdTAwRDJcXHUwMEQzXFx1MDBENFxcdTFFRDJcXHUxRUQwXFx1MUVENlxcdTFFRDRcXHUwMEQ1XFx1MUU0Q1xcdTAyMkNcXHUxRTRFXFx1MDE0Q1xcdTFFNTBcXHUxRTUyXFx1MDE0RVxcdTAyMkVcXHUwMjMwXFx1MDBENlxcdTAyMkFcXHUxRUNFXFx1MDE1MFxcdTAxRDFcXHUwMjBDXFx1MDIwRVxcdTAxQTBcXHUxRURDXFx1MUVEQVxcdTFFRTBcXHUxRURFXFx1MUVFMlxcdTFFQ0NcXHUxRUQ4XFx1MDFFQVxcdTAxRUNcXHUwMEQ4XFx1MDFGRVxcdTAxODZcXHUwMTlGXFx1QTc0QVxcdUE3NENdKS9nXG59LCB7XG4gIGJhc2U6ICdPRScsXG4gIGxldHRlcnM6IC8oJiMzMzg7fFtcXHUwMTUyXSkvZ1xufSwge1xuICBiYXNlOiAnT0knLFxuICBsZXR0ZXJzOiAvKCYjNDE4O3xbXFx1MDFBMl0pL2dcbn0sIHtcbiAgYmFzZTogJ09PJyxcbiAgbGV0dGVyczogLygmIzQyODMwO3xbXFx1QTc0RV0pL2dcbn0sIHtcbiAgYmFzZTogJ09VJyxcbiAgbGV0dGVyczogLygmIzU0Njt8W1xcdTAyMjJdKS9nXG59LCB7XG4gIGJhc2U6ICdQJyxcbiAgbGV0dGVyczogLygmIzgwO3wmIzk0MTM7fCYjNjUzMjg7fCYjNzc2NDt8JiM3NzY2O3wmIzQyMDt8JiMxMTM2Mzt8JiM0MjgzMjt8JiM0MjgzNDt8JiM0MjgzNjt8W1xcdTAwNTBcXHUyNEM1XFx1RkYzMFxcdTFFNTRcXHUxRTU2XFx1MDFBNFxcdTJDNjNcXHVBNzUwXFx1QTc1MlxcdUE3NTRdKS9nXG59LCB7XG4gIGJhc2U6ICdRJyxcbiAgbGV0dGVyczogLygmIzgxO3wmIzk0MTQ7fCYjNjUzMjk7fCYjNDI4Mzg7fCYjNDI4NDA7fCYjNTg2O3xbXFx1MDA1MVxcdTI0QzZcXHVGRjMxXFx1QTc1NlxcdUE3NThcXHUwMjRBXSkvZ1xufSwge1xuICBiYXNlOiAnUicsXG4gIGxldHRlcnM6IC8oJiM4Mjt8JiM5NDE1O3wmIzY1MzMwO3wmIzM0MDt8JiM3NzY4O3wmIzM0NDt8JiM1Mjg7fCYjNTMwO3wmIzc3NzA7fCYjNzc3Mjt8JiMzNDI7fCYjNzc3NDt8JiM1ODg7fCYjMTEzNjQ7fCYjNDI4NDI7fCYjNDI5MTg7fCYjNDI4ODI7fFtcXHUwMDUyXFx1MjRDN1xcdUZGMzJcXHUwMTU0XFx1MUU1OFxcdTAxNThcXHUwMjEwXFx1MDIxMlxcdTFFNUFcXHUxRTVDXFx1MDE1NlxcdTFFNUVcXHUwMjRDXFx1MkM2NFxcdUE3NUFcXHVBN0E2XFx1QTc4Ml0pL2dcbn0sIHtcbiAgYmFzZTogJ1MnLFxuICBsZXR0ZXJzOiAvKCYjODM7fCYjOTQxNjt8JiM2NTMzMTt8JiM3ODM4O3wmIzM0Njt8JiM3NzgwO3wmIzM0ODt8JiM3Nzc2O3wmIzM1Mjt8JiM3NzgyO3wmIzc3Nzg7fCYjNzc4NDt8JiM1MzY7fCYjMzUwO3wmIzExMzkwO3wmIzQyOTIwO3wmIzQyODg0O3xbXFx1MDA1M1xcdTI0QzhcXHVGRjMzXFx1MUU5RVxcdTAxNUFcXHUxRTY0XFx1MDE1Q1xcdTFFNjBcXHUwMTYwXFx1MUU2NlxcdTFFNjJcXHUxRTY4XFx1MDIxOFxcdTAxNUVcXHUyQzdFXFx1QTdBOFxcdUE3ODRdKS9nXG59LCB7XG4gIGJhc2U6ICdUJyxcbiAgbGV0dGVyczogLygmIzg0O3wmIzk0MTc7fCYjNjUzMzI7fCYjNzc4Njt8JiMzNTY7fCYjNzc4ODt8JiM1Mzg7fCYjMzU0O3wmIzc3OTI7fCYjNzc5MDt8JiMzNTg7fCYjNDI4O3wmIzQzMDt8JiM1NzQ7fCYjNDI4ODY7fFtcXHUwMDU0XFx1MjRDOVxcdUZGMzRcXHUxRTZBXFx1MDE2NFxcdTFFNkNcXHUwMjFBXFx1MDE2MlxcdTFFNzBcXHUxRTZFXFx1MDE2NlxcdTAxQUNcXHUwMUFFXFx1MDIzRVxcdUE3ODZdKS9nXG59LCB7XG4gIGJhc2U6ICdUSCcsXG4gIGxldHRlcnM6IC8oJiMyMjI7fFtcXHUwMERFXSkvZ1xufSwge1xuICBiYXNlOiAnVFonLFxuICBsZXR0ZXJzOiAvKCYjNDI3OTI7fFtcXHVBNzI4XSkvZ1xufSwge1xuICBiYXNlOiAnVScsXG4gIGxldHRlcnM6IC8oJiM4NTt8JiM5NDE4O3wmIzY1MzMzO3wmIzIxNzt8JiMyMTg7fCYjMjE5O3wmIzM2MDt8JiM3ODAwO3wmIzM2Mjt8JiM3ODAyO3wmIzM2NDt8JiMyMjA7fCYjNDc1O3wmIzQ3MTt8JiM0Njk7fCYjNDczO3wmIzc5MTA7fCYjMzY2O3wmIzM2ODt8JiM0Njc7fCYjNTMyO3wmIzUzNDt8JiM0MzE7fCYjNzkxNDt8JiM3OTEyO3wmIzc5MTg7fCYjNzkxNjt8JiM3OTIwO3wmIzc5MDg7fCYjNzc5NDt8JiMzNzA7fCYjNzc5ODt8JiM3Nzk2O3wmIzU4MDt8W1xcdTAwNTVcXHUyNENBXFx1RkYzNVxcdTAwRDlcXHUwMERBXFx1MDBEQlxcdTAxNjhcXHUxRTc4XFx1MDE2QVxcdTFFN0FcXHUwMTZDXFx1MDBEQ1xcdTAxREJcXHUwMUQ3XFx1MDFENVxcdTAxRDlcXHUxRUU2XFx1MDE2RVxcdTAxNzBcXHUwMUQzXFx1MDIxNFxcdTAyMTZcXHUwMUFGXFx1MUVFQVxcdTFFRThcXHUxRUVFXFx1MUVFQ1xcdTFFRjBcXHUxRUU0XFx1MUU3MlxcdTAxNzJcXHUxRTc2XFx1MUU3NFxcdTAyNDRdKS9nXG59LCB7XG4gIGJhc2U6ICdWJyxcbiAgbGV0dGVyczogLygmIzg2O3wmIzk0MTk7fCYjNjUzMzQ7fCYjNzgwNDt8JiM3ODA2O3wmIzQzNDt8JiM0Mjg0Njt8JiM1ODE7fFtcXHUwMDU2XFx1MjRDQlxcdUZGMzZcXHUxRTdDXFx1MUU3RVxcdTAxQjJcXHVBNzVFXFx1MDI0NV0pL2dcbn0sIHtcbiAgYmFzZTogJ1ZZJyxcbiAgbGV0dGVyczogLygmIzQyODQ4O3xbXFx1QTc2MF0pL2dcbn0sIHtcbiAgYmFzZTogJ1cnLFxuICBsZXR0ZXJzOiAvKCYjODc7fCYjOTQyMDt8JiM2NTMzNTt8JiM3ODA4O3wmIzc4MTA7fCYjMzcyO3wmIzc4MTQ7fCYjNzgxMjt8JiM3ODE2O3wmIzExMzc4O3xbXFx1MDA1N1xcdTI0Q0NcXHVGRjM3XFx1MUU4MFxcdTFFODJcXHUwMTc0XFx1MUU4NlxcdTFFODRcXHUxRTg4XFx1MkM3Ml0pL2dcbn0sIHtcbiAgYmFzZTogJ1gnLFxuICBsZXR0ZXJzOiAvKCYjODg7fCYjOTQyMTt8JiM2NTMzNjt8JiM3ODE4O3wmIzc4MjA7fFtcXHUwMDU4XFx1MjRDRFxcdUZGMzhcXHUxRThBXFx1MUU4Q10pL2dcbn0sIHtcbiAgYmFzZTogJ1knLFxuICBsZXR0ZXJzOiAvKCYjODk7fCYjOTQyMjt8JiM2NTMzNzt8JiM3OTIyO3wmIzIyMTt8JiMzNzQ7fCYjNzkyODt8JiM1NjI7fCYjNzgyMjt8JiMzNzY7fCYjNzkyNjt8JiM3OTI0O3wmIzQzNTt8JiM1OTA7fCYjNzkzNDt8W1xcdTAwNTlcXHUyNENFXFx1RkYzOVxcdTFFRjJcXHUwMEREXFx1MDE3NlxcdTFFRjhcXHUwMjMyXFx1MUU4RVxcdTAxNzhcXHUxRUY2XFx1MUVGNFxcdTAxQjNcXHUwMjRFXFx1MUVGRV0pL2dcbn0sIHtcbiAgYmFzZTogJ1onLFxuICBsZXR0ZXJzOiAvKCYjOTA7fCYjOTQyMzt8JiM2NTMzODt8JiMzNzc7fCYjNzgyNDt8JiMzNzk7fCYjMzgxO3wmIzc4MjY7fCYjNzgyODt8JiM0Mzc7fCYjNTQ4O3wmIzExMzkxO3wmIzExMzcxO3wmIzQyODUwO3xbXFx1MDA1QVxcdTI0Q0ZcXHVGRjNBXFx1MDE3OVxcdTFFOTBcXHUwMTdCXFx1MDE3RFxcdTFFOTJcXHUxRTk0XFx1MDFCNVxcdTAyMjRcXHUyQzdGXFx1MkM2QlxcdUE3NjJdKS9nXG59LCB7XG4gIGJhc2U6ICdhJyxcbiAgbGV0dGVyczogLygmIzk3O3wmIzk0MjQ7fCYjNjUzNDU7fCYjNzgzNDt8JiMyMjQ7fCYjMjI1O3wmIzIyNjt8JiM3ODQ3O3wmIzc4NDU7fCYjNzg1MTt8JiM3ODQ5O3wmIzIyNzt8JiMyNTc7fCYjMjU5O3wmIzc4NTc7fCYjNzg1NTt8JiM3ODYxO3wmIzc4NTk7fCYjNTUxO3wmIzQ4MTt8JiMyMjg7fCYjNDc5O3wmIzc4NDM7fCYjMjI5O3wmIzUwNzt8JiM0NjI7fCYjNTEzO3wmIzUxNTt8JiM3ODQxO3wmIzc4NTM7fCYjNzg2Mzt8JiM3NjgxO3wmIzI2MTt8JiMxMTM2NTt8JiM1OTI7fFtcXHUwMDYxXFx1MjREMFxcdUZGNDFcXHUxRTlBXFx1MDBFMFxcdTAwRTFcXHUwMEUyXFx1MUVBN1xcdTFFQTVcXHUxRUFCXFx1MUVBOVxcdTAwRTNcXHUwMTAxXFx1MDEwM1xcdTFFQjFcXHUxRUFGXFx1MUVCNVxcdTFFQjNcXHUwMjI3XFx1MDFFMVxcdTAwRTRcXHUwMURGXFx1MUVBM1xcdTAwRTVcXHUwMUZCXFx1MDFDRVxcdTAyMDFcXHUwMjAzXFx1MUVBMVxcdTFFQURcXHUxRUI3XFx1MUUwMVxcdTAxMDVcXHUyQzY1XFx1MDI1MF0pL2dcbn0sIHtcbiAgYmFzZTogJ2FhJyxcbiAgbGV0dGVyczogLygmIzQyODAzO3xbXFx1QTczM10pL2dcbn0sIHtcbiAgYmFzZTogJ2FlJyxcbiAgbGV0dGVyczogLygmIzIzMDt8JiM1MDk7fCYjNDgzO3xbXFx1MDBFNlxcdTAxRkRcXHUwMUUzXSkvZ1xufSwge1xuICBiYXNlOiAnYW8nLFxuICBsZXR0ZXJzOiAvKCYjNDI4MDU7fFtcXHVBNzM1XSkvZ1xufSwge1xuICBiYXNlOiAnYXUnLFxuICBsZXR0ZXJzOiAvKCYjNDI4MDc7fFtcXHVBNzM3XSkvZ1xufSwge1xuICBiYXNlOiAnYXYnLFxuICBsZXR0ZXJzOiAvKCYjNDI4MDk7fCYjNDI4MTE7fFtcXHVBNzM5XFx1QTczQl0pL2dcbn0sIHtcbiAgYmFzZTogJ2F5JyxcbiAgbGV0dGVyczogLygmIzQyODEzO3xbXFx1QTczRF0pL2dcbn0sIHtcbiAgYmFzZTogJ2InLFxuICBsZXR0ZXJzOiAvKCYjOTg7fCYjOTQyNTt8JiM2NTM0Njt8JiM3NjgzO3wmIzc2ODU7fCYjNzY4Nzt8JiMzODQ7fCYjMzg3O3wmIzU5NTt8W1xcdTAwNjJcXHUyNEQxXFx1RkY0MlxcdTFFMDNcXHUxRTA1XFx1MUUwN1xcdTAxODBcXHUwMTgzXFx1MDI1M10pL2dcbn0sIHtcbiAgYmFzZTogJ2MnLFxuICBsZXR0ZXJzOiAvKCYjOTk7fCYjOTQyNjt8JiM2NTM0Nzt8JiMyNjM7fCYjMjY1O3wmIzI2Nzt8JiMyNjk7fCYjMjMxO3wmIzc2ODk7fCYjMzkyO3wmIzU3Mjt8JiM0MjgxNTt8JiM4NTgwO3xbXFx1MDA2M1xcdTI0RDJcXHVGRjQzXFx1MDEwN1xcdTAxMDlcXHUwMTBCXFx1MDEwRFxcdTAwRTdcXHUxRTA5XFx1MDE4OFxcdTAyM0NcXHVBNzNGXFx1MjE4NF0pL2dcbn0sIHtcbiAgYmFzZTogJ2QnLFxuICBsZXR0ZXJzOiAvKCYjMTAwO3wmIzk0Mjc7fCYjNjUzNDg7fCYjNzY5MTt8JiMyNzE7fCYjNzY5Mzt8JiM3Njk3O3wmIzc2OTk7fCYjNzY5NTt8JiMyNzM7fCYjMzk2O3wmIzU5ODt8JiM1OTk7fCYjNDI4NzQ7fCYjMjQwO3xbXFx1MDA2NFxcdTI0RDNcXHVGRjQ0XFx1MUUwQlxcdTAxMEZcXHUxRTBEXFx1MUUxMVxcdTFFMTNcXHUxRTBGXFx1MDExMVxcdTAxOENcXHUwMjU2XFx1MDI1N1xcdUE3N0FcXHUwMEYwXSkvZ1xufSwge1xuICBiYXNlOiAnZHonLFxuICBsZXR0ZXJzOiAvKCYjNDk5O3wmIzQ1NDt8W1xcdTAxRjNcXHUwMUM2XSkvZ1xufSwge1xuICBiYXNlOiAnZScsXG4gIGxldHRlcnM6IC8oJiMxMDE7fCYjOTQyODt8JiM2NTM0OTt8JiMyMzI7fCYjMjMzO3wmIzIzNDt8JiM3ODczO3wmIzc4NzE7fCYjNzg3Nzt8JiM3ODc1O3wmIzc4Njk7fCYjMjc1O3wmIzc3MDE7fCYjNzcwMzt8JiMyNzc7fCYjMjc5O3wmIzIzNTt8JiM3ODY3O3wmIzI4Mzt8JiM1MTc7fCYjNTE5O3wmIzc4NjU7fCYjNzg3OTt8JiM1NTM7fCYjNzcwOTt8JiMyODE7fCYjNzcwNTt8JiM3NzA3O3wmIzU4Mzt8JiM2MDM7fCYjNDc3O3xbXFx1MDA2NVxcdTI0RDRcXHVGRjQ1XFx1MDBFOFxcdTAwRTlcXHUwMEVBXFx1MUVDMVxcdTFFQkZcXHUxRUM1XFx1MUVDM1xcdTFFQkRcXHUwMTEzXFx1MUUxNVxcdTFFMTdcXHUwMTE1XFx1MDExN1xcdTAwRUJcXHUxRUJCXFx1MDExQlxcdTAyMDVcXHUwMjA3XFx1MUVCOVxcdTFFQzdcXHUwMjI5XFx1MUUxRFxcdTAxMTlcXHUxRTE5XFx1MUUxQlxcdTAyNDdcXHUwMjVCXFx1MDFERF0pL2dcbn0sIHtcbiAgYmFzZTogJ2YnLFxuICBsZXR0ZXJzOiAvKCYjMTAyO3wmIzk0Mjk7fCYjNjUzNTA7fCYjNzcxMTt8JiM0MDI7fCYjNDI4NzY7fFtcXHUwMDY2XFx1MjRENVxcdUZGNDZcXHUxRTFGXFx1MDE5MlxcdUE3N0NdKS9nXG59LCB7XG4gIGJhc2U6ICdnJyxcbiAgbGV0dGVyczogLygmIzEwMzt8JiM5NDMwO3wmIzY1MzUxO3wmIzUwMTt8JiMyODU7fCYjNzcxMzt8JiMyODc7fCYjMjg5O3wmIzQ4Nzt8JiMyOTE7fCYjNDg1O3wmIzYwODt8JiM0MjkxMzt8JiM3NTQ1O3wmIzQyODc5O3xbXFx1MDA2N1xcdTI0RDZcXHVGRjQ3XFx1MDFGNVxcdTAxMURcXHUxRTIxXFx1MDExRlxcdTAxMjFcXHUwMUU3XFx1MDEyM1xcdTAxRTVcXHUwMjYwXFx1QTdBMVxcdTFENzlcXHVBNzdGXSkvZ1xufSwge1xuICBiYXNlOiAnaCcsXG4gIGxldHRlcnM6IC8oJiMxMDQ7fCYjOTQzMTt8JiM2NTM1Mjt8JiMyOTM7fCYjNzcxNTt8JiM3NzE5O3wmIzU0Mzt8JiM3NzE3O3wmIzc3MjE7fCYjNzcyMzt8JiM3ODMwO3wmIzI5NTt8JiMxMTM2ODt8JiMxMTM4Mjt8JiM2MTM7fFtcXHUwMDY4XFx1MjREN1xcdUZGNDhcXHUwMTI1XFx1MUUyM1xcdTFFMjdcXHUwMjFGXFx1MUUyNVxcdTFFMjlcXHUxRTJCXFx1MUU5NlxcdTAxMjdcXHUyQzY4XFx1MkM3NlxcdTAyNjVdKS9nXG59LCB7XG4gIGJhc2U6ICdodicsXG4gIGxldHRlcnM6IC8oJiM0MDU7fFtcXHUwMTk1XSkvZ1xufSwge1xuICBiYXNlOiAnaScsXG4gIGxldHRlcnM6IC8oJiMxMDU7fCYjOTQzMjt8JiM2NTM1Mzt8JiMyMzY7fCYjMjM3O3wmIzIzODt8JiMyOTc7fCYjMjk5O3wmIzMwMTt8JiMyMzk7fCYjNzcyNzt8JiM3ODgxO3wmIzQ2NDt8JiM1MjE7fCYjNTIzO3wmIzc4ODM7fCYjMzAzO3wmIzc3MjU7fCYjNjE2O3wmIzMwNTt8W1xcdTAwNjlcXHUyNEQ4XFx1RkY0OVxcdTAwRUNcXHUwMEVEXFx1MDBFRVxcdTAxMjlcXHUwMTJCXFx1MDEyRFxcdTAwRUZcXHUxRTJGXFx1MUVDOVxcdTAxRDBcXHUwMjA5XFx1MDIwQlxcdTFFQ0JcXHUwMTJGXFx1MUUyRFxcdTAyNjhcXHUwMTMxXSkvZ1xufSwge1xuICBiYXNlOiAnaWonLFxuICBsZXR0ZXJzOiAvKCYjMzA3O3xbXFx1MDEzM10pL2dcbn0sIHtcbiAgYmFzZTogJ2onLFxuICBsZXR0ZXJzOiAvKCYjMTA2O3wmIzk0MzM7fCYjNjUzNTQ7fCYjMzA5O3wmIzQ5Njt8JiM1ODU7fFtcXHUwMDZBXFx1MjREOVxcdUZGNEFcXHUwMTM1XFx1MDFGMFxcdTAyNDldKS9nXG59LCB7XG4gIGJhc2U6ICdrJyxcbiAgbGV0dGVyczogLygmIzEwNzt8JiM5NDM0O3wmIzY1MzU1O3wmIzc3Mjk7fCYjNDg5O3wmIzc3MzE7fCYjMzExO3wmIzc3MzM7fCYjNDA5O3wmIzExMzcwO3wmIzQyODE3O3wmIzQyODE5O3wmIzQyODIxO3wmIzQyOTE1O3xbXFx1MDA2QlxcdTI0REFcXHVGRjRCXFx1MUUzMVxcdTAxRTlcXHUxRTMzXFx1MDEzN1xcdTFFMzVcXHUwMTk5XFx1MkM2QVxcdUE3NDFcXHVBNzQzXFx1QTc0NVxcdUE3QTNdKS9nXG59LCB7XG4gIGJhc2U6ICdsJyxcbiAgbGV0dGVyczogLygmIzEwODt8JiM5NDM1O3wmIzY1MzU2O3wmIzMyMDt8JiMzMTQ7fCYjMzE4O3wmIzc3MzU7fCYjNzczNzt8JiMzMTY7fCYjNzc0MTt8JiM3NzM5O3wmIzMyMjt8JiM0MTA7fCYjNjE5O3wmIzExMzYxO3wmIzQyODI1O3wmIzQyODgxO3wmIzQyODIzO3xbXFx1MDA2Q1xcdTI0REJcXHVGRjRDXFx1MDE0MFxcdTAxM0FcXHUwMTNFXFx1MUUzN1xcdTFFMzlcXHUwMTNDXFx1MUUzRFxcdTFFM0JcXHUwMTQyXFx1MDE5QVxcdTAyNkJcXHUyQzYxXFx1QTc0OVxcdUE3ODFcXHVBNzQ3XSkvZ1xufSwge1xuICBiYXNlOiAnbGonLFxuICBsZXR0ZXJzOiAvKCYjNDU3O3xbXFx1MDFDOV0pL2dcbn0sIHtcbiAgYmFzZTogJ20nLFxuICBsZXR0ZXJzOiAvKCYjMTA5O3wmIzk0MzY7fCYjNjUzNTc7fCYjNzc0Mzt8JiM3NzQ1O3wmIzc3NDc7fCYjNjI1O3wmIzYyMzt8W1xcdTAwNkRcXHUyNERDXFx1RkY0RFxcdTFFM0ZcXHUxRTQxXFx1MUU0M1xcdTAyNzFcXHUwMjZGXSkvZ1xufSwge1xuICBiYXNlOiAnbicsXG4gIGxldHRlcnM6IC8oJiMxMTA7fCYjOTQzNzt8JiM2NTM1ODt8JiM1MDU7fCYjMzI0O3wmIzI0MTt8JiM3NzQ5O3wmIzMyODt8JiM3NzUxO3wmIzMyNjt8JiM3NzU1O3wmIzc3NTM7fCYjNDE0O3wmIzYyNjt8JiMzMjk7fCYjNDI4OTc7fCYjNDI5MTc7fCYjMzMxO3xbXFx1MDA2RVxcdTI0RERcXHVGRjRFXFx1MDFGOVxcdTAxNDRcXHUwMEYxXFx1MUU0NVxcdTAxNDhcXHUxRTQ3XFx1MDE0NlxcdTFFNEJcXHUxRTQ5XFx1MDE5RVxcdTAyNzJcXHUwMTQ5XFx1QTc5MVxcdUE3QTVcXHUwMTRCXSkvZ1xufSwge1xuICBiYXNlOiAnbmonLFxuICBsZXR0ZXJzOiAvKCYjNDYwO3xbXFx1MDFDQ10pL2dcbn0sIHtcbiAgYmFzZTogJ28nLFxuICBsZXR0ZXJzOiAvKCYjMTExO3wmIzk0Mzg7fCYjNjUzNTk7fCYjMjQyO3wmIzI0Mzt8JiMyNDQ7fCYjNzg5MTt8JiM3ODg5O3wmIzc4OTU7fCYjNzg5Mzt8JiMyNDU7fCYjNzc1Nzt8JiM1NTc7fCYjNzc1OTt8JiMzMzM7fCYjNzc2MTt8JiM3NzYzO3wmIzMzNTt8JiM1NTk7fCYjNTYxO3wmIzI0Njt8JiM1NTU7fCYjNzg4Nzt8JiMzMzc7fCYjNDY2O3wmIzUyNTt8JiM1Mjc7fCYjNDE3O3wmIzc5MDE7fCYjNzg5OTt8JiM3OTA1O3wmIzc5MDM7fCYjNzkwNzt8JiM3ODg1O3wmIzc4OTc7fCYjNDkxO3wmIzQ5Mzt8JiMyNDg7fCYjNTExO3wmIzU5Njt8JiM0MjgyNzt8JiM0MjgyOTt8JiM2Mjk7fFtcXHUwMDZGXFx1MjRERVxcdUZGNEZcXHUwMEYyXFx1MDBGM1xcdTAwRjRcXHUxRUQzXFx1MUVEMVxcdTFFRDdcXHUxRUQ1XFx1MDBGNVxcdTFFNERcXHUwMjJEXFx1MUU0RlxcdTAxNERcXHUxRTUxXFx1MUU1M1xcdTAxNEZcXHUwMjJGXFx1MDIzMVxcdTAwRjZcXHUwMjJCXFx1MUVDRlxcdTAxNTFcXHUwMUQyXFx1MDIwRFxcdTAyMEZcXHUwMUExXFx1MUVERFxcdTFFREJcXHUxRUUxXFx1MUVERlxcdTFFRTNcXHUxRUNEXFx1MUVEOVxcdTAxRUJcXHUwMUVEXFx1MDBGOFxcdTAxRkZcXHUwMjU0XFx1QTc0QlxcdUE3NERcXHUwMjc1XSkvZ1xufSwge1xuICBiYXNlOiAnb2UnLFxuICBsZXR0ZXJzOiAvKCYjMzM5O3xbXFx1MDE1M10pL2dcbn0sIHtcbiAgYmFzZTogJ29pJyxcbiAgbGV0dGVyczogLygmIzQxOTt8W1xcdTAxQTNdKS9nXG59LCB7XG4gIGJhc2U6ICdvdScsXG4gIGxldHRlcnM6IC8oJiM1NDc7fFtcXHUwMjIzXSkvZ1xufSwge1xuICBiYXNlOiAnb28nLFxuICBsZXR0ZXJzOiAvKCYjNDI4MzE7fFtcXHVBNzRGXSkvZ1xufSwge1xuICBiYXNlOiAncCcsXG4gIGxldHRlcnM6IC8oJiMxMTI7fCYjOTQzOTt8JiM2NTM2MDt8JiM3NzY1O3wmIzc3Njc7fCYjNDIxO3wmIzc1NDk7fCYjNDI4MzM7fCYjNDI4MzU7fCYjNDI4Mzc7fFtcXHUwMDcwXFx1MjRERlxcdUZGNTBcXHUxRTU1XFx1MUU1N1xcdTAxQTVcXHUxRDdEXFx1QTc1MVxcdUE3NTNcXHVBNzU1XSkvZ1xufSwge1xuICBiYXNlOiAncScsXG4gIGxldHRlcnM6IC8oJiMxMTM7fCYjOTQ0MDt8JiM2NTM2MTt8JiM1ODc7fCYjNDI4Mzk7fCYjNDI4NDE7fFtcXHUwMDcxXFx1MjRFMFxcdUZGNTFcXHUwMjRCXFx1QTc1N1xcdUE3NTldKS9nXG59LCB7XG4gIGJhc2U6ICdyJyxcbiAgbGV0dGVyczogLygmIzExNDt8JiM5NDQxO3wmIzY1MzYyO3wmIzM0MTt8JiM3NzY5O3wmIzM0NTt8JiM1Mjk7fCYjNTMxO3wmIzc3NzE7fCYjNzc3Mzt8JiMzNDM7fCYjNzc3NTt8JiM1ODk7fCYjNjM3O3wmIzQyODQzO3wmIzQyOTE5O3wmIzQyODgzO3xbXFx1MDA3MlxcdTI0RTFcXHVGRjUyXFx1MDE1NVxcdTFFNTlcXHUwMTU5XFx1MDIxMVxcdTAyMTNcXHUxRTVCXFx1MUU1RFxcdTAxNTdcXHUxRTVGXFx1MDI0RFxcdTAyN0RcXHVBNzVCXFx1QTdBN1xcdUE3ODNdKS9nXG59LCB7XG4gIGJhc2U6ICdzJyxcbiAgbGV0dGVyczogLygmIzExNTt8JiM5NDQyO3wmIzY1MzYzO3wmIzM0Nzt8JiM3NzgxO3wmIzM0OTt8JiM3Nzc3O3wmIzM1Mzt8JiM3NzgzO3wmIzc3Nzk7fCYjNzc4NTt8JiM1Mzc7fCYjMzUxO3wmIzU3NTt8JiM0MjkyMTt8JiM0Mjg4NTt8JiM3ODM1O3wmIzM4Mzt8W1xcdTAwNzNcXHUyNEUyXFx1RkY1M1xcdTAxNUJcXHUxRTY1XFx1MDE1RFxcdTFFNjFcXHUwMTYxXFx1MUU2N1xcdTFFNjNcXHUxRTY5XFx1MDIxOVxcdTAxNUZcXHUwMjNGXFx1QTdBOVxcdUE3ODVcXHUxRTlCXFx1MDE3Rl0pL2dcbn0sIHtcbiAgYmFzZTogJ3NzJyxcbiAgbGV0dGVyczogLygmIzIyMzt8W1xcdTAwREZdKS9nXG59LCB7XG4gIGJhc2U6ICd0JyxcbiAgbGV0dGVyczogLygmIzExNjt8JiM5NDQzO3wmIzY1MzY0O3wmIzc3ODc7fCYjNzgzMTt8JiMzNTc7fCYjNzc4OTt8JiM1Mzk7fCYjMzU1O3wmIzc3OTM7fCYjNzc5MTt8JiMzNTk7fCYjNDI5O3wmIzY0ODt8JiMxMTM2Njt8JiM0Mjg4Nzt8W1xcdTAwNzRcXHUyNEUzXFx1RkY1NFxcdTFFNkJcXHUxRTk3XFx1MDE2NVxcdTFFNkRcXHUwMjFCXFx1MDE2M1xcdTFFNzFcXHUxRTZGXFx1MDE2N1xcdTAxQURcXHUwMjg4XFx1MkM2NlxcdUE3ODddKS9nXG59LCB7XG4gIGJhc2U6ICd0aCcsXG4gIGxldHRlcnM6IC8oJiMyNTQ7fFtcXHUwMEZFXSkvZ1xufSwge1xuICBiYXNlOiAndHonLFxuICBsZXR0ZXJzOiAvKCYjNDI3OTM7fFtcXHVBNzI5XSkvZ1xufSwge1xuICBiYXNlOiAndScsXG4gIGxldHRlcnM6IC8oJiMxMTc7fCYjOTQ0NDt8JiM2NTM2NTt8JiMyNDk7fCYjMjUwO3wmIzI1MTt8JiMzNjE7fCYjNzgwMTt8JiMzNjM7fCYjNzgwMzt8JiMzNjU7fCYjMjUyO3wmIzQ3Njt8JiM0NzI7fCYjNDcwO3wmIzQ3NDt8JiM3OTExO3wmIzM2Nzt8JiMzNjk7fCYjNDY4O3wmIzUzMzt8JiM1MzU7fCYjNDMyO3wmIzc5MTU7fCYjNzkxMzt8JiM3OTE5O3wmIzc5MTc7fCYjNzkyMTt8JiM3OTA5O3wmIzc3OTU7fCYjMzcxO3wmIzc3OTk7fCYjNzc5Nzt8JiM2NDk7fFtcXHUwMDc1XFx1MjRFNFxcdUZGNTVcXHUwMEY5XFx1MDBGQVxcdTAwRkJcXHUwMTY5XFx1MUU3OVxcdTAxNkJcXHUxRTdCXFx1MDE2RFxcdTAwRkNcXHUwMURDXFx1MDFEOFxcdTAxRDZcXHUwMURBXFx1MUVFN1xcdTAxNkZcXHUwMTcxXFx1MDFENFxcdTAyMTVcXHUwMjE3XFx1MDFCMFxcdTFFRUJcXHUxRUU5XFx1MUVFRlxcdTFFRURcXHUxRUYxXFx1MUVFNVxcdTFFNzNcXHUwMTczXFx1MUU3N1xcdTFFNzVcXHUwMjg5XSkvZ1xufSwge1xuICBiYXNlOiAndicsXG4gIGxldHRlcnM6IC8oJiMxMTg7fCYjOTQ0NTt8JiM2NTM2Njt8JiM3ODA1O3wmIzc4MDc7fCYjNjUxO3wmIzQyODQ3O3wmIzY1Mjt8W1xcdTAwNzZcXHUyNEU1XFx1RkY1NlxcdTFFN0RcXHUxRTdGXFx1MDI4QlxcdUE3NUZcXHUwMjhDXSkvZ1xufSwge1xuICBiYXNlOiAndnknLFxuICBsZXR0ZXJzOiAvKCYjNDI4NDk7fFtcXHVBNzYxXSkvZ1xufSwge1xuICBiYXNlOiAndycsXG4gIGxldHRlcnM6IC8oJiMxMTk7fCYjOTQ0Njt8JiM2NTM2Nzt8JiM3ODA5O3wmIzc4MTE7fCYjMzczO3wmIzc4MTU7fCYjNzgxMzt8JiM3ODMyO3wmIzc4MTc7fCYjMTEzNzk7fFtcXHUwMDc3XFx1MjRFNlxcdUZGNTdcXHUxRTgxXFx1MUU4M1xcdTAxNzVcXHUxRTg3XFx1MUU4NVxcdTFFOThcXHUxRTg5XFx1MkM3M10pL2dcbn0sIHtcbiAgYmFzZTogJ3gnLFxuICBsZXR0ZXJzOiAvKCYjMTIwO3wmIzk0NDc7fCYjNjUzNjg7fCYjNzgxOTt8JiM3ODIxO3xbXFx1MDA3OFxcdTI0RTdcXHVGRjU4XFx1MUU4QlxcdTFFOERdKS9nXG59LCB7XG4gIGJhc2U6ICd5JyxcbiAgbGV0dGVyczogLygmIzEyMTt8JiM5NDQ4O3wmIzY1MzY5O3wmIzc5MjM7fCYjMjUzO3wmIzM3NTt8JiM3OTI5O3wmIzU2Mzt8JiM3ODIzO3wmIzI1NTt8JiM3OTI3O3wmIzc4MzM7fCYjNzkyNTt8JiM0MzY7fCYjNTkxO3wmIzc5MzU7fFtcXHUwMDc5XFx1MjRFOFxcdUZGNTlcXHUxRUYzXFx1MDBGRFxcdTAxNzdcXHUxRUY5XFx1MDIzM1xcdTFFOEZcXHUwMEZGXFx1MUVGN1xcdTFFOTlcXHUxRUY1XFx1MDFCNFxcdTAyNEZcXHUxRUZGXSkvZ1xufSwge1xuICBiYXNlOiAneicsXG4gIGxldHRlcnM6IC8oJiMxMjI7fCYjOTQ0OTt8JiM2NTM3MDt8JiMzNzg7fCYjNzgyNTt8JiMzODA7fCYjMzgyO3wmIzc4Mjc7fCYjNzgyOTt8JiM0Mzg7fCYjNTQ5O3wmIzU3Njt8JiMxMTM3Mjt8JiM0Mjg1MTt8W1xcdTAwN0FcXHUyNEU5XFx1RkY1QVxcdTAxN0FcXHUxRTkxXFx1MDE3Q1xcdTAxN0VcXHUxRTkzXFx1MUU5NVxcdTAxQjZcXHUwMjI1XFx1MDI0MFxcdTJDNkNcXHVBNzYzXSkvZ1xufV07XG5cbnZhciByZW1vdmVBY2NlbnRzID0gZnVuY3Rpb24gcmVtb3ZlQWNjZW50cyhzdHIpIHtcbiAgdmFyIGZvcm1hdHRlZFN0ciA9IHN0cjtcbiAgbGV0dGVyc0RpYWNyaXRpY3MuZm9yRWFjaChmdW5jdGlvbiAobGV0dGVyRGlhY3JpdGljcykge1xuICAgIGZvcm1hdHRlZFN0ciA9IGZvcm1hdHRlZFN0ci5yZXBsYWNlKGxldHRlckRpYWNyaXRpY3MubGV0dGVycywgbGV0dGVyRGlhY3JpdGljcy5iYXNlKTtcbiAgfSk7XG4gIHJldHVybiBmb3JtYXR0ZWRTdHI7XG59O1xuXG52YXIgbm9ybWFsaXplU3RyaW5nID0gZnVuY3Rpb24gbm9ybWFsaXplU3RyaW5nKHN0cikge1xuICByZXR1cm4gcmVtb3ZlQWNjZW50cyhzdHIpLnRvTG93ZXJDYXNlKCk7XG59O1xuXG52YXIgZ2V0U3Vic3RyaW5nSW5kZXggPSBmdW5jdGlvbiBnZXRTdWJzdHJpbmdJbmRleChzdHIsIHN1YnN0ciwgaWdub3JlQWNjZW50cykge1xuICBpZiAoIWlnbm9yZUFjY2VudHMpIHtcbiAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzdWJzdHIudG9Mb3dlckNhc2UoKSk7XG4gIH1cblxuICByZXR1cm4gbm9ybWFsaXplU3RyaW5nKHN0cikuaW5kZXhPZihub3JtYWxpemVTdHJpbmcoc3Vic3RyKSk7XG59O1xuXG52YXIgaXNJRSA9IGZ1bmN0aW9uIGlzSUUoKSB7XG4gIHJldHVybiAhIWRvY3VtZW50LmRvY3VtZW50TW9kZTtcbn07XG5cbnZhciBpc051bWJlciA9IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG59O1xuXG52YXIga2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gIHJldHVybiBvYmogPT09IE9iamVjdChvYmopID8gT2JqZWN0LmtleXMob2JqKSA6IFtdO1xufTtcblxudmFyIG9taXQgPSBmdW5jdGlvbiBvbWl0KG9iaikge1xuICB2YXIgX3JlZjtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdCA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgcmVzdFtfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICB2YXIga2V5cyA9IChfcmVmID0gW10pLmNvbmNhdC5hcHBseShfcmVmLCByZXN0KTtcblxuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaykge1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaykgJiYgIWtleXMuaW5jbHVkZXMoaykgJiYgb2JqW2tdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGFjY1trXSA9IG9ialtrXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0U3R5bGUoZGVmYXVsdFN0eWxlLCBnZXRNb2RpZmllcnMpIHtcbiAgdmFyIGVuaGFuY2UgPSBmdW5jdGlvbiBlbmhhbmNlKENvbXBvbmVudFRvV3JhcCkge1xuICAgIHZhciBEZWZhdWx0U3R5bGVFbmhhbmNlciA9IGZ1bmN0aW9uIERlZmF1bHRTdHlsZUVuaGFuY2VyKF9yZWYpIHtcbiAgICAgIHZhciBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2xhc3NOYW1lc1wiXSk7XG5cbiAgICAgIHZhciBtb2RpZmllcnMgPSBnZXRNb2RpZmllcnMgPyBnZXRNb2RpZmllcnMocmVzdCkgOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgc3R5bGVzID0gdXNlU3R5bGVzKGRlZmF1bHRTdHlsZSwge1xuICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBjbGFzc05hbWVzOiBjbGFzc05hbWVzXG4gICAgICB9LCBtb2RpZmllcnMpO1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50VG9XcmFwLCBfZXh0ZW5kcyh7fSwgcmVzdCwge1xuICAgICAgICBzdHlsZTogc3R5bGVzXG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIHZhciBkaXNwbGF5TmFtZSA9IENvbXBvbmVudFRvV3JhcC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnRUb1dyYXAubmFtZSB8fCAnQ29tcG9uZW50JztcbiAgICBEZWZhdWx0U3R5bGVFbmhhbmNlci5kaXNwbGF5TmFtZSA9IFwiZGVmYXVsdFN0eWxlKFwiLmNvbmNhdChkaXNwbGF5TmFtZSwgXCIpXCIpO1xuICAgIHJldHVybiBEZWZhdWx0U3R5bGVFbmhhbmNlcjtcbiAgfTtcblxuICByZXR1cm4gZW5oYW5jZTtcbn1cblxudmFyIF9nZW5lcmF0ZUNvbXBvbmVudEtleSA9IGZ1bmN0aW9uIF9nZW5lcmF0ZUNvbXBvbmVudEtleSh1c2VkS2V5cywgaWQpIHtcbiAgaWYgKCF1c2VkS2V5cy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICB1c2VkS2V5c1tpZF0gPSAwO1xuICB9IGVsc2Uge1xuICAgIHVzZWRLZXlzW2lkXSsrO1xuICB9XG5cbiAgcmV0dXJuIGlkICsgJ18nICsgdXNlZEtleXNbaWRdO1xufTtcblxudmFyIEhpZ2hsaWdodGVyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhIaWdobGlnaHRlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSGlnaGxpZ2h0ZXIoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhpZ2hsaWdodGVyKTtcblxuICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEhpZ2hsaWdodGVyKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJzZXRDYXJldEVsZW1lbnRcIiwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBfdGhpcy5jYXJldEVsZW1lbnQgPSBlbDtcbiAgICB9KTtcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgbGVmdDogdW5kZWZpbmVkLFxuICAgICAgdG9wOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhIaWdobGlnaHRlciwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLm5vdGlmeUNhcmV0UG9zaXRpb24oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHRoaXMubm90aWZ5Q2FyZXRQb3NpdGlvbigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJub3RpZnlDYXJldFBvc2l0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG5vdGlmeUNhcmV0UG9zaXRpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuY2FyZXRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIF90aGlzJGNhcmV0RWxlbWVudCA9IHRoaXMuY2FyZXRFbGVtZW50LFxuICAgICAgICAgIG9mZnNldExlZnQgPSBfdGhpcyRjYXJldEVsZW1lbnQub2Zmc2V0TGVmdCxcbiAgICAgICAgICBvZmZzZXRUb3AgPSBfdGhpcyRjYXJldEVsZW1lbnQub2Zmc2V0VG9wO1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZS5sZWZ0ID09PSBvZmZzZXRMZWZ0ICYmIHRoaXMuc3RhdGUudG9wID09PSBvZmZzZXRUb3ApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3UG9zaXRpb24gPSB7XG4gICAgICAgIGxlZnQ6IG9mZnNldExlZnQsXG4gICAgICAgIHRvcDogb2Zmc2V0VG9wXG4gICAgICB9O1xuICAgICAgdGhpcy5zZXRTdGF0ZShuZXdQb3NpdGlvbik7XG4gICAgICB0aGlzLnByb3BzLm9uQ2FyZXRQb3NpdGlvbkNoYW5nZShuZXdQb3NpdGlvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBzZWxlY3Rpb25TdGFydCA9IF90aGlzJHByb3BzLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgIHNlbGVjdGlvbkVuZCA9IF90aGlzJHByb3BzLnNlbGVjdGlvbkVuZCxcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHByb3BzLnZhbHVlLFxuICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHMuc3R5bGUsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBjb250YWluZXJSZWYgPSBfdGhpcyRwcm9wcy5jb250YWluZXJSZWY7XG4gICAgICB2YXIgY29uZmlnID0gcmVhZENvbmZpZ0Zyb21DaGlsZHJlbihjaGlsZHJlbik7IC8vIElmIHRoZXJlJ3MgYSBjYXJldCAoaS5lLiBubyByYW5nZSBzZWxlY3Rpb24pLCBtYXAgdGhlIGNhcmV0IHBvc2l0aW9uIGludG8gdGhlIG1hcmtlZCB1cCB2YWx1ZVxuXG4gICAgICB2YXIgY2FyZXRQb3NpdGlvbkluTWFya3VwO1xuXG4gICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgPT09IHNlbGVjdGlvbkVuZCkge1xuICAgICAgICBjYXJldFBvc2l0aW9uSW5NYXJrdXAgPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzZWxlY3Rpb25TdGFydCwgJ1NUQVJUJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXN1bHRDb21wb25lbnRzID0gW107XG4gICAgICB2YXIgY29tcG9uZW50S2V5cyA9IHt9OyAvLyBzdGFydCBieSBhcHBlbmRpbmcgZGlyZWN0bHkgdG8gdGhlIHJlc3VsdENvbXBvbmVudHNcblxuICAgICAgdmFyIGNvbXBvbmVudHMgPSByZXN1bHRDb21wb25lbnRzO1xuICAgICAgdmFyIHN1YnN0cmluZ0NvbXBvbmVudEtleSA9IDA7XG5cbiAgICAgIHZhciB0ZXh0SXRlcmF0ZWUgPSBmdW5jdGlvbiB0ZXh0SXRlcmF0ZWUoc3Vic3RyLCBpbmRleCwgaW5kZXhJblBsYWluVGV4dCkge1xuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBjYXJldCBlbGVtZW50IGhhcyB0byBiZSBpbnNlcnRlZCBpbnNpZGUgdGhlIGN1cnJlbnQgcGxhaW4gc3Vic3RyaW5nXG4gICAgICAgIGlmIChpc051bWJlcihjYXJldFBvc2l0aW9uSW5NYXJrdXApICYmIGNhcmV0UG9zaXRpb25Jbk1hcmt1cCA+PSBpbmRleCAmJiBjYXJldFBvc2l0aW9uSW5NYXJrdXAgPD0gaW5kZXggKyBzdWJzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gaWYgeWVzLCBzcGxpdCBzdWJzdHIgYXQgdGhlIGNhcmV0IHBvc2l0aW9uIGFuZCBpbnNlcnQgdGhlIGNhcmV0IGNvbXBvbmVudFxuICAgICAgICAgIHZhciBzcGxpdEluZGV4ID0gY2FyZXRQb3NpdGlvbkluTWFya3VwIC0gaW5kZXg7XG4gICAgICAgICAgY29tcG9uZW50cy5wdXNoKF90aGlzMi5yZW5kZXJTdWJzdHJpbmcoc3Vic3RyLnN1YnN0cmluZygwLCBzcGxpdEluZGV4KSwgc3Vic3RyaW5nQ29tcG9uZW50S2V5KSk7IC8vIGFkZCBhbGwgZm9sbG93aW5nIHN1YnN0cmluZ3MgYW5kIG1lbnRpb24gY29tcG9uZW50cyBhcyBjaGlsZHJlbiBvZiB0aGUgY2FyZXQgY29tcG9uZW50XG5cbiAgICAgICAgICBjb21wb25lbnRzID0gW190aGlzMi5yZW5kZXJTdWJzdHJpbmcoc3Vic3RyLnN1YnN0cmluZyhzcGxpdEluZGV4KSwgc3Vic3RyaW5nQ29tcG9uZW50S2V5KV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGp1c3QgcHVzaCB0aGUgcGxhaW4gdGV4dCBzdWJzdHJpbmdcbiAgICAgICAgICBjb21wb25lbnRzLnB1c2goX3RoaXMyLnJlbmRlclN1YnN0cmluZyhzdWJzdHIsIHN1YnN0cmluZ0NvbXBvbmVudEtleSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vic3RyaW5nQ29tcG9uZW50S2V5Kys7XG4gICAgICB9O1xuXG4gICAgICB2YXIgbWVudGlvbkl0ZXJhdGVlID0gZnVuY3Rpb24gbWVudGlvbkl0ZXJhdGVlKG1hcmt1cCwgaW5kZXgsIGluZGV4SW5QbGFpblRleHQsIGlkLCBkaXNwbGF5LCBtZW50aW9uQ2hpbGRJbmRleCwgbGFzdE1lbnRpb25FbmRJbmRleCkge1xuICAgICAgICAvLyBnZW5lcmF0ZSBhIGNvbXBvbmVudCBrZXkgYmFzZWQgb24gdGhlIGlkXG4gICAgICAgIHZhciBrZXkgPSBfZ2VuZXJhdGVDb21wb25lbnRLZXkoY29tcG9uZW50S2V5cywgaWQpO1xuXG4gICAgICAgIGNvbXBvbmVudHMucHVzaChfdGhpczIuZ2V0TWVudGlvbkNvbXBvbmVudEZvck1hdGNoKGlkLCBkaXNwbGF5LCBtZW50aW9uQ2hpbGRJbmRleCwga2V5KSk7XG4gICAgICB9O1xuXG4gICAgICBpdGVyYXRlTWVudGlvbnNNYXJrdXAodmFsdWUsIGNvbmZpZywgbWVudGlvbkl0ZXJhdGVlLCB0ZXh0SXRlcmF0ZWUpOyAvLyBhcHBlbmQgYSBzcGFuIGNvbnRhaW5pbmcgYSBzcGFjZSwgdG8gZW5zdXJlIHRoZSBsYXN0IHRleHQgbGluZSBoYXMgdGhlIGNvcnJlY3QgaGVpZ2h0XG5cbiAgICAgIGNvbXBvbmVudHMucHVzaCgnICcpO1xuXG4gICAgICBpZiAoY29tcG9uZW50cyAhPT0gcmVzdWx0Q29tcG9uZW50cykge1xuICAgICAgICAvLyBpZiBhIGNhcmV0IGNvbXBvbmVudCBpcyB0byBiZSByZW5kZXJlZCwgYWRkIGFsbCBjb21wb25lbnRzIHRoYXQgZm9sbG93ZWQgYXMgaXRzIGNoaWxkcmVuXG4gICAgICAgIHJlc3VsdENvbXBvbmVudHMucHVzaCh0aGlzLnJlbmRlckhpZ2hsaWdodGVyQ2FyZXQoY29tcG9uZW50cykpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgcmVmOiBjb250YWluZXJSZWZcbiAgICAgIH0pLCByZXN1bHRDb21wb25lbnRzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyU3Vic3RyaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclN1YnN0cmluZyhzdHJpbmcsIGtleSkge1xuICAgICAgLy8gc2V0IHN1YnN0cmluZyBzcGFuIHRvIGhpZGRlbiwgc28gdGhhdCBFbW9qaXMgYXJlIG5vdCBzaG93biBkb3VibGUgaW4gTW9iaWxlIFNhZmFyaVxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLnN0eWxlKCdzdWJzdHJpbmcnKSwge1xuICAgICAgICBrZXk6IGtleVxuICAgICAgfSksIHN0cmluZyk7XG4gICAgfSAvLyBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIE1lbnRpb24gY2hpbGQgYXBwbGljYWJsZSBmb3IgdGhlIHNwZWNpZmllZCB0eXBlIHRvIGJlIHJlbmRlcmVkIGluc2lkZSB0aGUgaGlnaGxpZ2h0ZXJcblxuICB9LCB7XG4gICAga2V5OiBcImdldE1lbnRpb25Db21wb25lbnRGb3JNYXRjaFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNZW50aW9uQ29tcG9uZW50Rm9yTWF0Y2goaWQsIGRpc3BsYXksIG1lbnRpb25DaGlsZEluZGV4LCBrZXkpIHtcbiAgICAgIHZhciBwcm9wcyA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBkaXNwbGF5OiBkaXNwbGF5LFxuICAgICAgICBrZXk6IGtleVxuICAgICAgfTtcbiAgICAgIHZhciBjaGlsZCA9IENoaWxkcmVuLnRvQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbilbbWVudGlvbkNoaWxkSW5kZXhdO1xuICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZCwgcHJvcHMpO1xuICAgIH0gLy8gUmVuZGVycyBhbiBjb21wb25lbnQgdG8gYmUgaW5zZXJ0ZWQgaW4gdGhlIGhpZ2hsaWdodGVyIGF0IHRoZSBjdXJyZW50IGNhcmV0IHBvc2l0aW9uXG5cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJIaWdobGlnaHRlckNhcmV0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckhpZ2hsaWdodGVyQ2FyZXQoY2hpbGRyZW4pIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcy5zdHlsZSgnY2FyZXQnKSwge1xuICAgICAgICByZWY6IHRoaXMuc2V0Q2FyZXRFbGVtZW50LFxuICAgICAgICBrZXk6IFwiY2FyZXRcIlxuICAgICAgfSksIGNoaWxkcmVuKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSGlnaGxpZ2h0ZXI7XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShIaWdobGlnaHRlciwgXCJwcm9wVHlwZXNcIiwge1xuICBzZWxlY3Rpb25TdGFydDogUHJvcFR5cGVzLm51bWJlcixcbiAgc2VsZWN0aW9uRW5kOiBQcm9wVHlwZXMubnVtYmVyLFxuICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBvbkNhcmV0UG9zaXRpb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGNvbnRhaW5lclJlZjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMsIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgY3VycmVudDogdHlwZW9mIEVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gUHJvcFR5cGVzLmFueSA6IFByb3BUeXBlcy5pbnN0YW5jZU9mKEVsZW1lbnQpXG4gIH0pXSksXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZWxlbWVudCwgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmVsZW1lbnQpXSkuaXNSZXF1aXJlZFxufSk7XG5cbl9kZWZpbmVQcm9wZXJ0eShIaWdobGlnaHRlciwgXCJkZWZhdWx0UHJvcHNcIiwge1xuICB2YWx1ZTogJydcbn0pO1xuXG52YXIgc3R5bGVkID0gY3JlYXRlRGVmYXVsdFN0eWxlKHtcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICB3aWR0aDogJzEwMCUnLFxuICBjb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnLFxuICB3b3JkV3JhcDogJ2JyZWFrLXdvcmQnLFxuICBib3JkZXI6ICcxcHggc29saWQgdHJhbnNwYXJlbnQnLFxuICB0ZXh0QWxpZ246ICdzdGFydCcsXG4gICcmc2luZ2xlTGluZSc6IHtcbiAgICB3aGl0ZVNwYWNlOiAncHJlJyxcbiAgICB3b3JkV3JhcDogbnVsbFxuICB9LFxuICBzdWJzdHJpbmc6IHtcbiAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJ1xuICB9XG59LCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgcmV0dXJuIHtcbiAgICAnJnNpbmdsZUxpbmUnOiBwcm9wcy5zaW5nbGVMaW5lXG4gIH07XG59KTtcbnZhciBIaWdobGlnaHRlciQxID0gc3R5bGVkKEhpZ2hsaWdodGVyKTtcblxudmFyIFN1Z2dlc3Rpb24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN1Z2dlc3Rpb24sIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFN1Z2dlc3Rpb24oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1Z2dlc3Rpb24pO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihTdWdnZXN0aW9uKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTdWdnZXN0aW9uLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc3QgPSBvbWl0KHRoaXMucHJvcHMsIFsnc3R5bGUnLCAnY2xhc3NOYW1lcycsICdjbGFzc05hbWUnXSwgLy8gc3Vic3R5bGUgcHJvcHNcbiAgICAgIGtleXMoU3VnZ2VzdGlvbi5wcm9wVHlwZXMpKTtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwgX2V4dGVuZHMoe1xuICAgICAgICBpZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgICAgcm9sZTogXCJvcHRpb25cIixcbiAgICAgICAgXCJhcmlhLXNlbGVjdGVkXCI6IHRoaXMucHJvcHMuZm9jdXNlZFxuICAgICAgfSwgcmVzdCwgdGhpcy5wcm9wcy5zdHlsZSksIHRoaXMucmVuZGVyQ29udGVudCgpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQ29udGVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDb250ZW50KCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBxdWVyeSA9IF90aGlzJHByb3BzLnF1ZXJ5LFxuICAgICAgICAgIHJlbmRlclN1Z2dlc3Rpb24gPSBfdGhpcyRwcm9wcy5yZW5kZXJTdWdnZXN0aW9uLFxuICAgICAgICAgIHN1Z2dlc3Rpb24gPSBfdGhpcyRwcm9wcy5zdWdnZXN0aW9uLFxuICAgICAgICAgIGluZGV4ID0gX3RoaXMkcHJvcHMuaW5kZXgsXG4gICAgICAgICAgZm9jdXNlZCA9IF90aGlzJHByb3BzLmZvY3VzZWQ7XG4gICAgICB2YXIgZGlzcGxheSA9IHRoaXMuZ2V0RGlzcGxheSgpO1xuICAgICAgdmFyIGhpZ2hsaWdodGVkRGlzcGxheSA9IHRoaXMucmVuZGVySGlnaGxpZ2h0ZWREaXNwbGF5KGRpc3BsYXksIHF1ZXJ5KTtcblxuICAgICAgaWYgKHJlbmRlclN1Z2dlc3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlclN1Z2dlc3Rpb24oc3VnZ2VzdGlvbiwgcXVlcnksIGhpZ2hsaWdodGVkRGlzcGxheSwgaW5kZXgsIGZvY3VzZWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaGlnaGxpZ2h0ZWREaXNwbGF5O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXREaXNwbGF5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpc3BsYXkoKSB7XG4gICAgICB2YXIgc3VnZ2VzdGlvbiA9IHRoaXMucHJvcHMuc3VnZ2VzdGlvbjtcblxuICAgICAgaWYgKHR5cGVvZiBzdWdnZXN0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGlkID0gc3VnZ2VzdGlvbi5pZCxcbiAgICAgICAgICBkaXNwbGF5ID0gc3VnZ2VzdGlvbi5kaXNwbGF5O1xuXG4gICAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCB8fCAhZGlzcGxheSkge1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkaXNwbGF5O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJIaWdobGlnaHRlZERpc3BsYXlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySGlnaGxpZ2h0ZWREaXNwbGF5KGRpc3BsYXkpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGlnbm9yZUFjY2VudHMgPSBfdGhpcyRwcm9wczIuaWdub3JlQWNjZW50cyxcbiAgICAgICAgICBxdWVyeSA9IF90aGlzJHByb3BzMi5xdWVyeSxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzMi5zdHlsZTtcbiAgICAgIHZhciBpID0gZ2V0U3Vic3RyaW5nSW5kZXgoZGlzcGxheSwgcXVlcnksIGlnbm9yZUFjY2VudHMpO1xuXG4gICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHN0eWxlKCdkaXNwbGF5JyksIGRpc3BsYXkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgc3R5bGUoJ2Rpc3BsYXknKSwgZGlzcGxheS5zdWJzdHJpbmcoMCwgaSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJiXCIsIHN0eWxlKCdoaWdobGlnaHQnKSwgZGlzcGxheS5zdWJzdHJpbmcoaSwgaSArIHF1ZXJ5Lmxlbmd0aCkpLCBkaXNwbGF5LnN1YnN0cmluZyhpICsgcXVlcnkubGVuZ3RoKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1Z2dlc3Rpb247XG59KENvbXBvbmVudCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShTdWdnZXN0aW9uLCBcInByb3BUeXBlc1wiLCB7XG4gIGlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIHF1ZXJ5OiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIGluZGV4OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGlnbm9yZUFjY2VudHM6IFByb3BUeXBlcy5ib29sLFxuICBzdWdnZXN0aW9uOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGlkOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSkuaXNSZXF1aXJlZCxcbiAgICBkaXNwbGF5OiBQcm9wVHlwZXMuc3RyaW5nXG4gIH0pXSkuaXNSZXF1aXJlZCxcbiAgcmVuZGVyU3VnZ2VzdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG4gIGZvY3VzZWQ6IFByb3BUeXBlcy5ib29sXG59KTtcblxudmFyIHN0eWxlZCQxID0gY3JlYXRlRGVmYXVsdFN0eWxlKHtcbiAgY3Vyc29yOiAncG9pbnRlcidcbn0sIGZ1bmN0aW9uIChwcm9wcykge1xuICByZXR1cm4ge1xuICAgICcmZm9jdXNlZCc6IHByb3BzLmZvY3VzZWRcbiAgfTtcbn0pO1xudmFyIFN1Z2dlc3Rpb24kMSA9IHN0eWxlZCQxKFN1Z2dlc3Rpb24pO1xuXG5mdW5jdGlvbiBMb2FkaW5nSW5kaWNhdG9yKCkge1xuICB2YXIgc3R5bGVzID0gdXNlU3R5bGVzKCk7XG4gIHZhciBzcGlubmVyU3R5bGVzID0gc3R5bGVzKCdzcGlubmVyJyk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHN0eWxlcywgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBzcGlubmVyU3R5bGVzLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHNwaW5uZXJTdHlsZXMoWydlbGVtZW50JywgJ2VsZW1lbnQxJ10pKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBzcGlubmVyU3R5bGVzKFsnZWxlbWVudCcsICdlbGVtZW50MiddKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgc3Bpbm5lclN0eWxlcyhbJ2VsZW1lbnQnLCAnZWxlbWVudDMnXSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHNwaW5uZXJTdHlsZXMoWydlbGVtZW50JywgJ2VsZW1lbnQ0J10pKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBzcGlubmVyU3R5bGVzKFsnZWxlbWVudCcsICdlbGVtZW50NSddKSkpKTtcbn1cblxudmFyIFN1Z2dlc3Rpb25zT3ZlcmxheSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3VnZ2VzdGlvbnNPdmVybGF5LCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTdWdnZXN0aW9uc092ZXJsYXkoKSB7XG4gICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7XG5cbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3VnZ2VzdGlvbnNPdmVybGF5KTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKFN1Z2dlc3Rpb25zT3ZlcmxheSkpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImhhbmRsZU1vdXNlRW50ZXJcIiwgZnVuY3Rpb24gKGluZGV4LCBldikge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm9uTW91c2VFbnRlcikge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbk1vdXNlRW50ZXIoaW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInNlbGVjdFwiLCBmdW5jdGlvbiAoc3VnZ2VzdGlvbiwgcXVlcnlJbmZvKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vblNlbGVjdChzdWdnZXN0aW9uLCBxdWVyeUluZm8pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInNldFVsRWxlbWVudFwiLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIF90aGlzLnVsRWxlbWVudCA9IGVsO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN1Z2dlc3Rpb25zT3ZlcmxheSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIGlmICghdGhpcy51bEVsZW1lbnQgfHwgdGhpcy51bEVsZW1lbnQub2Zmc2V0SGVpZ2h0ID49IHRoaXMudWxFbGVtZW50LnNjcm9sbEhlaWdodCB8fCAhdGhpcy5wcm9wcy5zY3JvbGxGb2N1c2VkSW50b1ZpZXcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy51bEVsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgICB2YXIgX3RoaXMkdWxFbGVtZW50JGNoaWxkID0gdGhpcy51bEVsZW1lbnQuY2hpbGRyZW5bdGhpcy5wcm9wcy5mb2N1c0luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICB0b3AgPSBfdGhpcyR1bEVsZW1lbnQkY2hpbGQudG9wLFxuICAgICAgICAgIGJvdHRvbSA9IF90aGlzJHVsRWxlbWVudCRjaGlsZC5ib3R0b207XG5cbiAgICAgIHZhciBfdGhpcyR1bEVsZW1lbnQkZ2V0Qm8gPSB0aGlzLnVsRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICB0b3BDb250YWluZXIgPSBfdGhpcyR1bEVsZW1lbnQkZ2V0Qm8udG9wO1xuXG4gICAgICB0b3AgPSB0b3AgLSB0b3BDb250YWluZXIgKyBzY3JvbGxUb3A7XG4gICAgICBib3R0b20gPSBib3R0b20gLSB0b3BDb250YWluZXIgKyBzY3JvbGxUb3A7XG5cbiAgICAgIGlmICh0b3AgPCBzY3JvbGxUb3ApIHtcbiAgICAgICAgdGhpcy51bEVsZW1lbnQuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgfSBlbHNlIGlmIChib3R0b20gPiB0aGlzLnVsRWxlbWVudC5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgdGhpcy51bEVsZW1lbnQuc2Nyb2xsVG9wID0gYm90dG9tIC0gdGhpcy51bEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBpZCA9IF90aGlzJHByb3BzLmlkLFxuICAgICAgICAgIGExMXlTdWdnZXN0aW9uc0xpc3RMYWJlbCA9IF90aGlzJHByb3BzLmExMXlTdWdnZXN0aW9uc0xpc3RMYWJlbCxcbiAgICAgICAgICBpc09wZW5lZCA9IF90aGlzJHByb3BzLmlzT3BlbmVkLFxuICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHMuc3R5bGUsXG4gICAgICAgICAgb25Nb3VzZURvd24gPSBfdGhpcyRwcm9wcy5vbk1vdXNlRG93bixcbiAgICAgICAgICBjb250YWluZXJSZWYgPSBfdGhpcyRwcm9wcy5jb250YWluZXJSZWYsXG4gICAgICAgICAgcG9zaXRpb24gPSBfdGhpcyRwcm9wcy5wb3NpdGlvbixcbiAgICAgICAgICBsZWZ0ID0gX3RoaXMkcHJvcHMubGVmdCxcbiAgICAgICAgICByaWdodCA9IF90aGlzJHByb3BzLnJpZ2h0LFxuICAgICAgICAgIHRvcCA9IF90aGlzJHByb3BzLnRvcDsgLy8gZG8gbm90IHNob3cgc3VnZ2VzdGlvbnMgdW50aWwgdGhlcmUgaXMgc29tZSBkYXRhXG5cbiAgICAgIGlmICghaXNPcGVuZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9leHRlbmRzKHt9LCBpbmxpbmUoe1xuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24gfHwgJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0b3A6IHRvcFxuICAgICAgfSwgc3R5bGUpLCB7XG4gICAgICAgIG9uTW91c2VEb3duOiBvbk1vdXNlRG93bixcbiAgICAgICAgcmVmOiBjb250YWluZXJSZWZcbiAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwidWxcIiwgX2V4dGVuZHMoe1xuICAgICAgICByZWY6IHRoaXMuc2V0VWxFbGVtZW50LFxuICAgICAgICBpZDogaWQsXG4gICAgICAgIHJvbGU6IFwibGlzdGJveFwiLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogYTExeVN1Z2dlc3Rpb25zTGlzdExhYmVsXG4gICAgICB9LCBzdHlsZSgnbGlzdCcpKSwgdGhpcy5yZW5kZXJTdWdnZXN0aW9ucygpKSwgdGhpcy5yZW5kZXJMb2FkaW5nSW5kaWNhdG9yKCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJTdWdnZXN0aW9uc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJTdWdnZXN0aW9ucygpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLnByb3BzLnN1Z2dlc3Rpb25zKS5yZWR1Y2UoZnVuY3Rpb24gKGFjY1Jlc3VsdHMsIF9yZWYpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBfcmVmLnJlc3VsdHMsXG4gICAgICAgICAgICBxdWVyeUluZm8gPSBfcmVmLnF1ZXJ5SW5mbztcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjUmVzdWx0cyksIF90b0NvbnN1bWFibGVBcnJheShyZXN1bHRzLm1hcChmdW5jdGlvbiAocmVzdWx0LCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIucmVuZGVyU3VnZ2VzdGlvbihyZXN1bHQsIHF1ZXJ5SW5mbywgYWNjUmVzdWx0cy5sZW5ndGggKyBpbmRleCk7XG4gICAgICAgIH0pKSk7XG4gICAgICB9LCBbXSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclN1Z2dlc3Rpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyU3VnZ2VzdGlvbihyZXN1bHQsIHF1ZXJ5SW5mbywgaW5kZXgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgaXNGb2N1c2VkID0gaW5kZXggPT09IHRoaXMucHJvcHMuZm9jdXNJbmRleDtcbiAgICAgIHZhciBjaGlsZEluZGV4ID0gcXVlcnlJbmZvLmNoaWxkSW5kZXgsXG4gICAgICAgICAgcXVlcnkgPSBxdWVyeUluZm8ucXVlcnk7XG4gICAgICB2YXIgcmVuZGVyU3VnZ2VzdGlvbiA9IENoaWxkcmVuLnRvQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbilbY2hpbGRJbmRleF0ucHJvcHMucmVuZGVyU3VnZ2VzdGlvbjtcbiAgICAgIHZhciBpZ25vcmVBY2NlbnRzID0gdGhpcy5wcm9wcy5pZ25vcmVBY2NlbnRzO1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3VnZ2VzdGlvbiQxLCB7XG4gICAgICAgIHN0eWxlOiB0aGlzLnByb3BzLnN0eWxlKCdpdGVtJyksXG4gICAgICAgIGtleTogXCJcIi5jb25jYXQoY2hpbGRJbmRleCwgXCItXCIpLmNvbmNhdChnZXRJRChyZXN1bHQpKSxcbiAgICAgICAgaWQ6IGdldFN1Z2dlc3Rpb25IdG1sSWQodGhpcy5wcm9wcy5pZCwgaW5kZXgpLFxuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgaWdub3JlQWNjZW50czogaWdub3JlQWNjZW50cyxcbiAgICAgICAgcmVuZGVyU3VnZ2VzdGlvbjogcmVuZGVyU3VnZ2VzdGlvbixcbiAgICAgICAgc3VnZ2VzdGlvbjogcmVzdWx0LFxuICAgICAgICBmb2N1c2VkOiBpc0ZvY3VzZWQsXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMy5zZWxlY3QocmVzdWx0LCBxdWVyeUluZm8pO1xuICAgICAgICB9LFxuICAgICAgICBvbk1vdXNlRW50ZXI6IGZ1bmN0aW9uIG9uTW91c2VFbnRlcigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZU1vdXNlRW50ZXIoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyTG9hZGluZ0luZGljYXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJMb2FkaW5nSW5kaWNhdG9yKCkge1xuICAgICAgaWYgKCF0aGlzLnByb3BzLmlzTG9hZGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRpbmdJbmRpY2F0b3IsIHtcbiAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuc3R5bGUoJ2xvYWRpbmdJbmRpY2F0b3InKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1Z2dlc3Rpb25zT3ZlcmxheTtcbn0oQ29tcG9uZW50KTtcblxuX2RlZmluZVByb3BlcnR5KFN1Z2dlc3Rpb25zT3ZlcmxheSwgXCJwcm9wVHlwZXNcIiwge1xuICBpZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBzdWdnZXN0aW9uczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBhMTF5U3VnZ2VzdGlvbnNMaXN0TGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZvY3VzSW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gIHBvc2l0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBsZWZ0OiBQcm9wVHlwZXMubnVtYmVyLFxuICByaWdodDogUHJvcFR5cGVzLm51bWJlcixcbiAgdG9wOiBQcm9wVHlwZXMubnVtYmVyLFxuICBzY3JvbGxGb2N1c2VkSW50b1ZpZXc6IFByb3BUeXBlcy5ib29sLFxuICBpc0xvYWRpbmc6IFByb3BUeXBlcy5ib29sLFxuICBpc09wZW5lZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgb25TZWxlY3Q6IFByb3BUeXBlcy5mdW5jLFxuICBpZ25vcmVBY2NlbnRzOiBQcm9wVHlwZXMuYm9vbCxcbiAgY29udGFpbmVyUmVmOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZnVuYywgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBjdXJyZW50OiB0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyBQcm9wVHlwZXMuYW55IDogUHJvcFR5cGVzLmluc3RhbmNlT2YoRWxlbWVudClcbiAgfSldKSxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5lbGVtZW50LCBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZWxlbWVudCldKS5pc1JlcXVpcmVkXG59KTtcblxuX2RlZmluZVByb3BlcnR5KFN1Z2dlc3Rpb25zT3ZlcmxheSwgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBzdWdnZXN0aW9uczoge30sXG4gIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdCgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSk7XG5cbnZhciBnZXRJRCA9IGZ1bmN0aW9uIGdldElEKHN1Z2dlc3Rpb24pIHtcbiAgaWYgKHR5cGVvZiBzdWdnZXN0aW9uID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzdWdnZXN0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHN1Z2dlc3Rpb24uaWQ7XG59O1xuXG52YXIgc3R5bGVkJDIgPSBjcmVhdGVEZWZhdWx0U3R5bGUoe1xuICB6SW5kZXg6IDEsXG4gIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgbWFyZ2luVG9wOiAxNCxcbiAgbWluV2lkdGg6IDEwMCxcbiAgbGlzdDoge1xuICAgIG1hcmdpbjogMCxcbiAgICBwYWRkaW5nOiAwLFxuICAgIGxpc3RTdHlsZVR5cGU6ICdub25lJ1xuICB9XG59KTtcbnZhciBTdWdnZXN0aW9uc092ZXJsYXkkMSA9IHN0eWxlZCQyKFN1Z2dlc3Rpb25zT3ZlcmxheSk7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG52YXIgbWFrZVRyaWdnZXJSZWdleCA9IGZ1bmN0aW9uIG1ha2VUcmlnZ2VyUmVnZXgodHJpZ2dlcikge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgaWYgKHRyaWdnZXIgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICByZXR1cm4gdHJpZ2dlcjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYWxsb3dTcGFjZUluUXVlcnkgPSBvcHRpb25zLmFsbG93U3BhY2VJblF1ZXJ5O1xuICAgIHZhciBlc2NhcGVkVHJpZ2dlckNoYXIgPSBlc2NhcGVSZWdleCh0cmlnZ2VyKTsgLy8gZmlyc3QgY2FwdHVyZSBncm91cCBpcyB0aGUgcGFydCB0byBiZSByZXBsYWNlZCBvbiBjb21wbGV0aW9uXG4gICAgLy8gc2Vjb25kIGNhcHR1cmUgZ3JvdXAgaXMgZm9yIGV4dHJhY3RpbmcgdGhlIHNlYXJjaCBxdWVyeVxuXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKShcIi5jb25jYXQoZXNjYXBlZFRyaWdnZXJDaGFyLCBcIihbXlwiKS5jb25jYXQoYWxsb3dTcGFjZUluUXVlcnkgPyAnJyA6ICdcXFxccycpLmNvbmNhdChlc2NhcGVkVHJpZ2dlckNoYXIsIFwiXSopKSRcIikpO1xuICB9XG59O1xuXG52YXIgZ2V0RGF0YVByb3ZpZGVyID0gZnVuY3Rpb24gZ2V0RGF0YVByb3ZpZGVyKGRhdGEsIGlnbm9yZUFjY2VudHMpIHtcbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIC8vIGlmIGRhdGEgaXMgYW4gYXJyYXksIGNyZWF0ZSBhIGZ1bmN0aW9uIHRvIHF1ZXJ5IHRoYXRcbiAgICByZXR1cm4gZnVuY3Rpb24gKHF1ZXJ5LCBjYWxsYmFjaykge1xuICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICB2YXIgZGlzcGxheSA9IGRhdGFbaV0uZGlzcGxheSB8fCBkYXRhW2ldLmlkO1xuXG4gICAgICAgIGlmIChnZXRTdWJzdHJpbmdJbmRleChkaXNwbGF5LCBxdWVyeSwgaWdub3JlQWNjZW50cykgPj0gMCkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChkYXRhW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIGV4cGVjdCBkYXRhIHRvIGJlIGEgcXVlcnkgZnVuY3Rpb25cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxudmFyIEtFWSA9IHtcbiAgVEFCOiA5LFxuICBSRVRVUk46IDEzLFxuICBFU0M6IDI3LFxuICBVUDogMzgsXG4gIERPV046IDQwXG59O1xudmFyIGlzQ29tcG9zaW5nID0gZmFsc2U7XG52YXIgcHJvcFR5cGVzID0ge1xuICAvKipcbiAgICogSWYgc2V0IHRvIGB0cnVlYCBhIHJlZ3VsYXIgdGV4dCBpbnB1dCBlbGVtZW50IHdpbGwgYmUgcmVuZGVyZWRcbiAgICogaW5zdGVhZCBvZiBhIHRleHRhcmVhXG4gICAqL1xuICBzaW5nbGVMaW5lOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dTcGFjZUluUXVlcnk6IFByb3BUeXBlcy5ib29sLFxuICBhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3I6IFByb3BUeXBlcy5ib29sLFxuICBmb3JjZVN1Z2dlc3Rpb25zQWJvdmVDdXJzb3I6IFByb3BUeXBlcy5ib29sLFxuICBpZ25vcmVBY2NlbnRzOiBQcm9wVHlwZXMuYm9vbCxcbiAgYTExeVN1Z2dlc3Rpb25zTGlzdExhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgb25LZXlEb3duOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25TZWxlY3Q6IFByb3BUeXBlcy5mdW5jLFxuICBvbkJsdXI6IFByb3BUeXBlcy5mdW5jLFxuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHN1Z2dlc3Rpb25zUG9ydGFsSG9zdDogdHlwZW9mIEVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gUHJvcFR5cGVzLmFueSA6IFByb3BUeXBlcy5Qcm9wVHlwZXMuaW5zdGFuY2VPZihFbGVtZW50KSxcbiAgaW5wdXRSZWY6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5mdW5jLCBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGN1cnJlbnQ6IHR5cGVvZiBFbGVtZW50ID09PSAndW5kZWZpbmVkJyA/IFByb3BUeXBlcy5hbnkgOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihFbGVtZW50KVxuICB9KV0pLFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmVsZW1lbnQsIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5lbGVtZW50KV0pLmlzUmVxdWlyZWRcbn07XG5cbnZhciBNZW50aW9uc0lucHV0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNZW50aW9uc0lucHV0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBNZW50aW9uc0lucHV0KF9wcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZW50aW9uc0lucHV0KTtcblxuICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKE1lbnRpb25zSW5wdXQpLmNhbGwodGhpcywgX3Byb3BzKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2V0Q29udGFpbmVyRWxlbWVudFwiLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIF90aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBlbDtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJnZXRJbnB1dFByb3BzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHJlYWRPbmx5ID0gX3RoaXMkcHJvcHMucmVhZE9ubHksXG4gICAgICAgICAgZGlzYWJsZWQgPSBfdGhpcyRwcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzLnN0eWxlOyAvLyBwYXNzIGFsbCBwcm9wcyB0aGF0IG5laXRoZXIgd2UsIG5vciBzdWJzdHlsZSwgY29uc3VtZSB0aHJvdWdoIHRvIHRoZSBpbnB1dCBjb250cm9sXG5cbiAgICAgIHZhciBwcm9wcyA9IG9taXQoX3RoaXMucHJvcHMsIFsnc3R5bGUnLCAnY2xhc3NOYW1lcycsICdjbGFzc05hbWUnXSwgLy8gc3Vic3R5bGUgcHJvcHNcbiAgICAgIGtleXMocHJvcFR5cGVzKSk7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcHJvcHMsIHt9LCBzdHlsZSgnaW5wdXQnKSwge1xuICAgICAgICB2YWx1ZTogX3RoaXMuZ2V0UGxhaW5UZXh0KClcbiAgICAgIH0sICFyZWFkT25seSAmJiAhZGlzYWJsZWQgJiYge1xuICAgICAgICBvbkNoYW5nZTogX3RoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICBvblNlbGVjdDogX3RoaXMuaGFuZGxlU2VsZWN0LFxuICAgICAgICBvbktleURvd246IF90aGlzLmhhbmRsZUtleURvd24sXG4gICAgICAgIG9uQmx1cjogX3RoaXMuaGFuZGxlQmx1cixcbiAgICAgICAgb25Db21wb3NpdGlvblN0YXJ0OiBfdGhpcy5oYW5kbGVDb21wb3NpdGlvblN0YXJ0LFxuICAgICAgICBvbkNvbXBvc2l0aW9uRW5kOiBfdGhpcy5oYW5kbGVDb21wb3NpdGlvbkVuZCxcbiAgICAgICAgb25TY3JvbGw6IF90aGlzLnVwZGF0ZUhpZ2hsaWdodGVyU2Nyb2xsXG4gICAgICB9LCB7fSwgX3RoaXMuaXNPcGVuZWQoKSAmJiB7XG4gICAgICAgIHJvbGU6ICdjb21ib2JveCcsXG4gICAgICAgICdhcmlhLWNvbnRyb2xzJzogX3RoaXMudXVpZFN1Z2dlc3Rpb25zT3ZlcmxheSxcbiAgICAgICAgJ2FyaWEtZXhwYW5kZWQnOiB0cnVlLFxuICAgICAgICAnYXJpYS1hdXRvY29tcGxldGUnOiAnbGlzdCcsXG4gICAgICAgICdhcmlhLWhhc3BvcHVwJzogJ2xpc3Rib3gnLFxuICAgICAgICAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JzogZ2V0U3VnZ2VzdGlvbkh0bWxJZChfdGhpcy51dWlkU3VnZ2VzdGlvbnNPdmVybGF5LCBfdGhpcy5zdGF0ZS5mb2N1c0luZGV4KVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwicmVuZGVyQ29udHJvbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgc2luZ2xlTGluZSA9IF90aGlzJHByb3BzMi5zaW5nbGVMaW5lLFxuICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHMyLnN0eWxlO1xuXG4gICAgICB2YXIgaW5wdXRQcm9wcyA9IF90aGlzLmdldElucHV0UHJvcHMoKTtcblxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgc3R5bGUoJ2NvbnRyb2wnKSwgX3RoaXMucmVuZGVySGlnaGxpZ2h0ZXIoKSwgc2luZ2xlTGluZSA/IF90aGlzLnJlbmRlcklucHV0KGlucHV0UHJvcHMpIDogX3RoaXMucmVuZGVyVGV4dGFyZWEoaW5wdXRQcm9wcykpO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInJlbmRlcklucHV0XCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBfZXh0ZW5kcyh7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICByZWY6IF90aGlzLnNldElucHV0UmVmXG4gICAgICB9LCBwcm9wcykpO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInJlbmRlclRleHRhcmVhXCIsIGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLCBfZXh0ZW5kcyh7XG4gICAgICAgIHJlZjogX3RoaXMuc2V0SW5wdXRSZWZcbiAgICAgIH0sIHByb3BzKSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2V0SW5wdXRSZWZcIiwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBfdGhpcy5pbnB1dEVsZW1lbnQgPSBlbDtcbiAgICAgIHZhciBpbnB1dFJlZiA9IF90aGlzLnByb3BzLmlucHV0UmVmO1xuXG4gICAgICBpZiAodHlwZW9mIGlucHV0UmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlucHV0UmVmKGVsKTtcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRSZWYpIHtcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudCA9IGVsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInNldFN1Z2dlc3Rpb25zRWxlbWVudFwiLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIF90aGlzLnN1Z2dlc3Rpb25zRWxlbWVudCA9IGVsO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInJlbmRlclN1Z2dlc3Rpb25zT3ZlcmxheVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWlzTnVtYmVyKF90aGlzLnN0YXRlLnNlbGVjdGlvblN0YXJ0KSkge1xuICAgICAgICAvLyBkbyBub3Qgc2hvdyBzdWdnZXN0aW9ucyB3aGVuIHRoZSBpbnB1dCBkb2VzIG5vdCBoYXZlIHRoZSBmb2N1c1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIF90aGlzJHN0YXRlJHN1Z2dlc3RpbyA9IF90aGlzLnN0YXRlLnN1Z2dlc3Rpb25zUG9zaXRpb24sXG4gICAgICAgICAgcG9zaXRpb24gPSBfdGhpcyRzdGF0ZSRzdWdnZXN0aW8ucG9zaXRpb24sXG4gICAgICAgICAgbGVmdCA9IF90aGlzJHN0YXRlJHN1Z2dlc3Rpby5sZWZ0LFxuICAgICAgICAgIHRvcCA9IF90aGlzJHN0YXRlJHN1Z2dlc3Rpby50b3AsXG4gICAgICAgICAgcmlnaHQgPSBfdGhpcyRzdGF0ZSRzdWdnZXN0aW8ucmlnaHQ7XG4gICAgICB2YXIgc3VnZ2VzdGlvbnNOb2RlID0gUmVhY3QuY3JlYXRlRWxlbWVudChTdWdnZXN0aW9uc092ZXJsYXkkMSwge1xuICAgICAgICBpZDogX3RoaXMudXVpZFN1Z2dlc3Rpb25zT3ZlcmxheSxcbiAgICAgICAgc3R5bGU6IF90aGlzLnByb3BzLnN0eWxlKCdzdWdnZXN0aW9ucycpLFxuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgIHRvcDogdG9wLFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIGZvY3VzSW5kZXg6IF90aGlzLnN0YXRlLmZvY3VzSW5kZXgsXG4gICAgICAgIHNjcm9sbEZvY3VzZWRJbnRvVmlldzogX3RoaXMuc3RhdGUuc2Nyb2xsRm9jdXNlZEludG9WaWV3LFxuICAgICAgICBjb250YWluZXJSZWY6IF90aGlzLnNldFN1Z2dlc3Rpb25zRWxlbWVudCxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IF90aGlzLnN0YXRlLnN1Z2dlc3Rpb25zLFxuICAgICAgICBvblNlbGVjdDogX3RoaXMuYWRkTWVudGlvbixcbiAgICAgICAgb25Nb3VzZURvd246IF90aGlzLmhhbmRsZVN1Z2dlc3Rpb25zTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlRW50ZXI6IF90aGlzLmhhbmRsZVN1Z2dlc3Rpb25zTW91c2VFbnRlcixcbiAgICAgICAgaXNMb2FkaW5nOiBfdGhpcy5pc0xvYWRpbmcoKSxcbiAgICAgICAgaXNPcGVuZWQ6IF90aGlzLmlzT3BlbmVkKCksXG4gICAgICAgIGlnbm9yZUFjY2VudHM6IF90aGlzLnByb3BzLmlnbm9yZUFjY2VudHMsXG4gICAgICAgIGExMXlTdWdnZXN0aW9uc0xpc3RMYWJlbDogX3RoaXMucHJvcHMuYTExeVN1Z2dlc3Rpb25zTGlzdExhYmVsXG4gICAgICB9LCBfdGhpcy5wcm9wcy5jaGlsZHJlbik7XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5zdWdnZXN0aW9uc1BvcnRhbEhvc3QpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChzdWdnZXN0aW9uc05vZGUsIF90aGlzLnByb3BzLnN1Z2dlc3Rpb25zUG9ydGFsSG9zdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbnNOb2RlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInJlbmRlckhpZ2hsaWdodGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLFxuICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gX3RoaXMkc3RhdGUuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgc2VsZWN0aW9uRW5kID0gX3RoaXMkc3RhdGUuc2VsZWN0aW9uRW5kO1xuICAgICAgdmFyIF90aGlzJHByb3BzMyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHNpbmdsZUxpbmUgPSBfdGhpcyRwcm9wczMuc2luZ2xlTGluZSxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzMy5jaGlsZHJlbixcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHByb3BzMy52YWx1ZSxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzMy5zdHlsZTtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEhpZ2hsaWdodGVyJDEsIHtcbiAgICAgICAgY29udGFpbmVyUmVmOiBfdGhpcy5zZXRIaWdobGlnaHRlckVsZW1lbnQsXG4gICAgICAgIHN0eWxlOiBzdHlsZSgnaGlnaGxpZ2h0ZXInKSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBzaW5nbGVMaW5lOiBzaW5nbGVMaW5lLFxuICAgICAgICBzZWxlY3Rpb25TdGFydDogc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgIHNlbGVjdGlvbkVuZDogc2VsZWN0aW9uRW5kLFxuICAgICAgICBvbkNhcmV0UG9zaXRpb25DaGFuZ2U6IF90aGlzLmhhbmRsZUNhcmV0UG9zaXRpb25DaGFuZ2VcbiAgICAgIH0sIGNoaWxkcmVuKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJzZXRIaWdobGlnaHRlckVsZW1lbnRcIiwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBfdGhpcy5oaWdobGlnaHRlckVsZW1lbnQgPSBlbDtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJoYW5kbGVDYXJldFBvc2l0aW9uQ2hhbmdlXCIsIGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYXJldFBvc2l0aW9uOiBwb3NpdGlvblxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiZ2V0UGxhaW5UZXh0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBnZXRQbGFpblRleHQoX3RoaXMucHJvcHMudmFsdWUgfHwgJycsIHJlYWRDb25maWdGcm9tQ2hpbGRyZW4oX3RoaXMucHJvcHMuY2hpbGRyZW4pKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJleGVjdXRlT25DaGFuZ2VcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzNDtcblxuICAgICAgICByZXR1cm4gKF90aGlzJHByb3BzNCA9IF90aGlzLnByb3BzKS5vbkNoYW5nZS5hcHBseShfdGhpcyRwcm9wczQsIFtldmVudF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLnByb3BzLnZhbHVlTGluaykge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMkdmFsdWVMaW5rO1xuXG4gICAgICAgIHJldHVybiAoX3RoaXMkcHJvcHMkdmFsdWVMaW5rID0gX3RoaXMucHJvcHMudmFsdWVMaW5rKS5yZXF1ZXN0Q2hhbmdlLmFwcGx5KF90aGlzJHByb3BzJHZhbHVlTGluaywgW2V2ZW50LnRhcmdldC52YWx1ZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJoYW5kbGVDaGFuZ2VcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICBpc0NvbXBvc2luZyA9IGZhbHNlO1xuXG4gICAgICBpZiAoaXNJRSgpKSB7XG4gICAgICAgIC8vIGlmIHdlIGFyZSBpbnNpZGUgaWZyYW1lLCB3ZSBuZWVkIHRvIGZpbmQgYWN0aXZlRWxlbWVudCB3aXRoaW4gaXRzIGNvbnRlbnREb2N1bWVudFxuICAgICAgICB2YXIgY3VycmVudERvY3VtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNvbnRlbnREb2N1bWVudCB8fCBkb2N1bWVudDtcblxuICAgICAgICBpZiAoY3VycmVudERvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGV2LnRhcmdldCkge1xuICAgICAgICAgIC8vIGZpeCBhbiBJRSBidWcgKGJsdXIgZnJvbSBlbXB0eSBpbnB1dCBlbGVtZW50IHdpdGggcGxhY2Vob2xkZXIgYXR0cmlidXRlIHRyaWdnZXIgXCJpbnB1dFwiIGV2ZW50KVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSBfdGhpcy5wcm9wcy52YWx1ZSB8fCAnJztcbiAgICAgIHZhciBjb25maWcgPSByZWFkQ29uZmlnRnJvbUNoaWxkcmVuKF90aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgICAgIHZhciBuZXdQbGFpblRleHRWYWx1ZSA9IGV2LnRhcmdldC52YWx1ZTsgLy8gRGVyaXZlIHRoZSBuZXcgdmFsdWUgdG8gc2V0IGJ5IGFwcGx5aW5nIHRoZSBsb2NhbCBjaGFuZ2UgaW4gdGhlIHRleHRhcmVhJ3MgcGxhaW4gdGV4dFxuXG4gICAgICB2YXIgbmV3VmFsdWUgPSBhcHBseUNoYW5nZVRvVmFsdWUodmFsdWUsIG5ld1BsYWluVGV4dFZhbHVlLCB7XG4gICAgICAgIHNlbGVjdGlvblN0YXJ0QmVmb3JlOiBfdGhpcy5zdGF0ZS5zZWxlY3Rpb25TdGFydCxcbiAgICAgICAgc2VsZWN0aW9uRW5kQmVmb3JlOiBfdGhpcy5zdGF0ZS5zZWxlY3Rpb25FbmQsXG4gICAgICAgIHNlbGVjdGlvbkVuZEFmdGVyOiBldi50YXJnZXQuc2VsZWN0aW9uRW5kXG4gICAgICB9LCBjb25maWcpOyAvLyBJbiBjYXNlIGEgbWVudGlvbiBpcyBkZWxldGVkLCBhbHNvIGFkanVzdCB0aGUgbmV3IHBsYWluIHRleHQgdmFsdWVcblxuICAgICAgbmV3UGxhaW5UZXh0VmFsdWUgPSBnZXRQbGFpblRleHQobmV3VmFsdWUsIGNvbmZpZyk7IC8vIFNhdmUgY3VycmVudCBzZWxlY3Rpb24gYWZ0ZXIgY2hhbmdlIHRvIGJlIGFibGUgdG8gcmVzdG9yZSBjYXJldCBwb3NpdGlvbiBhZnRlciByZXJlbmRlcmluZ1xuXG4gICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSBldi50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICB2YXIgc2VsZWN0aW9uRW5kID0gZXYudGFyZ2V0LnNlbGVjdGlvbkVuZDtcbiAgICAgIHZhciBzZXRTZWxlY3Rpb25BZnRlck1lbnRpb25DaGFuZ2UgPSBmYWxzZTsgLy8gQWRqdXN0IHNlbGVjdGlvbiByYW5nZSBpbiBjYXNlIGEgbWVudGlvbiB3aWxsIGJlIGRlbGV0ZWQgYnkgdGhlIGNoYXJhY3RlcnMgb3V0c2lkZSBvZiB0aGVcbiAgICAgIC8vIHNlbGVjdGlvbiByYW5nZSB0aGF0IGFyZSBhdXRvbWF0aWNhbGx5IGRlbGV0ZWRcblxuICAgICAgdmFyIHN0YXJ0T2ZNZW50aW9uID0gZmluZFN0YXJ0T2ZNZW50aW9uSW5QbGFpblRleHQodmFsdWUsIGNvbmZpZywgc2VsZWN0aW9uU3RhcnQpO1xuXG4gICAgICBpZiAoc3RhcnRPZk1lbnRpb24gIT09IHVuZGVmaW5lZCAmJiBfdGhpcy5zdGF0ZS5zZWxlY3Rpb25FbmQgPiBzdGFydE9mTWVudGlvbikge1xuICAgICAgICAvLyBvbmx5IGlmIGEgZGVsZXRpb24gaGFzIHRha2VuIHBsYWNlXG4gICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gc3RhcnRPZk1lbnRpb247XG4gICAgICAgIHNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvblN0YXJ0O1xuICAgICAgICBzZXRTZWxlY3Rpb25BZnRlck1lbnRpb25DaGFuZ2UgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHNlbGVjdGlvblN0YXJ0OiBzZWxlY3Rpb25TdGFydCxcbiAgICAgICAgc2VsZWN0aW9uRW5kOiBzZWxlY3Rpb25FbmQsXG4gICAgICAgIHNldFNlbGVjdGlvbkFmdGVyTWVudGlvbkNoYW5nZTogc2V0U2VsZWN0aW9uQWZ0ZXJNZW50aW9uQ2hhbmdlXG4gICAgICB9KTtcblxuICAgICAgdmFyIG1lbnRpb25zID0gZ2V0TWVudGlvbnMobmV3VmFsdWUsIGNvbmZpZyk7IC8vIFByb3BhZ2F0ZSBjaGFuZ2VcbiAgICAgIC8vIGxldCBoYW5kbGVDaGFuZ2UgPSB0aGlzLmdldE9uQ2hhbmdlKHRoaXMucHJvcHMpIHx8IGVtcHR5RnVuY3Rpb247XG5cbiAgICAgIHZhciBldmVudE1vY2sgPSB7XG4gICAgICAgIHRhcmdldDoge1xuICAgICAgICAgIHZhbHVlOiBuZXdWYWx1ZVxuICAgICAgICB9XG4gICAgICB9OyAvLyB0aGlzLnByb3BzLm9uQ2hhbmdlLmNhbGwodGhpcywgZXZlbnRNb2NrLCBuZXdWYWx1ZSwgbmV3UGxhaW5UZXh0VmFsdWUsIG1lbnRpb25zKTtcblxuICAgICAgX3RoaXMuZXhlY3V0ZU9uQ2hhbmdlKGV2ZW50TW9jaywgbmV3VmFsdWUsIG5ld1BsYWluVGV4dFZhbHVlLCBtZW50aW9ucyk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaGFuZGxlU2VsZWN0XCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgLy8ga2VlcCB0cmFjayBvZiBzZWxlY3Rpb24gcmFuZ2UgLyBjYXJldCBwb3NpdGlvblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzZWxlY3Rpb25TdGFydDogZXYudGFyZ2V0LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICBzZWxlY3Rpb25FbmQ6IGV2LnRhcmdldC5zZWxlY3Rpb25FbmRcbiAgICAgIH0pOyAvLyBkbyBub3RoaW5nIHdoaWxlIGEgSU1FIGNvbXBvc2l0aW9uIHNlc3Npb24gaXMgYWN0aXZlXG5cblxuICAgICAgaWYgKGlzQ29tcG9zaW5nKSByZXR1cm47IC8vIHJlZnJlc2ggc3VnZ2VzdGlvbnMgcXVlcmllc1xuXG4gICAgICB2YXIgZWwgPSBfdGhpcy5pbnB1dEVsZW1lbnQ7XG5cbiAgICAgIGlmIChldi50YXJnZXQuc2VsZWN0aW9uU3RhcnQgPT09IGV2LnRhcmdldC5zZWxlY3Rpb25FbmQpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlTWVudGlvbnNRdWVyaWVzKGVsLnZhbHVlLCBldi50YXJnZXQuc2VsZWN0aW9uU3RhcnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMuY2xlYXJTdWdnZXN0aW9ucygpO1xuICAgICAgfSAvLyBzeW5jIGhpZ2hsaWdodGVycyBzY3JvbGwgcG9zaXRpb25cblxuXG4gICAgICBfdGhpcy51cGRhdGVIaWdobGlnaHRlclNjcm9sbCgpO1xuXG4gICAgICBfdGhpcy5wcm9wcy5vblNlbGVjdChldik7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaGFuZGxlS2V5RG93blwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgIC8vIGRvIG5vdCBpbnRlcmNlcHQga2V5IGV2ZW50cyBpZiB0aGUgc3VnZ2VzdGlvbnMgb3ZlcmxheSBpcyBub3Qgc2hvd25cbiAgICAgIHZhciBzdWdnZXN0aW9uc0NvdW50ID0gY291bnRTdWdnZXN0aW9ucyhfdGhpcy5zdGF0ZS5zdWdnZXN0aW9ucyk7XG5cbiAgICAgIGlmIChzdWdnZXN0aW9uc0NvdW50ID09PSAwIHx8ICFfdGhpcy5zdWdnZXN0aW9uc0VsZW1lbnQpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25LZXlEb3duKGV2KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3QudmFsdWVzKEtFWSkuaW5kZXhPZihldi5rZXlDb2RlKSA+PSAwKSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGV2LmtleUNvZGUpIHtcbiAgICAgICAgY2FzZSBLRVkuRVNDOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIF90aGlzLmNsZWFyU3VnZ2VzdGlvbnMoKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICBjYXNlIEtFWS5ET1dOOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIF90aGlzLnNoaWZ0Rm9jdXMoKzEpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgS0VZLlVQOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIF90aGlzLnNoaWZ0Rm9jdXMoLTEpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgS0VZLlJFVFVSTjpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBfdGhpcy5zZWxlY3RGb2N1c2VkKCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSBLRVkuVEFCOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdEZvY3VzZWQoKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2hpZnRGb2N1c1wiLCBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgIHZhciBzdWdnZXN0aW9uc0NvdW50ID0gY291bnRTdWdnZXN0aW9ucyhfdGhpcy5zdGF0ZS5zdWdnZXN0aW9ucyk7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZm9jdXNJbmRleDogKHN1Z2dlc3Rpb25zQ291bnQgKyBfdGhpcy5zdGF0ZS5mb2N1c0luZGV4ICsgZGVsdGEpICUgc3VnZ2VzdGlvbnNDb3VudCxcbiAgICAgICAgc2Nyb2xsRm9jdXNlZEludG9WaWV3OiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJzZWxlY3RGb2N1c2VkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSBfdGhpcy5zdGF0ZSxcbiAgICAgICAgICBzdWdnZXN0aW9ucyA9IF90aGlzJHN0YXRlMi5zdWdnZXN0aW9ucyxcbiAgICAgICAgICBmb2N1c0luZGV4ID0gX3RoaXMkc3RhdGUyLmZvY3VzSW5kZXg7XG4gICAgICB2YXIgX09iamVjdCR2YWx1ZXMkcmVkdWNlID0gT2JqZWN0LnZhbHVlcyhzdWdnZXN0aW9ucykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIF9yZWYpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBfcmVmLnJlc3VsdHMsXG4gICAgICAgICAgICBxdWVyeUluZm8gPSBfcmVmLnF1ZXJ5SW5mbztcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjKSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlc3VsdHMubWFwKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQsXG4gICAgICAgICAgICBxdWVyeUluZm86IHF1ZXJ5SW5mb1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKSk7XG4gICAgICB9LCBbXSlbZm9jdXNJbmRleF0sXG4gICAgICAgICAgcmVzdWx0ID0gX09iamVjdCR2YWx1ZXMkcmVkdWNlLnJlc3VsdCxcbiAgICAgICAgICBxdWVyeUluZm8gPSBfT2JqZWN0JHZhbHVlcyRyZWR1Y2UucXVlcnlJbmZvO1xuXG4gICAgICBfdGhpcy5hZGRNZW50aW9uKHJlc3VsdCwgcXVlcnlJbmZvKTtcblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmb2N1c0luZGV4OiAwXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJoYW5kbGVCbHVyXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgdmFyIGNsaWNrZWRTdWdnZXN0aW9uID0gX3RoaXMuX3N1Z2dlc3Rpb25zTW91c2VEb3duO1xuICAgICAgX3RoaXMuX3N1Z2dlc3Rpb25zTW91c2VEb3duID0gZmFsc2U7IC8vIG9ubHkgcmVzZXQgc2VsZWN0aW9uIGlmIHRoZSBtb3VzZWRvd24gaGFwcGVuZWQgb24gYW4gZWxlbWVudFxuICAgICAgLy8gb3RoZXIgdGhhbiB0aGUgc3VnZ2VzdGlvbnMgb3ZlcmxheVxuXG4gICAgICBpZiAoIWNsaWNrZWRTdWdnZXN0aW9uKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzZWxlY3Rpb25TdGFydDogbnVsbCxcbiAgICAgICAgICBzZWxlY3Rpb25FbmQ6IG51bGxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlSGlnaGxpZ2h0ZXJTY3JvbGwoKTtcbiAgICAgIH0sIDEpO1xuXG4gICAgICBfdGhpcy5wcm9wcy5vbkJsdXIoZXYsIGNsaWNrZWRTdWdnZXN0aW9uKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJoYW5kbGVTdWdnZXN0aW9uc01vdXNlRG93blwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgIF90aGlzLl9zdWdnZXN0aW9uc01vdXNlRG93biA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaGFuZGxlU3VnZ2VzdGlvbnNNb3VzZUVudGVyXCIsIGZ1bmN0aW9uIChmb2N1c0luZGV4KSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZvY3VzSW5kZXg6IGZvY3VzSW5kZXgsXG4gICAgICAgIHNjcm9sbEZvY3VzZWRJbnRvVmlldzogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInVwZGF0ZVN1Z2dlc3Rpb25zUG9zaXRpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhcmV0UG9zaXRpb24gPSBfdGhpcy5zdGF0ZS5jYXJldFBvc2l0aW9uO1xuICAgICAgdmFyIF90aGlzJHByb3BzNSA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zUG9ydGFsSG9zdCA9IF90aGlzJHByb3BzNS5zdWdnZXN0aW9uc1BvcnRhbEhvc3QsXG4gICAgICAgICAgYWxsb3dTdWdnZXN0aW9uc0Fib3ZlQ3Vyc29yID0gX3RoaXMkcHJvcHM1LmFsbG93U3VnZ2VzdGlvbnNBYm92ZUN1cnNvcixcbiAgICAgICAgICBmb3JjZVN1Z2dlc3Rpb25zQWJvdmVDdXJzb3IgPSBfdGhpcyRwcm9wczUuZm9yY2VTdWdnZXN0aW9uc0Fib3ZlQ3Vyc29yO1xuXG4gICAgICBpZiAoIWNhcmV0UG9zaXRpb24gfHwgIV90aGlzLnN1Z2dlc3Rpb25zRWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzdWdnZXN0aW9ucyA9IF90aGlzLnN1Z2dlc3Rpb25zRWxlbWVudDtcbiAgICAgIHZhciBoaWdobGlnaHRlciA9IF90aGlzLmhpZ2hsaWdodGVyRWxlbWVudDsgLy8gZmlyc3QgZ2V0IHZpZXdwb3J0LXJlbGF0aXZlIHBvc2l0aW9uIChoaWdobGlnaHRlciBpcyBvZmZzZXRQYXJlbnQgb2YgY2FyZXQpOlxuXG4gICAgICB2YXIgY2FyZXRPZmZzZXRQYXJlbnRSZWN0ID0gaGlnaGxpZ2h0ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgY2FyZXRIZWlnaHQgPSBnZXRDb21wdXRlZFN0eWxlTGVuZ3RoUHJvcChoaWdobGlnaHRlciwgJ2ZvbnQtc2l6ZScpO1xuICAgICAgdmFyIHZpZXdwb3J0UmVsYXRpdmUgPSB7XG4gICAgICAgIGxlZnQ6IGNhcmV0T2Zmc2V0UGFyZW50UmVjdC5sZWZ0ICsgY2FyZXRQb3NpdGlvbi5sZWZ0LFxuICAgICAgICB0b3A6IGNhcmV0T2Zmc2V0UGFyZW50UmVjdC50b3AgKyBjYXJldFBvc2l0aW9uLnRvcCArIGNhcmV0SGVpZ2h0XG4gICAgICB9O1xuICAgICAgdmFyIHZpZXdwb3J0SGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApO1xuXG4gICAgICBpZiAoIXN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBvc2l0aW9uID0ge307IC8vIGlmIHN1Z2dlc3Rpb25zIG1lbnUgaXMgaW4gYSBwb3J0YWwsIHVwZGF0ZSBwb3NpdGlvbiB0byBiZSByZWxlYXRpdmUgdG8gaXRzIHBvcnRhbCBub2RlXG5cbiAgICAgIGlmIChzdWdnZXN0aW9uc1BvcnRhbEhvc3QpIHtcbiAgICAgICAgcG9zaXRpb24ucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICB2YXIgbGVmdCA9IHZpZXdwb3J0UmVsYXRpdmUubGVmdDtcbiAgICAgICAgdmFyIHRvcCA9IHZpZXdwb3J0UmVsYXRpdmUudG9wOyAvLyBhYnNvbHV0ZS9maXhlZCBwb3NpdGlvbmVkIGVsZW1lbnRzIGFyZSBwb3NpdGlvbmVkIGFjY29yZGluZyB0byB0aGVpciBlbnRpcmUgYm94IGluY2x1ZGluZyBtYXJnaW5zOyBzbyB3ZSByZW1vdmUgbWFyZ2lucyBoZXJlOlxuXG4gICAgICAgIGxlZnQgLT0gZ2V0Q29tcHV0ZWRTdHlsZUxlbmd0aFByb3Aoc3VnZ2VzdGlvbnMsICdtYXJnaW4tbGVmdCcpO1xuICAgICAgICB0b3AgLT0gZ2V0Q29tcHV0ZWRTdHlsZUxlbmd0aFByb3Aoc3VnZ2VzdGlvbnMsICdtYXJnaW4tdG9wJyk7IC8vIHRha2UgaW50byBhY2NvdW50IGhpZ2hsaWdodGVyL3RleHRpbnB1dCBzY3JvbGxpbmc6XG5cbiAgICAgICAgbGVmdCAtPSBoaWdobGlnaHRlci5zY3JvbGxMZWZ0O1xuICAgICAgICB0b3AgLT0gaGlnaGxpZ2h0ZXIuc2Nyb2xsVG9wOyAvLyBndWFyZCBmb3IgbWVudGlvbnMgc3VnZ2VzdGlvbnMgbGlzdCBjbGlwcGVkIGJ5IHJpZ2h0IGVkZ2Ugb2Ygd2luZG93XG5cbiAgICAgICAgdmFyIHZpZXdwb3J0V2lkdGggPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xuXG4gICAgICAgIGlmIChsZWZ0ICsgc3VnZ2VzdGlvbnMub2Zmc2V0V2lkdGggPiB2aWV3cG9ydFdpZHRoKSB7XG4gICAgICAgICAgcG9zaXRpb24ubGVmdCA9IE1hdGgubWF4KDAsIHZpZXdwb3J0V2lkdGggLSBzdWdnZXN0aW9ucy5vZmZzZXRXaWR0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcG9zaXRpb24ubGVmdCA9IGxlZnQ7XG4gICAgICAgIH0gLy8gZ3VhcmQgZm9yIG1lbnRpb25zIHN1Z2dlc3Rpb25zIGxpc3QgY2xpcHBlZCBieSBib3R0b20gZWRnZSBvZiB3aW5kb3cgaWYgYWxsb3dTdWdnZXN0aW9uc0Fib3ZlQ3Vyc29yIHNldCB0byB0cnVlLlxuICAgICAgICAvLyBNb3ZlIHRoZSBsaXN0IHVwIGFib3ZlIHRoZSBjYXJldCBpZiBpdCdzIGdldHRpbmcgY3V0IG9mZiBieSB0aGUgYm90dG9tIG9mIHRoZSB3aW5kb3csIHByb3ZpZGVkIHRoYXQgdGhlIGxpc3QgaGVpZ2h0XG4gICAgICAgIC8vIGlzIHNtYWxsIGVub3VnaCB0byBOT1QgY292ZXIgdXAgdGhlIGNhcmV0XG5cblxuICAgICAgICBpZiAoYWxsb3dTdWdnZXN0aW9uc0Fib3ZlQ3Vyc29yICYmIHRvcCArIHN1Z2dlc3Rpb25zLm9mZnNldEhlaWdodCA+IHZpZXdwb3J0SGVpZ2h0ICYmIHN1Z2dlc3Rpb25zLm9mZnNldEhlaWdodCA8IHRvcCAtIGNhcmV0SGVpZ2h0IHx8IGZvcmNlU3VnZ2VzdGlvbnNBYm92ZUN1cnNvcikge1xuICAgICAgICAgIHBvc2l0aW9uLnRvcCA9IE1hdGgubWF4KDAsIHRvcCAtIHN1Z2dlc3Rpb25zLm9mZnNldEhlaWdodCAtIGNhcmV0SGVpZ2h0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3NpdGlvbi50b3AgPSB0b3A7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfbGVmdCA9IGNhcmV0UG9zaXRpb24ubGVmdCAtIGhpZ2hsaWdodGVyLnNjcm9sbExlZnQ7XG5cbiAgICAgICAgdmFyIF90b3AgPSBjYXJldFBvc2l0aW9uLnRvcCAtIGhpZ2hsaWdodGVyLnNjcm9sbFRvcDsgLy8gZ3VhcmQgZm9yIG1lbnRpb25zIHN1Z2dlc3Rpb25zIGxpc3QgY2xpcHBlZCBieSByaWdodCBlZGdlIG9mIHdpbmRvd1xuXG5cbiAgICAgICAgaWYgKF9sZWZ0ICsgc3VnZ2VzdGlvbnMub2Zmc2V0V2lkdGggPiBfdGhpcy5jb250YWluZXJFbGVtZW50Lm9mZnNldFdpZHRoKSB7XG4gICAgICAgICAgcG9zaXRpb24ucmlnaHQgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvc2l0aW9uLmxlZnQgPSBfbGVmdDtcbiAgICAgICAgfSAvLyBndWFyZCBmb3IgbWVudGlvbnMgc3VnZ2VzdGlvbnMgbGlzdCBjbGlwcGVkIGJ5IGJvdHRvbSBlZGdlIG9mIHdpbmRvdyBpZiBhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3Igc2V0IHRvIHRydWUuXG4gICAgICAgIC8vIG1vdmUgdGhlIGxpc3QgdXAgYWJvdmUgdGhlIGNhcmV0IGlmIGl0J3MgZ2V0dGluZyBjdXQgb2ZmIGJ5IHRoZSBib3R0b20gb2YgdGhlIHdpbmRvdywgcHJvdmlkZWQgdGhhdCB0aGUgbGlzdCBoZWlnaHRcbiAgICAgICAgLy8gaXMgc21hbGwgZW5vdWdoIHRvIE5PVCBjb3ZlciB1cCB0aGUgY2FyZXRcblxuXG4gICAgICAgIGlmIChhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3IgJiYgdmlld3BvcnRSZWxhdGl2ZS50b3AgLSBoaWdobGlnaHRlci5zY3JvbGxUb3AgKyBzdWdnZXN0aW9ucy5vZmZzZXRIZWlnaHQgPiB2aWV3cG9ydEhlaWdodCAmJiBzdWdnZXN0aW9ucy5vZmZzZXRIZWlnaHQgPCBjYXJldE9mZnNldFBhcmVudFJlY3QudG9wIC0gY2FyZXRIZWlnaHQgLSBoaWdobGlnaHRlci5zY3JvbGxUb3ApIHtcbiAgICAgICAgICBwb3NpdGlvbi50b3AgPSBfdG9wIC0gc3VnZ2VzdGlvbnMub2Zmc2V0SGVpZ2h0IC0gY2FyZXRIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcG9zaXRpb24udG9wID0gX3RvcDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocG9zaXRpb24ubGVmdCA9PT0gX3RoaXMuc3RhdGUuc3VnZ2VzdGlvbnNQb3NpdGlvbi5sZWZ0ICYmIHBvc2l0aW9uLnRvcCA9PT0gX3RoaXMuc3RhdGUuc3VnZ2VzdGlvbnNQb3NpdGlvbi50b3AgJiYgcG9zaXRpb24ucG9zaXRpb24gPT09IF90aGlzLnN0YXRlLnN1Z2dlc3Rpb25zUG9zaXRpb24ucG9zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN1Z2dlc3Rpb25zUG9zaXRpb246IHBvc2l0aW9uXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJ1cGRhdGVIaWdobGlnaHRlclNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaW5wdXQgPSBfdGhpcy5pbnB1dEVsZW1lbnQ7XG4gICAgICB2YXIgaGlnaGxpZ2h0ZXIgPSBfdGhpcy5oaWdobGlnaHRlckVsZW1lbnQ7XG5cbiAgICAgIGlmICghaW5wdXQgfHwgIWhpZ2hsaWdodGVyKSB7XG4gICAgICAgIC8vIHNpbmNlIHRoZSBpbnZvY2F0aW9uIG9mIHRoaXMgZnVuY3Rpb24gaXMgZGVmZXJyZWQsXG4gICAgICAgIC8vIHRoZSB3aG9sZSBjb21wb25lbnQgbWF5IGhhdmUgYmVlbiB1bm1vdW50ZWQgaW4gdGhlIG1lYW53aGlsZVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGhpZ2hsaWdodGVyLnNjcm9sbExlZnQgPSBpbnB1dC5zY3JvbGxMZWZ0O1xuICAgICAgaGlnaGxpZ2h0ZXIuc2Nyb2xsVG9wID0gaW5wdXQuc2Nyb2xsVG9wO1xuICAgICAgaGlnaGxpZ2h0ZXIuaGVpZ2h0ID0gaW5wdXQuaGVpZ2h0O1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImhhbmRsZUNvbXBvc2l0aW9uU3RhcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaXNDb21wb3NpbmcgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImhhbmRsZUNvbXBvc2l0aW9uRW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzQ29tcG9zaW5nID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwic2V0U2VsZWN0aW9uXCIsIGZ1bmN0aW9uIChzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSB7XG4gICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgPT09IG51bGwgfHwgc2VsZWN0aW9uRW5kID09PSBudWxsKSByZXR1cm47XG4gICAgICB2YXIgZWwgPSBfdGhpcy5pbnB1dEVsZW1lbnQ7XG5cbiAgICAgIGlmIChlbC5zZXRTZWxlY3Rpb25SYW5nZSkge1xuICAgICAgICBlbC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwuY3JlYXRlVGV4dFJhbmdlKSB7XG4gICAgICAgIHZhciByYW5nZSA9IGVsLmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgc2VsZWN0aW9uRW5kKTtcbiAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBzZWxlY3Rpb25TdGFydCk7XG4gICAgICAgIHJhbmdlLnNlbGVjdCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInVwZGF0ZU1lbnRpb25zUXVlcmllc1wiLCBmdW5jdGlvbiAocGxhaW5UZXh0VmFsdWUsIGNhcmV0UG9zaXRpb24pIHtcbiAgICAgIC8vIEludmFsaWRhdGUgcHJldmlvdXMgcXVlcmllcy4gQXN5bmMgcmVzdWx0cyBmb3IgcHJldmlvdXMgcXVlcmllcyB3aWxsIGJlIG5lZ2xlY3RlZC5cbiAgICAgIF90aGlzLl9xdWVyeUlkKys7XG4gICAgICBfdGhpcy5zdWdnZXN0aW9ucyA9IHt9O1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN1Z2dlc3Rpb25zOiB7fVxuICAgICAgfSk7XG5cbiAgICAgIHZhciB2YWx1ZSA9IF90aGlzLnByb3BzLnZhbHVlIHx8ICcnO1xuICAgICAgdmFyIGNoaWxkcmVuID0gX3RoaXMucHJvcHMuY2hpbGRyZW47XG4gICAgICB2YXIgY29uZmlnID0gcmVhZENvbmZpZ0Zyb21DaGlsZHJlbihjaGlsZHJlbik7XG4gICAgICB2YXIgcG9zaXRpb25JblZhbHVlID0gbWFwUGxhaW5UZXh0SW5kZXgodmFsdWUsIGNvbmZpZywgY2FyZXRQb3NpdGlvbiwgJ05VTEwnKTsgLy8gSWYgY2FyZXQgaXMgaW5zaWRlIG9mIG1lbnRpb24sIGRvIG5vdCBxdWVyeVxuXG4gICAgICBpZiAocG9zaXRpb25JblZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gRXh0cmFjdCBzdWJzdHJpbmcgaW4gYmV0d2VlbiB0aGUgZW5kIG9mIHRoZSBwcmV2aW91cyBtZW50aW9uIGFuZCB0aGUgY2FyZXRcblxuXG4gICAgICB2YXIgc3Vic3RyaW5nU3RhcnRJbmRleCA9IGdldEVuZE9mTGFzdE1lbnRpb24odmFsdWUuc3Vic3RyaW5nKDAsIHBvc2l0aW9uSW5WYWx1ZSksIGNvbmZpZyk7XG4gICAgICB2YXIgc3Vic3RyaW5nID0gcGxhaW5UZXh0VmFsdWUuc3Vic3RyaW5nKHN1YnN0cmluZ1N0YXJ0SW5kZXgsIGNhcmV0UG9zaXRpb24pOyAvLyBDaGVjayBpZiBzdWdnZXN0aW9ucyBoYXZlIHRvIGJlIHNob3duOlxuICAgICAgLy8gTWF0Y2ggdGhlIHRyaWdnZXIgcGF0dGVybnMgb2YgYWxsIE1lbnRpb24gY2hpbGRyZW4gb24gdGhlIGV4dHJhY3RlZCBzdWJzdHJpbmdcblxuICAgICAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkLCBjaGlsZEluZGV4KSB7XG4gICAgICAgIGlmICghY2hpbGQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVnZXggPSBtYWtlVHJpZ2dlclJlZ2V4KGNoaWxkLnByb3BzLnRyaWdnZXIsIF90aGlzLnByb3BzKTtcbiAgICAgICAgdmFyIG1hdGNoID0gc3Vic3RyaW5nLm1hdGNoKHJlZ2V4KTtcblxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICB2YXIgcXVlcnlTZXF1ZW5jZVN0YXJ0ID0gc3Vic3RyaW5nU3RhcnRJbmRleCArIHN1YnN0cmluZy5pbmRleE9mKG1hdGNoWzFdLCBtYXRjaC5pbmRleCk7XG5cbiAgICAgICAgICBfdGhpcy5xdWVyeURhdGEobWF0Y2hbMl0sIGNoaWxkSW5kZXgsIHF1ZXJ5U2VxdWVuY2VTdGFydCwgcXVlcnlTZXF1ZW5jZVN0YXJ0ICsgbWF0Y2hbMV0ubGVuZ3RoLCBwbGFpblRleHRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImNsZWFyU3VnZ2VzdGlvbnNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gSW52YWxpZGF0ZSBwcmV2aW91cyBxdWVyaWVzLiBBc3luYyByZXN1bHRzIGZvciBwcmV2aW91cyBxdWVyaWVzIHdpbGwgYmUgbmVnbGVjdGVkLlxuICAgICAgX3RoaXMuX3F1ZXJ5SWQrKztcbiAgICAgIF90aGlzLnN1Z2dlc3Rpb25zID0ge307XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3VnZ2VzdGlvbnM6IHt9LFxuICAgICAgICBmb2N1c0luZGV4OiAwXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJxdWVyeURhdGFcIiwgZnVuY3Rpb24gKHF1ZXJ5LCBjaGlsZEluZGV4LCBxdWVyeVNlcXVlbmNlU3RhcnQsIHF1ZXJ5U2VxdWVuY2VFbmQsIHBsYWluVGV4dFZhbHVlKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM2ID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wczYuY2hpbGRyZW4sXG4gICAgICAgICAgaWdub3JlQWNjZW50cyA9IF90aGlzJHByb3BzNi5pZ25vcmVBY2NlbnRzO1xuICAgICAgdmFyIG1lbnRpb25DaGlsZCA9IENoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pW2NoaWxkSW5kZXhdO1xuICAgICAgdmFyIHByb3ZpZGVEYXRhID0gZ2V0RGF0YVByb3ZpZGVyKG1lbnRpb25DaGlsZC5wcm9wcy5kYXRhLCBpZ25vcmVBY2NlbnRzKTtcbiAgICAgIHZhciBzeW5jUmVzdWx0ID0gcHJvdmlkZURhdGEocXVlcnksIF90aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zLmJpbmQobnVsbCwgX3RoaXMuX3F1ZXJ5SWQsIGNoaWxkSW5kZXgsIHF1ZXJ5LCBxdWVyeVNlcXVlbmNlU3RhcnQsIHF1ZXJ5U2VxdWVuY2VFbmQsIHBsYWluVGV4dFZhbHVlKSk7XG5cbiAgICAgIGlmIChzeW5jUmVzdWx0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlU3VnZ2VzdGlvbnMoX3RoaXMuX3F1ZXJ5SWQsIGNoaWxkSW5kZXgsIHF1ZXJ5LCBxdWVyeVNlcXVlbmNlU3RhcnQsIHF1ZXJ5U2VxdWVuY2VFbmQsIHBsYWluVGV4dFZhbHVlLCBzeW5jUmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJ1cGRhdGVTdWdnZXN0aW9uc1wiLCBmdW5jdGlvbiAocXVlcnlJZCwgY2hpbGRJbmRleCwgcXVlcnksIHF1ZXJ5U2VxdWVuY2VTdGFydCwgcXVlcnlTZXF1ZW5jZUVuZCwgcGxhaW5UZXh0VmFsdWUsIHJlc3VsdHMpIHtcbiAgICAgIC8vIG5lZ2xlY3QgYXN5bmMgcmVzdWx0cyBmcm9tIHByZXZpb3VzIHF1ZXJpZXNcbiAgICAgIGlmIChxdWVyeUlkICE9PSBfdGhpcy5fcXVlcnlJZCkgcmV0dXJuOyAvLyBzYXZlIGluIHByb3BlcnR5IHNvIHRoYXQgbXVsdGlwbGUgc3luYyBzdGF0ZSB1cGRhdGVzIGZyb20gZGlmZmVyZW50IG1lbnRpb25zIHNvdXJjZXNcbiAgICAgIC8vIHdvbid0IG92ZXJ3cml0ZSBlYWNoIG90aGVyXG5cbiAgICAgIF90aGlzLnN1Z2dlc3Rpb25zID0gX29iamVjdFNwcmVhZCh7fSwgX3RoaXMuc3VnZ2VzdGlvbnMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgY2hpbGRJbmRleCwge1xuICAgICAgICBxdWVyeUluZm86IHtcbiAgICAgICAgICBjaGlsZEluZGV4OiBjaGlsZEluZGV4LFxuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBxdWVyeVNlcXVlbmNlU3RhcnQ6IHF1ZXJ5U2VxdWVuY2VTdGFydCxcbiAgICAgICAgICBxdWVyeVNlcXVlbmNlRW5kOiBxdWVyeVNlcXVlbmNlRW5kLFxuICAgICAgICAgIHBsYWluVGV4dFZhbHVlOiBwbGFpblRleHRWYWx1ZVxuICAgICAgICB9LFxuICAgICAgICByZXN1bHRzOiByZXN1bHRzXG4gICAgICB9KSk7XG4gICAgICB2YXIgZm9jdXNJbmRleCA9IF90aGlzLnN0YXRlLmZvY3VzSW5kZXg7XG4gICAgICB2YXIgc3VnZ2VzdGlvbnNDb3VudCA9IGNvdW50U3VnZ2VzdGlvbnMoX3RoaXMuc3VnZ2VzdGlvbnMpO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN1Z2dlc3Rpb25zOiBfdGhpcy5zdWdnZXN0aW9ucyxcbiAgICAgICAgZm9jdXNJbmRleDogZm9jdXNJbmRleCA+PSBzdWdnZXN0aW9uc0NvdW50ID8gTWF0aC5tYXgoc3VnZ2VzdGlvbnNDb3VudCAtIDEsIDApIDogZm9jdXNJbmRleFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiYWRkTWVudGlvblwiLCBmdW5jdGlvbiAoX3JlZjIsIF9yZWYzKSB7XG4gICAgICB2YXIgaWQgPSBfcmVmMi5pZCxcbiAgICAgICAgICBkaXNwbGF5ID0gX3JlZjIuZGlzcGxheTtcbiAgICAgIHZhciBjaGlsZEluZGV4ID0gX3JlZjMuY2hpbGRJbmRleCxcbiAgICAgICAgICBxdWVyeVNlcXVlbmNlU3RhcnQgPSBfcmVmMy5xdWVyeVNlcXVlbmNlU3RhcnQsXG4gICAgICAgICAgcXVlcnlTZXF1ZW5jZUVuZCA9IF9yZWYzLnF1ZXJ5U2VxdWVuY2VFbmQsXG4gICAgICAgICAgcGxhaW5UZXh0VmFsdWUgPSBfcmVmMy5wbGFpblRleHRWYWx1ZTtcbiAgICAgIC8vIEluc2VydCBtZW50aW9uIGluIHRoZSBtYXJrZWQgdXAgdmFsdWUgYXQgdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICAgIHZhciB2YWx1ZSA9IF90aGlzLnByb3BzLnZhbHVlIHx8ICcnO1xuICAgICAgdmFyIGNvbmZpZyA9IHJlYWRDb25maWdGcm9tQ2hpbGRyZW4oX3RoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgICAgdmFyIG1lbnRpb25zQ2hpbGQgPSBDaGlsZHJlbi50b0FycmF5KF90aGlzLnByb3BzLmNoaWxkcmVuKVtjaGlsZEluZGV4XTtcbiAgICAgIHZhciBfbWVudGlvbnNDaGlsZCRwcm9wcyA9IG1lbnRpb25zQ2hpbGQucHJvcHMsXG4gICAgICAgICAgbWFya3VwID0gX21lbnRpb25zQ2hpbGQkcHJvcHMubWFya3VwLFxuICAgICAgICAgIGRpc3BsYXlUcmFuc2Zvcm0gPSBfbWVudGlvbnNDaGlsZCRwcm9wcy5kaXNwbGF5VHJhbnNmb3JtLFxuICAgICAgICAgIGFwcGVuZFNwYWNlT25BZGQgPSBfbWVudGlvbnNDaGlsZCRwcm9wcy5hcHBlbmRTcGFjZU9uQWRkLFxuICAgICAgICAgIG9uQWRkID0gX21lbnRpb25zQ2hpbGQkcHJvcHMub25BZGQ7XG4gICAgICB2YXIgc3RhcnQgPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBxdWVyeVNlcXVlbmNlU3RhcnQsICdTVEFSVCcpO1xuICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgcXVlcnlTZXF1ZW5jZUVuZCAtIHF1ZXJ5U2VxdWVuY2VTdGFydDtcbiAgICAgIHZhciBpbnNlcnQgPSBtYWtlTWVudGlvbnNNYXJrdXAobWFya3VwLCBpZCwgZGlzcGxheSk7XG5cbiAgICAgIGlmIChhcHBlbmRTcGFjZU9uQWRkKSB7XG4gICAgICAgIGluc2VydCArPSAnICc7XG4gICAgICB9XG5cbiAgICAgIHZhciBuZXdWYWx1ZSA9IHNwbGljZVN0cmluZyh2YWx1ZSwgc3RhcnQsIGVuZCwgaW5zZXJ0KTsgLy8gUmVmb2N1cyBpbnB1dCBhbmQgc2V0IGNhcmV0IHBvc2l0aW9uIHRvIGVuZCBvZiBtZW50aW9uXG5cbiAgICAgIF90aGlzLmlucHV0RWxlbWVudC5mb2N1cygpO1xuXG4gICAgICB2YXIgZGlzcGxheVZhbHVlID0gZGlzcGxheVRyYW5zZm9ybShpZCwgZGlzcGxheSk7XG5cbiAgICAgIGlmIChhcHBlbmRTcGFjZU9uQWRkKSB7XG4gICAgICAgIGRpc3BsYXlWYWx1ZSArPSAnICc7XG4gICAgICB9XG5cbiAgICAgIHZhciBuZXdDYXJldFBvc2l0aW9uID0gcXVlcnlTZXF1ZW5jZVN0YXJ0ICsgZGlzcGxheVZhbHVlLmxlbmd0aDtcblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzZWxlY3Rpb25TdGFydDogbmV3Q2FyZXRQb3NpdGlvbixcbiAgICAgICAgc2VsZWN0aW9uRW5kOiBuZXdDYXJldFBvc2l0aW9uLFxuICAgICAgICBzZXRTZWxlY3Rpb25BZnRlck1lbnRpb25DaGFuZ2U6IHRydWVcbiAgICAgIH0pOyAvLyBQcm9wYWdhdGUgY2hhbmdlXG5cblxuICAgICAgdmFyIGV2ZW50TW9jayA9IHtcbiAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgdmFsdWU6IG5ld1ZhbHVlXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgbWVudGlvbnMgPSBnZXRNZW50aW9ucyhuZXdWYWx1ZSwgY29uZmlnKTtcbiAgICAgIHZhciBuZXdQbGFpblRleHRWYWx1ZSA9IHNwbGljZVN0cmluZyhwbGFpblRleHRWYWx1ZSwgcXVlcnlTZXF1ZW5jZVN0YXJ0LCBxdWVyeVNlcXVlbmNlRW5kLCBkaXNwbGF5VmFsdWUpO1xuXG4gICAgICBfdGhpcy5leGVjdXRlT25DaGFuZ2UoZXZlbnRNb2NrLCBuZXdWYWx1ZSwgbmV3UGxhaW5UZXh0VmFsdWUsIG1lbnRpb25zKTtcblxuICAgICAgaWYgKG9uQWRkKSB7XG4gICAgICAgIG9uQWRkKGlkLCBkaXNwbGF5LCBzdGFydCwgZW5kKTtcbiAgICAgIH0gLy8gTWFrZSBzdXJlIHRoZSBzdWdnZXN0aW9ucyBvdmVybGF5IGlzIGNsb3NlZFxuXG5cbiAgICAgIF90aGlzLmNsZWFyU3VnZ2VzdGlvbnMoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJpc0xvYWRpbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChfdGhpcy5wcm9wcy5jaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIGlzTG9hZGluZyA9IGlzTG9hZGluZyB8fCBjaGlsZCAmJiBjaGlsZC5wcm9wcy5pc0xvYWRpbmc7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBpc0xvYWRpbmc7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaXNPcGVuZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGlzTnVtYmVyKF90aGlzLnN0YXRlLnNlbGVjdGlvblN0YXJ0KSAmJiAoY291bnRTdWdnZXN0aW9ucyhfdGhpcy5zdGF0ZS5zdWdnZXN0aW9ucykgIT09IDAgfHwgX3RoaXMuaXNMb2FkaW5nKCkpO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIl9xdWVyeUlkXCIsIDApO1xuXG4gICAgX3RoaXMuc3VnZ2VzdGlvbnMgPSB7fTtcbiAgICBfdGhpcy51dWlkU3VnZ2VzdGlvbnNPdmVybGF5ID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDIpO1xuICAgIF90aGlzLmhhbmRsZUNvcHkgPSBfdGhpcy5oYW5kbGVDb3B5LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLmhhbmRsZUN1dCA9IF90aGlzLmhhbmRsZUN1dC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5oYW5kbGVQYXN0ZSA9IF90aGlzLmhhbmRsZVBhc3RlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgZm9jdXNJbmRleDogMCxcbiAgICAgIHNlbGVjdGlvblN0YXJ0OiBudWxsLFxuICAgICAgc2VsZWN0aW9uRW5kOiBudWxsLFxuICAgICAgc3VnZ2VzdGlvbnM6IHt9LFxuICAgICAgY2FyZXRQb3NpdGlvbjogbnVsbCxcbiAgICAgIHN1Z2dlc3Rpb25zUG9zaXRpb246IHt9XG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWVudGlvbnNJbnB1dCwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb3B5JywgdGhpcy5oYW5kbGVDb3B5KTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2N1dCcsIHRoaXMuaGFuZGxlQ3V0KTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgdGhpcy5oYW5kbGVQYXN0ZSk7XG4gICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zUG9zaXRpb24oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgLy8gVXBkYXRlIHBvc2l0aW9uIG9mIHN1Z2dlc3Rpb25zIHVubGVzcyB0aGlzIGNvbXBvbmVudERpZFVwZGF0ZSB3YXNcbiAgICAgIC8vIHRyaWdnZXJlZCBieSBhbiB1cGRhdGUgdG8gc3VnZ2VzdGlvbnNQb3NpdGlvbi5cbiAgICAgIGlmIChwcmV2U3RhdGUuc3VnZ2VzdGlvbnNQb3NpdGlvbiA9PT0gdGhpcy5zdGF0ZS5zdWdnZXN0aW9uc1Bvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnNQb3NpdGlvbigpO1xuICAgICAgfSAvLyBtYWludGFpbiBzZWxlY3Rpb24gaW4gY2FzZSBhIG1lbnRpb24gaXMgYWRkZWQvcmVtb3ZlZCBjYXVzaW5nXG4gICAgICAvLyB0aGUgY3Vyc29yIHRvIGp1bXAgdG8gdGhlIGVuZFxuXG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLnNldFNlbGVjdGlvbkFmdGVyTWVudGlvbkNoYW5nZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb25BZnRlck1lbnRpb25DaGFuZ2U6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbih0aGlzLnN0YXRlLnNlbGVjdGlvblN0YXJ0LCB0aGlzLnN0YXRlLnNlbGVjdGlvbkVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29weScsIHRoaXMuaGFuZGxlQ29weSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjdXQnLCB0aGlzLmhhbmRsZUN1dCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwYXN0ZScsIHRoaXMuaGFuZGxlUGFzdGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgICAgICByZWY6IHRoaXMuc2V0Q29udGFpbmVyRWxlbWVudFxuICAgICAgfSwgdGhpcy5wcm9wcy5zdHlsZSksIHRoaXMucmVuZGVyQ29udHJvbCgpLCB0aGlzLnJlbmRlclN1Z2dlc3Rpb25zT3ZlcmxheSgpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlUGFzdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUGFzdGUoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnN1cHBvcnRzQ2xpcGJvYXJkQWN0aW9ucyhldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSBfdGhpcyRzdGF0ZTMuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgc2VsZWN0aW9uRW5kID0gX3RoaXMkc3RhdGUzLnNlbGVjdGlvbkVuZDtcbiAgICAgIHZhciBfdGhpcyRwcm9wczcgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHM3LnZhbHVlLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHM3LmNoaWxkcmVuO1xuICAgICAgdmFyIGNvbmZpZyA9IHJlYWRDb25maWdGcm9tQ2hpbGRyZW4oY2hpbGRyZW4pO1xuICAgICAgdmFyIG1hcmt1cFN0YXJ0SW5kZXggPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzZWxlY3Rpb25TdGFydCwgJ1NUQVJUJyk7XG4gICAgICB2YXIgbWFya3VwRW5kSW5kZXggPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzZWxlY3Rpb25FbmQsICdFTkQnKTtcbiAgICAgIHZhciBwYXN0ZWRNZW50aW9ucyA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9yZWFjdC1tZW50aW9ucycpO1xuICAgICAgdmFyIHBhc3RlZERhdGEgPSBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgIHZhciBuZXdWYWx1ZSA9IHNwbGljZVN0cmluZyh2YWx1ZSwgbWFya3VwU3RhcnRJbmRleCwgbWFya3VwRW5kSW5kZXgsIHBhc3RlZE1lbnRpb25zIHx8IHBhc3RlZERhdGEpLnJlcGxhY2UoL1xcci9nLCAnJyk7XG4gICAgICB2YXIgbmV3UGxhaW5UZXh0VmFsdWUgPSBnZXRQbGFpblRleHQobmV3VmFsdWUsIGNvbmZpZyk7XG4gICAgICB2YXIgZXZlbnRNb2NrID0ge1xuICAgICAgICB0YXJnZXQ6IF9vYmplY3RTcHJlYWQoe30sIGV2ZW50LnRhcmdldCwge1xuICAgICAgICAgIHZhbHVlOiBuZXdWYWx1ZVxuICAgICAgICB9KVxuICAgICAgfTtcbiAgICAgIHRoaXMuZXhlY3V0ZU9uQ2hhbmdlKGV2ZW50TW9jaywgbmV3VmFsdWUsIG5ld1BsYWluVGV4dFZhbHVlLCBnZXRNZW50aW9ucyhuZXdWYWx1ZSwgY29uZmlnKSk7IC8vIE1vdmUgdGhlIGN1cnNvciBwb3NpdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBwYXN0ZWQgZGF0YVxuXG4gICAgICB2YXIgc3RhcnRPZk1lbnRpb24gPSBmaW5kU3RhcnRPZk1lbnRpb25JblBsYWluVGV4dCh2YWx1ZSwgY29uZmlnLCBzZWxlY3Rpb25TdGFydCk7XG4gICAgICB2YXIgbmV4dFBvcyA9IChzdGFydE9mTWVudGlvbiB8fCBzZWxlY3Rpb25TdGFydCkgKyBnZXRQbGFpblRleHQocGFzdGVkTWVudGlvbnMgfHwgcGFzdGVkRGF0YSwgY29uZmlnKS5sZW5ndGg7XG4gICAgICB0aGlzLnNldFNlbGVjdGlvbihuZXh0UG9zLCBuZXh0UG9zKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2F2ZVNlbGVjdGlvblRvQ2xpcGJvYXJkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVTZWxlY3Rpb25Ub0NsaXBib2FyZChldmVudCkge1xuICAgICAgdmFyIF90aGlzJHN0YXRlNCA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSBfdGhpcyRzdGF0ZTQuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgICAgc2VsZWN0aW9uRW5kID0gX3RoaXMkc3RhdGU0LnNlbGVjdGlvbkVuZDtcbiAgICAgIHZhciBfdGhpcyRwcm9wczggPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHM4LmNoaWxkcmVuLFxuICAgICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHM4LnZhbHVlO1xuICAgICAgdmFyIGNvbmZpZyA9IHJlYWRDb25maWdGcm9tQ2hpbGRyZW4oY2hpbGRyZW4pO1xuICAgICAgdmFyIG1hcmt1cFN0YXJ0SW5kZXggPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzZWxlY3Rpb25TdGFydCwgJ1NUQVJUJyk7XG4gICAgICB2YXIgbWFya3VwRW5kSW5kZXggPSBtYXBQbGFpblRleHRJbmRleCh2YWx1ZSwgY29uZmlnLCBzZWxlY3Rpb25FbmQsICdFTkQnKTtcbiAgICAgIGV2ZW50LmNsaXBib2FyZERhdGEuc2V0RGF0YSgndGV4dC9wbGFpbicsIGV2ZW50LnRhcmdldC52YWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSk7XG4gICAgICBldmVudC5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcmVhY3QtbWVudGlvbnMnLCB2YWx1ZS5zbGljZShtYXJrdXBTdGFydEluZGV4LCBtYXJrdXBFbmRJbmRleCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdXBwb3J0c0NsaXBib2FyZEFjdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3VwcG9ydHNDbGlwYm9hcmRBY3Rpb25zKGV2ZW50KSB7XG4gICAgICByZXR1cm4gISFldmVudC5jbGlwYm9hcmREYXRhO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVDb3B5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNvcHkoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnN1cHBvcnRzQ2xpcGJvYXJkQWN0aW9ucyhldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zYXZlU2VsZWN0aW9uVG9DbGlwYm9hcmQoZXZlbnQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVDdXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ3V0KGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSB0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5zdXBwb3J0c0NsaXBib2FyZEFjdGlvbnMoZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc2F2ZVNlbGVjdGlvblRvQ2xpcGJvYXJkKGV2ZW50KTtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZTUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gX3RoaXMkc3RhdGU1LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgIHNlbGVjdGlvbkVuZCA9IF90aGlzJHN0YXRlNS5zZWxlY3Rpb25FbmQ7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM5ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzOS5jaGlsZHJlbixcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHByb3BzOS52YWx1ZTtcbiAgICAgIHZhciBjb25maWcgPSByZWFkQ29uZmlnRnJvbUNoaWxkcmVuKGNoaWxkcmVuKTtcbiAgICAgIHZhciBtYXJrdXBTdGFydEluZGV4ID0gbWFwUGxhaW5UZXh0SW5kZXgodmFsdWUsIGNvbmZpZywgc2VsZWN0aW9uU3RhcnQsICdTVEFSVCcpO1xuICAgICAgdmFyIG1hcmt1cEVuZEluZGV4ID0gbWFwUGxhaW5UZXh0SW5kZXgodmFsdWUsIGNvbmZpZywgc2VsZWN0aW9uRW5kLCAnRU5EJyk7XG4gICAgICB2YXIgbmV3VmFsdWUgPSBbdmFsdWUuc2xpY2UoMCwgbWFya3VwU3RhcnRJbmRleCksIHZhbHVlLnNsaWNlKG1hcmt1cEVuZEluZGV4KV0uam9pbignJyk7XG4gICAgICB2YXIgbmV3UGxhaW5UZXh0VmFsdWUgPSBnZXRQbGFpblRleHQobmV3VmFsdWUsIGNvbmZpZyk7XG4gICAgICB2YXIgZXZlbnRNb2NrID0ge1xuICAgICAgICB0YXJnZXQ6IF9vYmplY3RTcHJlYWQoe30sIGV2ZW50LnRhcmdldCwge1xuICAgICAgICAgIHZhbHVlOiBuZXdQbGFpblRleHRWYWx1ZVxuICAgICAgICB9KVxuICAgICAgfTtcbiAgICAgIHRoaXMuZXhlY3V0ZU9uQ2hhbmdlKGV2ZW50TW9jaywgbmV3VmFsdWUsIG5ld1BsYWluVGV4dFZhbHVlLCBnZXRNZW50aW9ucyh2YWx1ZSwgY29uZmlnKSk7XG4gICAgfSAvLyBIYW5kbGUgaW5wdXQgZWxlbWVudCdzIGNoYW5nZSBldmVudFxuXG4gIH1dKTtcblxuICByZXR1cm4gTWVudGlvbnNJbnB1dDtcbn0oUmVhY3QuQ29tcG9uZW50KTtcbi8qKlxuICogUmV0dXJucyB0aGUgY29tcHV0ZWQgbGVuZ3RoIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZWxlbWVudC5cbiAqIE5vdGU6IEFjY29yZGluZyB0byBzcGVjIGFuZCB0ZXN0aW5nLCBjYW4gY291bnQgb24gbGVuZ3RoIHZhbHVlcyBjb21pbmcgYmFjayBpbiBwaXhlbHMuIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvdXNlZF92YWx1ZSNEaWZmZXJlbmNlX2Zyb21fY29tcHV0ZWRfdmFsdWVcbiAqL1xuXG5cbl9kZWZpbmVQcm9wZXJ0eShNZW50aW9uc0lucHV0LCBcInByb3BUeXBlc1wiLCBwcm9wVHlwZXMpO1xuXG5fZGVmaW5lUHJvcGVydHkoTWVudGlvbnNJbnB1dCwgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBpZ25vcmVBY2NlbnRzOiBmYWxzZSxcbiAgc2luZ2xlTGluZTogZmFsc2UsXG4gIGFsbG93U3VnZ2VzdGlvbnNBYm92ZUN1cnNvcjogZmFsc2UsXG4gIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBvblNlbGVjdDogZnVuY3Rpb24gb25TZWxlY3QoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59KTtcblxudmFyIGdldENvbXB1dGVkU3R5bGVMZW5ndGhQcm9wID0gZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZUxlbmd0aFByb3AoZm9yRWxlbWVudCwgcHJvcGVydHlOYW1lKSB7XG4gIHZhciBsZW5ndGggPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvckVsZW1lbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lKSk7XG4gIHJldHVybiBpc0Zpbml0ZShsZW5ndGgpID8gbGVuZ3RoIDogMDtcbn07XG5cbnZhciBpc01vYmlsZVNhZmFyaSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbnZhciBzdHlsZWQkMyA9IGNyZWF0ZURlZmF1bHRTdHlsZSh7XG4gIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICBvdmVyZmxvd1k6ICd2aXNpYmxlJyxcbiAgaW5wdXQ6IHtcbiAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgIHdpZHRoOiAnMTAwJScsXG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgbWFyZ2luOiAwLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICBmb250RmFtaWx5OiAnaW5oZXJpdCcsXG4gICAgZm9udFNpemU6ICdpbmhlcml0JyxcbiAgICBsZXR0ZXJTcGFjaW5nOiAnaW5oZXJpdCdcbiAgfSxcbiAgJyZtdWx0aUxpbmUnOiB7XG4gICAgaW5wdXQ6IF9vYmplY3RTcHJlYWQoe1xuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICBib3R0b206IDAsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICByZXNpemU6ICdub25lJ1xuICAgIH0sIGlzTW9iaWxlU2FmYXJpID8ge1xuICAgICAgbWFyZ2luVG9wOiAxLFxuICAgICAgbWFyZ2luTGVmdDogLTNcbiAgICB9IDogbnVsbClcbiAgfVxufSwgZnVuY3Rpb24gKF9yZWY0KSB7XG4gIHZhciBzaW5nbGVMaW5lID0gX3JlZjQuc2luZ2xlTGluZTtcbiAgcmV0dXJuIHtcbiAgICAnJnNpbmdsZUxpbmUnOiBzaW5nbGVMaW5lLFxuICAgICcmbXVsdGlMaW5lJzogIXNpbmdsZUxpbmVcbiAgfTtcbn0pO1xudmFyIE1lbnRpb25zSW5wdXQkMSA9IHN0eWxlZCQzKE1lbnRpb25zSW5wdXQpO1xuXG52YXIgZGVmYXVsdFN0eWxlID0ge1xuICBmb250V2VpZ2h0OiAnaW5oZXJpdCdcbn07XG5cbnZhciBNZW50aW9uID0gZnVuY3Rpb24gTWVudGlvbihfcmVmKSB7XG4gIHZhciBkaXNwbGF5ID0gX3JlZi5kaXNwbGF5LFxuICAgICAgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzO1xuICB2YXIgc3R5bGVzID0gdXNlU3R5bGVzKGRlZmF1bHRTdHlsZSwge1xuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICBjbGFzc05hbWVzOiBjbGFzc05hbWVzXG4gIH0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiLCBzdHlsZXMsIGRpc3BsYXkpO1xufTtcblxuTWVudGlvbi5wcm9wVHlwZXMgPSB7XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIG5ldyBtZW50aW9uIGlzIGFkZGVkIGluIHRoZSBpbnB1dFxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBmdW5jdGlvbihpZCwgZGlzcGxheSkge1xuICAgKiAgIGNvbnNvbGUubG9nKFwidXNlciBcIiArIGRpc3BsYXkgKyBcIiB3YXMgbWVudGlvbmVkIVwiKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIG9uQWRkOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25SZW1vdmU6IFByb3BUeXBlcy5mdW5jLFxuICByZW5kZXJTdWdnZXN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcbiAgdHJpZ2dlcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmluc3RhbmNlT2YoUmVnRXhwKV0pLFxuICBtYXJrdXA6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGRpc3BsYXlUcmFuc2Zvcm06IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gYHRydWVgIHNwYWNlcyB3aWxsIG5vdCBpbnRlcnJ1cHQgbWF0Y2hpbmcgc3VnZ2VzdGlvbnNcbiAgICovXG4gIGFsbG93U3BhY2VJblF1ZXJ5OiBQcm9wVHlwZXMuYm9vbCxcbiAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbFxufTtcbk1lbnRpb24uZGVmYXVsdFByb3BzID0ge1xuICB0cmlnZ2VyOiAnQCcsXG4gIG1hcmt1cDogJ0BbX19kaXNwbGF5X19dKF9faWRfXyknLFxuICBkaXNwbGF5VHJhbnNmb3JtOiBmdW5jdGlvbiBkaXNwbGF5VHJhbnNmb3JtKGlkLCBkaXNwbGF5KSB7XG4gICAgcmV0dXJuIGRpc3BsYXkgfHwgaWQ7XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZCgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9LFxuICByZW5kZXJTdWdnZXN0aW9uOiBudWxsLFxuICBpc0xvYWRpbmc6IGZhbHNlLFxuICBhcHBlbmRTcGFjZU9uQWRkOiBmYWxzZVxufTtcblxuZXhwb3J0IHsgTWVudGlvbiwgTWVudGlvbnNJbnB1dCQxIGFzIE1lbnRpb25zSW5wdXQgfTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyMltpXSA9IGFycltpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyMjtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn0iLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7XG4gIH07XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59IiwiaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gXCIuL3NldFByb3RvdHlwZU9mXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBzZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gXCJbb2JqZWN0IEFyZ3VtZW50c11cIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkge1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcbiAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2VcIik7XG59IiwiaW1wb3J0IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIi4vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZVwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufSIsImltcG9ydCBfdHlwZW9mIGZyb20gXCIuLi8uLi9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSBcIi4vYXNzZXJ0VGhpc0luaXRpYWxpemVkXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH1cblxuICByZXR1cm4gYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufSIsImltcG9ydCBhcnJheVdpdGhIb2xlcyBmcm9tIFwiLi9hcnJheVdpdGhIb2xlc1wiO1xuaW1wb3J0IGl0ZXJhYmxlVG9BcnJheUxpbWl0IGZyb20gXCIuL2l0ZXJhYmxlVG9BcnJheUxpbWl0XCI7XG5pbXBvcnQgbm9uSXRlcmFibGVSZXN0IGZyb20gXCIuL25vbkl0ZXJhYmxlUmVzdFwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgbm9uSXRlcmFibGVSZXN0KCk7XG59IiwiaW1wb3J0IGFycmF5V2l0aG91dEhvbGVzIGZyb20gXCIuL2FycmF5V2l0aG91dEhvbGVzXCI7XG5pbXBvcnQgaXRlcmFibGVUb0FycmF5IGZyb20gXCIuL2l0ZXJhYmxlVG9BcnJheVwiO1xuaW1wb3J0IG5vbkl0ZXJhYmxlU3ByZWFkIGZyb20gXCIuL25vbkl0ZXJhYmxlU3ByZWFkXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59IiwiZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZjIgPSBmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2YyKG9iaik7IH1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSBcInN5bWJvbFwiKSB7XG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IF90eXBlb2YyKG9iaik7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZnVuY3Rpb24gcmVnZXhpZnlTdHJpbmcocHJvcHMpIHtcclxuICAgIHZhciBwYXR0ZXJuID0gcHJvcHMucGF0dGVybiwgZGVjb3JhdG9yID0gcHJvcHMuZGVjb3JhdG9yLCBpbnB1dCA9IHByb3BzLmlucHV0O1xyXG4gICAgdmFyIG91dHB1dCA9IFtdO1xyXG4gICAgdmFyIG1hdGNoSW5kZXggPSAwO1xyXG4gICAgdmFyIHByb2Nlc3NlZElucHV0ID0gaW5wdXQ7XHJcbiAgICB2YXIgcmVzdWx0ID0gcGF0dGVybi5leGVjKHByb2Nlc3NlZElucHV0KTtcclxuICAgIHdoaWxlIChyZXN1bHQgIT09IG51bGwpIHtcclxuICAgICAgICB2YXIgbWF0Y2hTdGFydEF0ID0gcmVzdWx0LmluZGV4O1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHJlc3VsdFswXTtcclxuICAgICAgICB2YXIgY29udGVudEJlZm9yZU1hdGNoID0gcHJvY2Vzc2VkSW5wdXQuc3Vic3RyaW5nKDAsIG1hdGNoU3RhcnRBdCk7XHJcbiAgICAgICAgdmFyIGRlY29yYXRlZE1hdGNoID0gZGVjb3JhdG9yKG1hdGNoLCBtYXRjaEluZGV4KTtcclxuICAgICAgICBvdXRwdXQucHVzaChjb250ZW50QmVmb3JlTWF0Y2gpO1xyXG4gICAgICAgIG91dHB1dC5wdXNoKGRlY29yYXRlZE1hdGNoKTtcclxuICAgICAgICBwcm9jZXNzZWRJbnB1dCA9IHByb2Nlc3NlZElucHV0LnN1YnN0cmluZyhtYXRjaFN0YXJ0QXQgKyBtYXRjaC5sZW5ndGgsIHByb2Nlc3NlZElucHV0Lmxlbmd0aCArIDEpO1xyXG4gICAgICAgIHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcclxuICAgICAgICByZXN1bHQgPSBwYXR0ZXJuLmV4ZWMocHJvY2Vzc2VkSW5wdXQpO1xyXG4gICAgICAgICsrbWF0Y2hJbmRleDtcclxuICAgIH1cclxuICAgIGlmIChwcm9jZXNzZWRJbnB1dCkge1xyXG4gICAgICAgIG91dHB1dC5wdXNoKHByb2Nlc3NlZElucHV0KTtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuZXhwb3J0cy5kZWZhdWx0ID0gcmVnZXhpZnlTdHJpbmc7XHJcbiIsImltcG9ydCB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZGVmYXVsdFByb3BzRGVjb3JhdG9yIGZyb20gJy4vZGVmYXVsdFByb3BzRGVjb3JhdG9yJztcbmV4cG9ydCB2YXIgUHJvcHNEZWNvcmF0b3JDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQoZGVmYXVsdFByb3BzRGVjb3JhdG9yKTtcbmV4cG9ydCBkZWZhdWx0IFByb3BzRGVjb3JhdG9yQ29udGV4dC5Qcm92aWRlcjsiLCJpbXBvcnQgeyBrZXlzIH0gZnJvbSAnLi91dGlscyc7XG5cbnZhciBjb2VyY2VTZWxlY3Rpb24gPSBmdW5jdGlvbiBjb2VyY2VTZWxlY3Rpb24oc2VsZWN0KSB7XG4gIGlmICghc2VsZWN0KSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxlY3QgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIFtzZWxlY3RdO1xuICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHNlbGVjdCkpIHtcbiAgICB2YXIgb2JqU2VsZWN0ID0gc2VsZWN0OyAvLyB3b3JrYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvNTc4MVxuXG4gICAgcmV0dXJuIGtleXMoc2VsZWN0KS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChvYmpTZWxlY3Rba2V5XSA/IFtrZXldIDogW10pO1xuICAgIH0sIFtdKTtcbiAgfVxuXG4gIHJldHVybiBzZWxlY3Q7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb2VyY2VTZWxlY3Rpb247IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheVwiO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSB7IHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsgfSBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCBjb2VyY2VTZWxlY3Rpb24gZnJvbSAnLi9jb2VyY2VTZWxlY3Rpb24nO1xuaW1wb3J0IGRlZmF1bHRQcm9wc0RlY29yYXRvciBmcm9tICcuL2RlZmF1bHRQcm9wc0RlY29yYXRvcic7XG5pbXBvcnQgeyBpc0VsZW1lbnQsIGlzTW9kaWZpZXIgfSBmcm9tICcuL2ZpbHRlcktleXMnO1xuaW1wb3J0IG1lbW9pemUgZnJvbSAnLi9tZW1vaXplJztcbmltcG9ydCB7IGhvaXN0TW9kaWZpZXJTdHlsZXNSZWN1cnNpdmUsIHBpY2tOZXN0ZWRTdHlsZXMgfSBmcm9tICcuL3BpY2tTdHlsZXMnO1xuaW1wb3J0IHsgY29tcGFjdCwgaXNQbGFpbk9iamVjdCwga2V5cywgbWVyZ2UsIHZhbHVlcyB9IGZyb20gJy4vdXRpbHMnO1xuXG52YXIgZ3Vlc3NCYXNlQ2xhc3NOYW1lID0gZnVuY3Rpb24gZ3Vlc3NCYXNlQ2xhc3NOYW1lKGNsYXNzTmFtZXMpIHtcbiAgLy8gYWxsIGNsYXNzIG5hbWVzIG11c3Qgc3RhcnQgd2l0aCB0aGUgc2FtZSBwcmVmaXg6IHRoZSBjb21wb25lbnQncyBiYXNlIGNsYXNzIG5hbWVcbiAgLy8gd2hpY2ggd2lsbCBmaW5hbGx5IGdvIHRvIHRoZSBjb250YWluZXIgZWxlbWVudFxuICB2YXIgZmlyc3RLZXkgPSBjbGFzc05hbWVzICYmIGtleXMoY2xhc3NOYW1lcylbMF07XG4gIHJldHVybiBmaXJzdEtleSAmJiBmaXJzdEtleS5zcGxpdCgnX18nKVswXS5zcGxpdCgnLS0nKVswXTtcbn07XG5cbnZhciBkZXJpdmVDbGFzc05hbWVzID0gZnVuY3Rpb24gZGVyaXZlQ2xhc3NOYW1lcyhjbGFzc05hbWUsIGVsZW1lbnRLZXlzLCBtb2RpZmllcktleXMpIHtcbiAgLy8gZG8gbm90IGRlcml2ZSBjbGFzcyBuYW1lcywgaWYgdGhlIHVzZXIgZGlkIG5vdCBzcGVjaWZ5IGFueSBjbGFzcyBuYW1lXG4gIGlmICghY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSAvLyBkZXJpdmUgY2xhc3MgbmFtZXMgYmFzZWQgdXNpbmcgdGhlIHBhc3NlZCBtb2RpZmllci9lbGVtZW50IGtleXNcblxuXG4gIHZhciBmaXJzdENsYXNzTmFtZSA9IGNsYXNzTmFtZS5zcGxpdCgnICcpWzBdO1xuICB2YXIgZGVyaXZlZENsYXNzTmFtZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGVsZW1lbnRLZXlzLmxlbmd0aCA9PT0gMCA/IG1vZGlmaWVyS2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBcIlwiLmNvbmNhdChmaXJzdENsYXNzTmFtZSwgXCItLVwiKS5jb25jYXQoa2V5LnN1YnN0cmluZygxKSk7XG4gIH0pIDogW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoZWxlbWVudEtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQoZmlyc3RDbGFzc05hbWUsIFwiX19cIikuY29uY2F0KGtleSk7XG4gIH0pKSk7IC8vIGFsc28gdXNlIHRoZSBwcm92aWRlZCBgY2xhc3NOYW1lYCBpZiB0aGVyZSBpcyBubyBzdWItZWxlbWVudCBzZWxlY3Rpb25cblxuICByZXR1cm4gZWxlbWVudEtleXMubGVuZ3RoID09PSAwID8gW2NsYXNzTmFtZV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkZXJpdmVkQ2xhc3NOYW1lcykpIDogZGVyaXZlZENsYXNzTmFtZXM7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVTdWJzdHlsZShfcmVmKSB7XG4gIHZhciBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXM7XG4gIHZhciBwcm9wc0RlY29yYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZGVmYXVsdFByb3BzRGVjb3JhdG9yO1xuICB2YXIgYmFzZUNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBndWVzc0Jhc2VDbGFzc05hbWUoY2xhc3NOYW1lcykgfHwgKHN0eWxlID09PSBudWxsIHx8IHN0eWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdHlsZS5jbGFzc05hbWUpO1xuICB2YXIgc3Vic3R5bGUgPSB0eXBlb2Ygc3R5bGUgPT09ICdmdW5jdGlvbicgPyBzdHlsZSA6IG1lbW9pemUoZnVuY3Rpb24gKHNlbGVjdCwgZGVmYXVsdFN0eWxlKSB7XG4gICAgdmFyIHNlbGVjdGVkS2V5cyA9IGNvZXJjZVNlbGVjdGlvbihzZWxlY3QpO1xuICAgIGludmFyaWFudChBcnJheS5pc0FycmF5KHNlbGVjdGVkS2V5cyksICdGaXJzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhIHN0cmluZywgYW4gYXJyYXkgb2Ygc3RyaW5ncywgJyArICdhIHBsYWluIG9iamVjdCB3aXRoIGJvb2xlYW4gdmFsdWVzLCBvciBhIGZhbHN5IHZhbHVlLicpO1xuICAgIGludmFyaWFudCghZGVmYXVsdFN0eWxlIHx8IGlzUGxhaW5PYmplY3QoZGVmYXVsdFN0eWxlKSwgJ09wdGlvbmFsIHNlY29uZCBwYXJhbWV0ZXIgbXVzdCBiZSBhIHBsYWluIG9iamVjdC4nKTtcbiAgICB2YXIgbW9kaWZpZXJLZXlzID0gc2VsZWN0ZWRLZXlzLmZpbHRlcihpc01vZGlmaWVyKTtcbiAgICB2YXIgZWxlbWVudEtleXMgPSBzZWxlY3RlZEtleXMuZmlsdGVyKGlzRWxlbWVudCk7XG4gICAgdmFyIGNvbGxlY3RFbGVtZW50U3R5bGVzID0gZWxlbWVudEtleXMubGVuZ3RoID4gMCA/IGZ1bmN0aW9uIChmcm9tU3R5bGUpIHtcbiAgICAgIHJldHVybiB2YWx1ZXMocGlja05lc3RlZFN0eWxlcyhmcm9tU3R5bGUsIGVsZW1lbnRLZXlzKSk7XG4gICAgfSA6IGZ1bmN0aW9uIChmcm9tU3R5bGUpIHtcbiAgICAgIHJldHVybiBbZnJvbVN0eWxlXTtcbiAgICB9O1xuXG4gICAgdmFyIGNvbGxlY3RTZWxlY3RlZFN0eWxlcyA9IGZ1bmN0aW9uIGNvbGxlY3RTZWxlY3RlZFN0eWxlcygpIHtcbiAgICAgIHZhciBmcm9tU3R5bGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgICAgcmV0dXJuIGNvbGxlY3RFbGVtZW50U3R5bGVzKGhvaXN0TW9kaWZpZXJTdHlsZXNSZWN1cnNpdmUoZnJvbVN0eWxlLCBtb2RpZmllcktleXMpKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlcml2ZWRDbGFzc05hbWVzID0gZGVyaXZlQ2xhc3NOYW1lcyhiYXNlQ2xhc3NOYW1lLCBlbGVtZW50S2V5cywgbW9kaWZpZXJLZXlzKTtcbiAgICByZXR1cm4gY3JlYXRlU3Vic3R5bGUoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIChzdHlsZSB8fCBkZWZhdWx0U3R5bGUpICYmIHtcbiAgICAgIHN0eWxlOiBtZXJnZS5hcHBseSh2b2lkIDAsIFt7fV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjb2xsZWN0U2VsZWN0ZWRTdHlsZXMoZGVmYXVsdFN0eWxlKSksIF90b0NvbnN1bWFibGVBcnJheShjb2xsZWN0U2VsZWN0ZWRTdHlsZXMoc3R5bGUpKSkpXG4gICAgfSksIGRlcml2ZWRDbGFzc05hbWVzICYmIHtcbiAgICAgIGNsYXNzTmFtZTogZGVyaXZlZENsYXNzTmFtZXMuam9pbignICcpXG4gICAgfSksIGNsYXNzTmFtZXMgJiYge1xuICAgICAgY2xhc3NOYW1lczogY2xhc3NOYW1lc1xuICAgIH0pLCBwcm9wc0RlY29yYXRvcik7XG4gIH0pO1xuXG4gIHZhciBzdHlsZVByb3BzID0gX29iamVjdFNwcmVhZCh7fSwgdHlwZW9mIHN0eWxlID09PSAnZnVuY3Rpb24nID8gc3R5bGUgOiB7XG4gICAgc3R5bGU6IHN0eWxlXG4gIH0pO1xuXG4gIHZhciBjbGFzc05hbWVTcGxpdCA9IF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3R5bGVQcm9wcy5jbGFzc05hbWUgPyBzdHlsZVByb3BzLmNsYXNzTmFtZS5zcGxpdCgnICcpIDogW10pLCBfdG9Db25zdW1hYmxlQXJyYXkoYmFzZUNsYXNzTmFtZSA/IGJhc2VDbGFzc05hbWUuc3BsaXQoJyAnKSA6IFtdKSkpKTtcblxuICB2YXIgbWFwcGVkQ2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMgPyBjb21wYWN0KGNsYXNzTmFtZVNwbGl0Lm1hcChmdW5jdGlvbiAoc2luZ2xlQ2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIGNsYXNzTmFtZXNbc2luZ2xlQ2xhc3NOYW1lXTtcbiAgfSkpIDogY2xhc3NOYW1lU3BsaXQ7XG4gIHZhciBwcm9wc0ZvclNwcmVhZCA9IHByb3BzRGVjb3JhdG9yKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGVQcm9wcyksIG1hcHBlZENsYXNzTmFtZXMubGVuZ3RoID4gMCA/IHtcbiAgICBjbGFzc05hbWU6IG1hcHBlZENsYXNzTmFtZXMuam9pbignICcpXG4gIH0gOiB7fSkpOyAvLyBhc3NpZ24gYHN0eWxlYCwgYGNsYXNzTmFtZWAsIGFuZC9vciBhbnkgcHJvcHMgYWRkZWQgYnkgdGhlIGRlY29yYXRvciB0byB0aGUgcmV0dXJuIGZ1bmN0aW9uIG9iamVjdFxuXG4gIE9iamVjdC5hc3NpZ24oc3Vic3R5bGUsIHByb3BzRm9yU3ByZWFkKTtcbiAgcmV0dXJuIHN1YnN0eWxlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTdWJzdHlsZTsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHsgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyB9IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IHsgcGlja0RpcmVjdFN0eWxlcyB9IGZyb20gJy4vcGlja1N0eWxlcyc7XG4vLyBtYW55IGNzcy1pbi1qcyBsaWJzIHByb2Nlc3Mga2V5ZnJhbWVzIG9iamVjdHMgYXMgdGhlIHZhbHVlIGZvciBgYW5pbWF0aW9uTmFtZWBcbnZhciBkZWZhdWx0T2JqZWN0UHJvcHNXaGl0ZWxpc3QgPSBbJ2FuaW1hdGlvbk5hbWUnXTtcblxudmFyIGRlZmF1bHRQcm9wc0RlY29yYXRvciA9IGZ1bmN0aW9uIGRlZmF1bHRQcm9wc0RlY29yYXRvcihfcmVmKSB7XG4gIHZhciBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZTtcbiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGUgPyB7XG4gICAgc3R5bGU6IHBpY2tEaXJlY3RTdHlsZXMoc3R5bGUsIGRlZmF1bHRPYmplY3RQcm9wc1doaXRlbGlzdClcbiAgfSA6IHt9KSwgY2xhc3NOYW1lID8ge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lXG4gIH0gOiB7fSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0UHJvcHNEZWNvcmF0b3I7IiwiZXhwb3J0IHZhciBpc01vZGlmaWVyID0gZnVuY3Rpb24gaXNNb2RpZmllcihrZXkpIHtcbiAgcmV0dXJuIGtleVswXSA9PT0gJyYnO1xufTtcbmV4cG9ydCB2YXIgaXNFbGVtZW50ID0gZnVuY3Rpb24gaXNFbGVtZW50KGtleSkge1xuICByZXR1cm4gIWlzTW9kaWZpZXIoa2V5KTtcbn07IiwiaW1wb3J0IFByb3BzRGVjb3JhdG9yUHJvdmlkZXIsIHsgUHJvcHNEZWNvcmF0b3JDb250ZXh0IH0gZnJvbSAnLi9Qcm9wc0RlY29yYXRvclByb3ZpZGVyJztcbmltcG9ydCBjcmVhdGVTdWJzdHlsZSBmcm9tICcuL2NyZWF0ZVN1YnN0eWxlJztcbmltcG9ydCBkZWZhdWx0UHJvcHNEZWNvcmF0b3IgZnJvbSAnLi9kZWZhdWx0UHJvcHNEZWNvcmF0b3InO1xuaW1wb3J0IGlubGluZSBmcm9tICcuL2lubGluZSc7XG5pbXBvcnQgdXNlU3R5bGVzIGZyb20gJy4vdXNlU3R5bGVzJztcbmV4cG9ydCB7IGNyZWF0ZVN1YnN0eWxlLCBQcm9wc0RlY29yYXRvclByb3ZpZGVyLCBQcm9wc0RlY29yYXRvckNvbnRleHQsIGRlZmF1bHRQcm9wc0RlY29yYXRvciwgaW5saW5lIH07XG5leHBvcnQgZGVmYXVsdCB1c2VTdHlsZXM7IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eVwiO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSB7IHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsgfSBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbnZhciBpbmxpbmUgPSBmdW5jdGlvbiBpbmxpbmUoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gYXJncy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgYXJnKSB7XG4gICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXN1bHQpLCB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nID8gYXJnIDoge30pLCB7fSwge1xuICAgICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVzdWx0LnN0eWxlKSwgdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJyA/IGFyZy5zdHlsZSA6IGFyZylcbiAgICB9KTtcbiAgfSwge30pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5saW5lOyIsImltcG9ydCBjb2VyY2VTZWxlY3Rpb24gZnJvbSAnLi9jb2VyY2VTZWxlY3Rpb24nO1xudmFyIEVNUFRZID0ge307XG5cbnZhciBtZW1vaXplID0gZnVuY3Rpb24gbWVtb2l6ZShzdWJzdHlsZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHNlbGVjdCwgZGVmYXVsdFN0eWxlKSB7XG4gICAgdmFyIGNhY2hlS2V5ID0gZGVmYXVsdFN0eWxlIHx8IEVNUFRZO1xuICAgIHN1YnN0eWxlLm1lbW9pemUgPSBzdWJzdHlsZS5tZW1vaXplIHx8IG5ldyBXZWFrTWFwKCk7XG4gICAgdmFyIG1hcEVudHJ5O1xuXG4gICAgaWYgKCFzdWJzdHlsZS5tZW1vaXplLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgIG1hcEVudHJ5ID0ge307XG4gICAgICBzdWJzdHlsZS5tZW1vaXplLnNldChjYWNoZUtleSwgbWFwRW50cnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXBFbnRyeSA9IHN1YnN0eWxlLm1lbW9pemUuZ2V0KGNhY2hlS2V5KTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0SGFzaCA9IGNvZXJjZVNlbGVjdGlvbihzZWxlY3QpLmpvaW4oJyAnKTtcbiAgICByZXR1cm4gc2VsZWN0SGFzaCBpbiBtYXBFbnRyeSA/IG1hcEVudHJ5W3NlbGVjdEhhc2hdIDogbWFwRW50cnlbc2VsZWN0SGFzaF0gPSBzdWJzdHlsZShzZWxlY3QgfHwgW10sIGRlZmF1bHRTdHlsZSk7XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtZW1vaXplOyIsImltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCB7IGtleXMsIG1lcmdlLCBvbWl0LCB2YWx1ZXMgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGlzTW9kaWZpZXIgfSBmcm9tICcuL2ZpbHRlcktleXMnO1xuXG52YXIgY2FtZWxpemUgPSBmdW5jdGlvbiBjYW1lbGl6ZShrZXkpIHtcbiAgcmV0dXJuIGtleS5yZXBsYWNlKC8tKFxcdykvZywgZnVuY3Rpb24gKG0sIGMpIHtcbiAgICByZXR1cm4gYy50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB2YXIgcGlja0RpcmVjdFN0eWxlcyA9IGZ1bmN0aW9uIHBpY2tEaXJlY3RTdHlsZXMoc3R5bGUpIHtcbiAgdmFyIG9iamVjdFByb3BlcnRpZXNXaGl0ZWxpc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdO1xuICB2YXIgc3R5bGVLZXlzID0ga2V5cyhzdHlsZSk7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IHN0eWxlS2V5cy5sZW5ndGg7IGkgPCBsOyBpICs9IDEpIHtcbiAgICB2YXIga2V5ID0gc3R5bGVLZXlzW2ldO1xuICAgIHZhciBpc0RpcmVjdCA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzdHlsZVtrZXldKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScgfHwgLy8gc3R5bGUgZGVmc1xuICAgIGtleVswXSA9PT0gJzonIHx8IC8vIHBzZXVkbyBzZWxlY3RvcnNcbiAgICBrZXlbMF0gPT09ICdAJyB8fCAvLyBAbWVkaWEgLyBAa2V5ZnJhbWVzIC8gQHN1cHBvcnRzIC8gQGZvbnQtZmFjZVxuICAgIG9iamVjdFByb3BlcnRpZXNXaGl0ZWxpc3QuaW5kZXhPZihrZXkpID49IDA7IC8vIHdoaXRlbGlzdGVkIG9iamVjdC10eXBlIHByb3BlcnRpZXNcblxuICAgIGlmIChpc0RpcmVjdCkge1xuICAgICAgcmVzdWx0W2tleV0gPSBzdHlsZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuZXhwb3J0IHZhciBwaWNrTmVzdGVkU3R5bGVzID0gZnVuY3Rpb24gcGlja05lc3RlZFN0eWxlcyhzdHlsZSwga2V5c1RvUGljaykge1xuICB2YXIgY2FtZWxpemVkS2V5c1RvUGljayA9IGtleXNUb1BpY2subWFwKGNhbWVsaXplKTtcbiAgdmFyIHN0eWxlS2V5cyA9IGtleXMoc3R5bGUpO1xuICB2YXIgcmVzdWx0ID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHlsZUtleXMubGVuZ3RoOyBpIDwgbDsgaSArPSAxKSB7XG4gICAgdmFyIGtleSA9IHN0eWxlS2V5c1tpXTtcblxuICAgIGlmIChrZXlzVG9QaWNrLmluZGV4T2Yoa2V5KSA+PSAwIHx8IGNhbWVsaXplZEtleXNUb1BpY2suaW5kZXhPZihjYW1lbGl6ZShrZXkpKSA+PSAwKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHN0eWxlW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07IC8vIGJyZWFkdGgtZmlyc3QgaG9pc3Rpbmcgb2Ygc2VsZWN0ZWQgbW9kaWZpZXIgc3R5bGUgc3VidHJlZXNcbi8vIGRvZXMgbm90IHRyYXZlcnNlIGludG8gZWxlbWVudCwgOnBzZXVkby1zZWxlY3RvciBvciBAZGlyZWN0aXZlIHN1YnRyZWVzXG5cbmV4cG9ydCB2YXIgaG9pc3RNb2RpZmllclN0eWxlc1JlY3Vyc2l2ZSA9IGZ1bmN0aW9uIGhvaXN0TW9kaWZpZXJTdHlsZXNSZWN1cnNpdmUoc3R5bGUsIG1vZGlmaWVyS2V5c1RvUGljaykge1xuICAvLyBob2lzdCBzdHlsZXMgZm9yIHNlbGVjdGVkIG1vZGlmaWVycyBvbiBjdXJyZW50IGxldmVsXG4gIHZhciByZXN1bHQgPSBtZXJnZS5hcHBseSh2b2lkIDAsIFt7fSwgb21pdChzdHlsZSwgbW9kaWZpZXJLZXlzVG9QaWNrKV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMocGlja05lc3RlZFN0eWxlcyhzdHlsZSwgbW9kaWZpZXJLZXlzVG9QaWNrKSkpKSk7IC8vIHRyYXZlcnNlIG5lc3RlZCBzdHlsZWQgZm9yIEFMTCBtb2RpZmllcnNcblxuICB2YXIgbW9kaWZpZXJLZXlzID0ga2V5cyhyZXN1bHQpLmZpbHRlcihpc01vZGlmaWVyKTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IG1vZGlmaWVyS2V5cy5sZW5ndGg7IGkgPCBsOyBpICs9IDEpIHtcbiAgICB2YXIga2V5ID0gbW9kaWZpZXJLZXlzW2ldO1xuICAgIHZhciBzdWJyZXN1bHQgPSBob2lzdE1vZGlmaWVyU3R5bGVzUmVjdXJzaXZlKHJlc3VsdFtrZXldLCBtb2RpZmllcktleXNUb1BpY2spO1xuXG4gICAgaWYgKG1vZGlmaWVyS2V5c1RvUGljay5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgLy8gc2VsZWN0ZWQgbW9kaWZpZXI6IGhvaXN0IHN1YnJlc3VsdFxuICAgICAgZGVsZXRlIHJlc3VsdFtrZXldO1xuICAgICAgcmVzdWx0ID0gbWVyZ2Uoe30sIHJlc3VsdCwgc3VicmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uLXNlbGVjdGVkIG1vZGlmaWVyOiByZXBsYWNlIHdpdGggc3VicmVzdWx0XG4gICAgICByZXN1bHRba2V5XSA9IHN1YnJlc3VsdDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgeyB1c2VDb250ZXh0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUHJvcHNEZWNvcmF0b3JDb250ZXh0IH0gZnJvbSAnLi9Qcm9wc0RlY29yYXRvclByb3ZpZGVyJztcbmltcG9ydCBjcmVhdGVTdWJzdHlsZSBmcm9tICcuL2NyZWF0ZVN1YnN0eWxlJztcblxudmFyIHVzZVN0eWxlcyA9IGZ1bmN0aW9uIHVzZVN0eWxlcyhkZWZhdWx0U3R5bGUsIF9yZWYsIG1vZGlmaWVycykge1xuICB2YXIgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzO1xuICB2YXIgcHJvcHNEZWNvcmF0b3IgPSB1c2VDb250ZXh0KFByb3BzRGVjb3JhdG9yQ29udGV4dCk7XG4gIHZhciBzdWJzdHlsZSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjcmVhdGVTdWJzdHlsZSh7XG4gICAgICBzdHlsZTogc3R5bGUsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXNcbiAgICB9LCBwcm9wc0RlY29yYXRvcik7XG4gIH0sIFtzdHlsZSwgY2xhc3NOYW1lLCBjbGFzc05hbWVzLCBwcm9wc0RlY29yYXRvcl0pO1xuICByZXR1cm4gc3Vic3R5bGUobW9kaWZpZXJzLCBkZWZhdWx0U3R5bGUpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlU3R5bGVzOyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIjtcbmV4cG9ydCB2YXIga2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gIHJldHVybiBvYmogPT09IE9iamVjdChvYmopID8gT2JqZWN0LmtleXMob2JqKSA6IFtdO1xufTtcbmV4cG9ydCB2YXIgdmFsdWVzID0gZnVuY3Rpb24gdmFsdWVzKG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKSA/IE9iamVjdC52YWx1ZXMob2JqKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gbWVyZ2VEZWVwKHRhcmdldCwgc291cmNlKSB7XG4gIHZhciBvdXRwdXQgPSBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXQpO1xuXG4gIGlmIChpc1BsYWluT2JqZWN0KHRhcmdldCkgJiYgaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7XG4gICAga2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pKSB7XG4gICAgICAgIGlmICghKGtleSBpbiB0YXJnZXQpKSBPYmplY3QuYXNzaWduKG91dHB1dCwgX2RlZmluZVByb3BlcnR5KHt9LCBrZXksIHNvdXJjZVtrZXldKSk7ZWxzZSBvdXRwdXRba2V5XSA9IG1lcmdlRGVlcCh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihvdXRwdXQsIF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCBzb3VyY2Vba2V5XSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuZXhwb3J0IHZhciBtZXJnZSA9IGZ1bmN0aW9uIG1lcmdlKHRhcmdldCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlcyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgc291cmNlc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gc291cmNlcy5yZWR1Y2UoZnVuY3Rpb24gKHQsIHMpIHtcbiAgICByZXR1cm4gbWVyZ2VEZWVwKHQsIHMpO1xuICB9LCB0YXJnZXQpO1xufTtcbmV4cG9ydCB2YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0IHZhciBvbWl0ID0gZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcbiAgdmFyIG90aGVyID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTtcblxuICBpZiAoa2V5cykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgZGVsZXRlIG90aGVyW2tleXNbaV1dO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdGhlcjtcbn07XG5leHBvcnQgdmFyIGlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKSAmJiAhKG9iaiBpbnN0YW5jZW9mIERhdGUpICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59O1xuZXhwb3J0IHZhciBjb21wYWN0ID0gZnVuY3Rpb24gY29tcGFjdChhcnIpIHtcbiAgcmV0dXJuIChhcnIgfHwgW10pLmZpbHRlcihCb29sZWFuKTtcbn07IiwiXG52YXIgc3BhY2UgPSByZXF1aXJlKCd0by1zcGFjZS1jYXNlJylcblxuLyoqXG4gKiBFeHBvcnQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b0NhbWVsQ2FzZVxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBjYW1lbCBjYXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b0NhbWVsQ2FzZShzdHJpbmcpIHtcbiAgcmV0dXJuIHNwYWNlKHN0cmluZykucmVwbGFjZSgvXFxzKFxcdykvZywgZnVuY3Rpb24gKG1hdGNoZXMsIGxldHRlcikge1xuICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKVxuICB9KVxufVxuIiwiXG4vKipcbiAqIEV4cG9ydC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRvTm9DYXNlXG5cbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgc3RyaW5nIGlzIGNhbWVsLWNhc2UuXG4gKi9cblxudmFyIGhhc1NwYWNlID0gL1xccy9cbnZhciBoYXNTZXBhcmF0b3IgPSAvKF98LXxcXC58OikvXG52YXIgaGFzQ2FtZWwgPSAvKFthLXpdW0EtWl18W0EtWl1bYS16XSkvXG5cbi8qKlxuICogUmVtb3ZlIGFueSBzdGFydGluZyBjYXNlIGZyb20gYSBgc3RyaW5nYCwgbGlrZSBjYW1lbCBvciBzbmFrZSwgYnV0IGtlZXBcbiAqIHNwYWNlcyBhbmQgcHVuY3R1YXRpb24gdGhhdCBtYXkgYmUgaW1wb3J0YW50IG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdG9Ob0Nhc2Uoc3RyaW5nKSB7XG4gIGlmIChoYXNTcGFjZS50ZXN0KHN0cmluZykpIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKVxuICBpZiAoaGFzU2VwYXJhdG9yLnRlc3Qoc3RyaW5nKSkgcmV0dXJuICh1bnNlcGFyYXRlKHN0cmluZykgfHwgc3RyaW5nKS50b0xvd2VyQ2FzZSgpXG4gIGlmIChoYXNDYW1lbC50ZXN0KHN0cmluZykpIHJldHVybiB1bmNhbWVsaXplKHN0cmluZykudG9Mb3dlckNhc2UoKVxuICByZXR1cm4gc3RyaW5nLnRvTG93ZXJDYXNlKClcbn1cblxuLyoqXG4gKiBTZXBhcmF0b3Igc3BsaXR0ZXIuXG4gKi9cblxudmFyIHNlcGFyYXRvclNwbGl0dGVyID0gL1tcXFdfXSsoLnwkKS9nXG5cbi8qKlxuICogVW4tc2VwYXJhdGUgYSBgc3RyaW5nYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdW5zZXBhcmF0ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHNlcGFyYXRvclNwbGl0dGVyLCBmdW5jdGlvbiAobSwgbmV4dCkge1xuICAgIHJldHVybiBuZXh0ID8gJyAnICsgbmV4dCA6ICcnXG4gIH0pXG59XG5cbi8qKlxuICogQ2FtZWxjYXNlIHNwbGl0dGVyLlxuICovXG5cbnZhciBjYW1lbFNwbGl0dGVyID0gLyguKShbQS1aXSspL2dcblxuLyoqXG4gKiBVbi1jYW1lbGNhc2UgYSBgc3RyaW5nYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdW5jYW1lbGl6ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKGNhbWVsU3BsaXR0ZXIsIGZ1bmN0aW9uIChtLCBwcmV2aW91cywgdXBwZXJzKSB7XG4gICAgcmV0dXJuIHByZXZpb3VzICsgJyAnICsgdXBwZXJzLnRvTG93ZXJDYXNlKCkuc3BsaXQoJycpLmpvaW4oJyAnKVxuICB9KVxufVxuIiwiXG52YXIgY2xlYW4gPSByZXF1aXJlKCd0by1uby1jYXNlJylcblxuLyoqXG4gKiBFeHBvcnQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b1NwYWNlQ2FzZVxuXG4vKipcbiAqIENvbnZlcnQgYSBgc3RyaW5nYCB0byBzcGFjZSBjYXNlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b1NwYWNlQ2FzZShzdHJpbmcpIHtcbiAgcmV0dXJuIGNsZWFuKHN0cmluZykucmVwbGFjZSgvW1xcV19dKygufCQpL2csIGZ1bmN0aW9uIChtYXRjaGVzLCBtYXRjaCkge1xuICAgIHJldHVybiBtYXRjaCA/ICcgJyArIG1hdGNoIDogJydcbiAgfSkudHJpbSgpXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59IiwiaW1wb3J0IGFycmF5TGlrZVRvQXJyYXkgZnJvbSBcIi4vYXJyYXlMaWtlVG9BcnJheS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikge1xuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyW1wiQEBpdGVyYXRvclwiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufSIsImltcG9ydCBhcnJheVdpdGhvdXRIb2xlcyBmcm9tIFwiLi9hcnJheVdpdGhvdXRIb2xlcy5qc1wiO1xuaW1wb3J0IGl0ZXJhYmxlVG9BcnJheSBmcm9tIFwiLi9pdGVyYWJsZVRvQXJyYXkuanNcIjtcbmltcG9ydCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSBmcm9tIFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qc1wiO1xuaW1wb3J0IG5vbkl0ZXJhYmxlU3ByZWFkIGZyb20gXCIuL25vbkl0ZXJhYmxlU3ByZWFkLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgbm9uSXRlcmFibGVTcHJlYWQoKTtcbn0iLCJpbXBvcnQgYXJyYXlMaWtlVG9BcnJheSBmcm9tIFwiLi9hcnJheUxpa2VUb0FycmF5LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufSIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VTV1IgZnJvbSAnc3dyJztcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHsgfTtcbi8vIFVzaW5nIG5vb3AoKSBhcyB0aGUgdW5kZWZpbmVkIHZhbHVlIGFzIHVuZGVmaW5lZCBjYW4gcG9zc2libHkgYmUgcmVwbGFjZWRcbi8vIGJ5IHNvbWV0aGluZyBlbHNlLiAgUHJldHRpZXIgaWdub3JlIGFuZCBleHRyYSBwYXJlbnRoZXNlcyBhcmUgbmVjZXNzYXJ5IGhlcmVcbi8vIHRvIGVuc3VyZSB0aGF0IHRzYyBkb2Vzbid0IHJlbW92ZSB0aGUgX19OT0lOTElORV9fIGNvbW1lbnQuXG4vLyBwcmV0dGllci1pZ25vcmVcbnZhciBVTkRFRklORUQgPSAoIC8qI19fTk9JTkxJTkVfXyovbm9vcCgpKTtcbnZhciBPQkpFQ1QgPSBPYmplY3Q7XG52YXIgaXNVbmRlZmluZWQgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdiA9PT0gVU5ERUZJTkVEOyB9O1xudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdHlwZW9mIHYgPT0gJ2Z1bmN0aW9uJzsgfTtcbnZhciBTVFJfVU5ERUZJTkVEID0gJ3VuZGVmaW5lZCc7XG4vLyBOT1RFOiBVc2UgZnVuY3Rpb24gdG8gZ3VhcmFudGVlIGl0J3MgcmUtZXZhbHVhdGVkIGJldHdlZW4ganNkb20gYW5kIG5vZGUgcnVudGltZSBmb3IgdGVzdHMuXG52YXIgaGFzV2luZG93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPSBTVFJfVU5ERUZJTkVEOyB9O1xuXG52YXIgSVNfU0VSVkVSID0gIWhhc1dpbmRvdygpIHx8ICdEZW5vJyBpbiB3aW5kb3c7XG4vLyBSZWFjdCBjdXJyZW50bHkgdGhyb3dzIGEgd2FybmluZyB3aGVuIHVzaW5nIHVzZUxheW91dEVmZmVjdCBvbiB0aGUgc2VydmVyLlxuLy8gVG8gZ2V0IGFyb3VuZCBpdCwgd2UgY2FuIGNvbmRpdGlvbmFsbHkgdXNlRWZmZWN0IG9uIHRoZSBzZXJ2ZXIgKG5vLW9wKSBhbmRcbi8vIHVzZUxheW91dEVmZmVjdCBpbiB0aGUgYnJvd3Nlci5cbnZhciB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gSVNfU0VSVkVSID8gdXNlRWZmZWN0IDogdXNlTGF5b3V0RWZmZWN0O1xuXG4vLyB1c2UgV2Vha01hcCB0byBzdG9yZSB0aGUgb2JqZWN0LT5rZXkgbWFwcGluZ1xuLy8gc28gdGhlIG9iamVjdHMgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkLlxuLy8gV2Vha01hcCB1c2VzIGEgaGFzaHRhYmxlIHVuZGVyIHRoZSBob29kLCBzbyB0aGUgbG9va3VwXG4vLyBjb21wbGV4aXR5IGlzIGFsbW9zdCBPKDEpLlxudmFyIHRhYmxlID0gbmV3IFdlYWtNYXAoKTtcbi8vIGNvdW50ZXIgb2YgdGhlIGtleVxudmFyIGNvdW50ZXIgPSAwO1xuLy8gQSBzdGFibGUgaGFzaCBpbXBsZW1lbnRhdGlvbiB0aGF0IHN1cHBvcnRzOlxuLy8gLSBGYXN0IGFuZCBlbnN1cmVzIHVuaXF1ZSBoYXNoIHByb3BlcnRpZXNcbi8vIC0gSGFuZGxlcyB1bnNlcmlhbGl6YWJsZSB2YWx1ZXNcbi8vIC0gSGFuZGxlcyBvYmplY3Qga2V5IG9yZGVyaW5nXG4vLyAtIEdlbmVyYXRlcyBzaG9ydCByZXN1bHRzXG4vL1xuLy8gVGhpcyBpcyBub3QgYSBzZXJpYWxpemF0aW9uIGZ1bmN0aW9uLCBhbmQgdGhlIHJlc3VsdCBpcyBub3QgZ3VhcmFudGVlZCB0byBiZVxuLy8gcGFyc2libGUuXG52YXIgc3RhYmxlSGFzaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBhcmc7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gYXJnICYmIGFyZy5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgaXNEYXRlID0gY29uc3RydWN0b3IgPT0gRGF0ZTtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHZhciBpbmRleDtcbiAgICBpZiAoT0JKRUNUKGFyZykgPT09IGFyZyAmJiAhaXNEYXRlICYmIGNvbnN0cnVjdG9yICE9IFJlZ0V4cCkge1xuICAgICAgICAvLyBPYmplY3QvZnVuY3Rpb24sIG5vdCBudWxsL2RhdGUvcmVnZXhwLiBVc2UgV2Vha01hcCB0byBzdG9yZSB0aGUgaWQgZmlyc3QuXG4gICAgICAgIC8vIElmIGl0J3MgYWxyZWFkeSBoYXNoZWQsIGRpcmVjdGx5IHJldHVybiB0aGUgcmVzdWx0LlxuICAgICAgICByZXN1bHQgPSB0YWJsZS5nZXQoYXJnKTtcbiAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIC8vIFN0b3JlIHRoZSBoYXNoIGZpcnN0IGZvciBjaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0aW9uIGJlZm9yZSBlbnRlcmluZyB0aGVcbiAgICAgICAgLy8gcmVjdXJzaXZlIGBzdGFibGVIYXNoYCBjYWxscy5cbiAgICAgICAgLy8gRm9yIG90aGVyIG9iamVjdHMgbGlrZSBzZXQgYW5kIG1hcCwgd2UgdXNlIHRoaXMgaWQgZGlyZWN0bHkgYXMgdGhlIGhhc2guXG4gICAgICAgIHJlc3VsdCA9ICsrY291bnRlciArICd+JztcbiAgICAgICAgdGFibGUuc2V0KGFyZywgcmVzdWx0KTtcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09IEFycmF5KSB7XG4gICAgICAgICAgICAvLyBBcnJheS5cbiAgICAgICAgICAgIHJlc3VsdCA9ICdAJztcbiAgICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGFyZy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RhYmxlSGFzaChhcmdbaW5kZXhdKSArICcsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlLnNldChhcmcsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09IE9CSkVDVCkge1xuICAgICAgICAgICAgLy8gT2JqZWN0LCBzb3J0IGtleXMuXG4gICAgICAgICAgICByZXN1bHQgPSAnIyc7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9CSkVDVC5rZXlzKGFyZykuc29ydCgpO1xuICAgICAgICAgICAgd2hpbGUgKCFpc1VuZGVmaW5lZCgoaW5kZXggPSBrZXlzLnBvcCgpKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGFyZ1tpbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBpbmRleCArICc6JyArIHN0YWJsZUhhc2goYXJnW2luZGV4XSkgKyAnLCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFibGUuc2V0KGFyZywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gaXNEYXRlXG4gICAgICAgICAgICA/IGFyZy50b0pTT04oKVxuICAgICAgICAgICAgOiB0eXBlID09ICdzeW1ib2wnXG4gICAgICAgICAgICAgICAgPyBhcmcudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIDogdHlwZSA9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGFyZylcbiAgICAgICAgICAgICAgICAgICAgOiAnJyArIGFyZztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBzZXJpYWxpemUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oa2V5KSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAga2V5ID0ga2V5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gZGVwZW5kZW5jaWVzIG5vdCByZWFkeVxuICAgICAgICAgICAga2V5ID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGFyZ3MgPSBbXS5jb25jYXQoa2V5KTtcbiAgICAvLyBJZiBrZXkgaXMgbm90IGZhbHN5LCBvciBub3QgYW4gZW1wdHkgYXJyYXksIGhhc2ggaXQuXG4gICAga2V5ID1cbiAgICAgICAgdHlwZW9mIGtleSA9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBrZXlcbiAgICAgICAgICAgIDogKEFycmF5LmlzQXJyYXkoa2V5KSA/IGtleS5sZW5ndGggOiBrZXkpXG4gICAgICAgICAgICAgICAgPyBzdGFibGVIYXNoKGtleSlcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgIHZhciBpbmZvS2V5ID0ga2V5ID8gJyRzd3IkJyArIGtleSA6ICcnO1xuICAgIHJldHVybiBba2V5LCBhcmdzLCBpbmZvS2V5XTtcbn07XG5cbnZhciBub3JtYWxpemUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGFyZ3NbMV0pXG4gICAgICAgID8gW2FyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0gfHwge31dXG4gICAgICAgIDogW2FyZ3NbMF0sIG51bGwsIChhcmdzWzFdID09PSBudWxsID8gYXJnc1syXSA6IGFyZ3NbMV0pIHx8IHt9XTtcbn07XG5cbi8vIENyZWF0ZSBhIGN1c3RvbSBob29rIHdpdGggYSBtaWRkbGV3YXJlXG52YXIgd2l0aE1pZGRsZXdhcmUgPSBmdW5jdGlvbiAodXNlU1dSLCBtaWRkbGV3YXJlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSBub3JtYWxpemUoYXJncyksIGtleSA9IF9hWzBdLCBmbiA9IF9hWzFdLCBjb25maWcgPSBfYVsyXTtcbiAgICAgICAgdmFyIHVzZXMgPSAoY29uZmlnLnVzZSB8fCBbXSkuY29uY2F0KG1pZGRsZXdhcmUpO1xuICAgICAgICByZXR1cm4gdXNlU1dSKGtleSwgZm4sIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb25maWcpLCB7IHVzZTogdXNlcyB9KSk7XG4gICAgfTtcbn07XG5cbi8vIFdlIGhhdmUgdG8gc2V2ZXJhbCB0eXBlIGNhc3RpbmdzIGhlcmUgYmVjYXVzZSBgdXNlU1dSSW5maW5pdGVgIGlzIGEgc3BlY2lhbFxudmFyIElORklOSVRFX1BSRUZJWCA9ICckaW5mJCc7XG52YXIgZ2V0Rmlyc3RQYWdlS2V5ID0gZnVuY3Rpb24gKGdldEtleSkge1xuICAgIHJldHVybiBzZXJpYWxpemUoZ2V0S2V5ID8gZ2V0S2V5KDAsIG51bGwpIDogbnVsbClbMF07XG59O1xudmFyIHVuc3RhYmxlX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uIChnZXRLZXkpIHtcbiAgICByZXR1cm4gSU5GSU5JVEVfUFJFRklYICsgZ2V0Rmlyc3RQYWdlS2V5KGdldEtleSk7XG59O1xudmFyIGluZmluaXRlID0gKGZ1bmN0aW9uICh1c2VTV1JOZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnZXRLZXksIGZuLCBjb25maWcpIHtcbiAgICAgICAgdmFyIHJlcmVuZGVyID0gdXNlU3RhdGUoe30pWzFdO1xuICAgICAgICB2YXIgZGlkTW91bnRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICAgICAgICB2YXIgZGF0YVJlZiA9IHVzZVJlZigpO1xuICAgICAgICB2YXIgY2FjaGUgPSBjb25maWcuY2FjaGUsIF9hID0gY29uZmlnLmluaXRpYWxTaXplLCBpbml0aWFsU2l6ZSA9IF9hID09PSB2b2lkIDAgPyAxIDogX2EsIF9iID0gY29uZmlnLnJldmFsaWRhdGVBbGwsIHJldmFsaWRhdGVBbGwgPSBfYiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYiwgX2MgPSBjb25maWcucGVyc2lzdFNpemUsIHBlcnNpc3RTaXplID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIF9kID0gY29uZmlnLnJldmFsaWRhdGVGaXJzdFBhZ2UsIHJldmFsaWRhdGVGaXJzdFBhZ2UgPSBfZCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9kLCBfZSA9IGNvbmZpZy5yZXZhbGlkYXRlT25Nb3VudCwgcmV2YWxpZGF0ZU9uTW91bnQgPSBfZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZTtcbiAgICAgICAgLy8gVGhlIHNlcmlhbGl6ZWQga2V5IG9mIHRoZSBmaXJzdCBwYWdlLlxuICAgICAgICB2YXIgZmlyc3RQYWdlS2V5ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZpcnN0UGFnZUtleSA9IGdldEZpcnN0UGFnZUtleShnZXRLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIG5vdCByZWFkeVxuICAgICAgICB9XG4gICAgICAgIC8vIFdlIHVzZSBjYWNoZSB0byBwYXNzIGV4dHJhIGluZm8gKGNvbnRleHQpIHRvIGZldGNoZXIgc28gaXQgY2FuIGJlIGdsb2JhbGx5XG4gICAgICAgIC8vIHNoYXJlZC4gVGhlIGtleSBvZiB0aGUgY29udGV4dCBkYXRhIGlzIGJhc2VkIG9uIHRoZSBmaXJzdCBwYWdlIGtleS5cbiAgICAgICAgdmFyIGNvbnRleHRDYWNoZUtleSA9IG51bGw7XG4gICAgICAgIC8vIFBhZ2Ugc2l6ZSBpcyBhbHNvIGNhY2hlZCB0byBzaGFyZSB0aGUgcGFnZSBkYXRhIGJldHdlZW4gaG9va3Mgd2l0aCB0aGVcbiAgICAgICAgLy8gc2FtZSBrZXkuXG4gICAgICAgIHZhciBwYWdlU2l6ZUNhY2hlS2V5ID0gbnVsbDtcbiAgICAgICAgaWYgKGZpcnN0UGFnZUtleSkge1xuICAgICAgICAgICAgY29udGV4dENhY2hlS2V5ID0gJyRjdHgkJyArIGZpcnN0UGFnZUtleTtcbiAgICAgICAgICAgIHBhZ2VTaXplQ2FjaGVLZXkgPSAnJGxlbiQnICsgZmlyc3RQYWdlS2V5O1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNvbHZlUGFnZVNpemUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2FjaGVkUGFnZVNpemUgPSBjYWNoZS5nZXQocGFnZVNpemVDYWNoZUtleSk7XG4gICAgICAgICAgICByZXR1cm4gaXNVbmRlZmluZWQoY2FjaGVkUGFnZVNpemUpID8gaW5pdGlhbFNpemUgOiBjYWNoZWRQYWdlU2l6ZTtcbiAgICAgICAgICAgIC8vIGBjYWNoZWAgaXNuJ3QgYWxsb3dlZCB0byBjaGFuZ2UgZHVyaW5nIHRoZSBsaWZlY3ljbGVcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICAgICAgfSwgW3BhZ2VTaXplQ2FjaGVLZXksIGluaXRpYWxTaXplXSk7XG4gICAgICAgIC8vIGtlZXAgdGhlIGxhc3QgcGFnZSBzaXplIHRvIHJlc3RvcmUgaXQgd2l0aCB0aGUgcGVyc2lzdFNpemUgb3B0aW9uXG4gICAgICAgIHZhciBsYXN0UGFnZVNpemVSZWYgPSB1c2VSZWYocmVzb2x2ZVBhZ2VTaXplKCkpO1xuICAgICAgICAvLyBXaGVuIHRoZSBwYWdlIGtleSBjaGFuZ2VzLCB3ZSByZXNldCB0aGUgcGFnZSBzaXplIGlmIGl0J3Mgbm90IHBlcnNpc3RlZFxuICAgICAgICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZGlkTW91bnRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGRpZE1vdW50UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaXJzdFBhZ2VLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUga2V5IGhhcyBiZWVuIGNoYW5nZWQsIHdlIGtlZXAgdGhlIGN1cnJlbnQgcGFnZSBzaXplIGlmIHBlcnNpc3RTaXplIGlzIGVuYWJsZWRcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQocGFnZVNpemVDYWNoZUtleSwgcGVyc2lzdFNpemUgPyBsYXN0UGFnZVNpemVSZWYuY3VycmVudCA6IGluaXRpYWxTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGBpbml0aWFsU2l6ZWAgaXNuJ3QgYWxsb3dlZCB0byBjaGFuZ2UgZHVyaW5nIHRoZSBsaWZlY3ljbGVcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICAgICAgfSwgW2ZpcnN0UGFnZUtleV0pO1xuICAgICAgICAvLyBOZWVkcyB0byBjaGVjayBkaWRNb3VudFJlZiBkdXJpbmcgbW91bnRpbmcsIG5vdCBpbiB0aGUgZmV0Y2hlclxuICAgICAgICB2YXIgc2hvdWxkUmV2YWxpZGF0ZU9uTW91bnQgPSByZXZhbGlkYXRlT25Nb3VudCAmJiAhZGlkTW91bnRSZWYuY3VycmVudDtcbiAgICAgICAgLy8gQWN0dWFsIFNXUiBob29rIHRvIGxvYWQgYWxsIHBhZ2VzIGluIG9uZSBmZXRjaGVyLlxuICAgICAgICB2YXIgc3dyID0gdXNlU1dSTmV4dChmaXJzdFBhZ2VLZXkgPyBJTkZJTklURV9QUkVGSVggKyBmaXJzdFBhZ2VLZXkgOiBudWxsLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBmb3JjZVJldmFsaWRhdGVBbGwsIG9yaWdpbmFsRGF0YSwgZGF0YSwgcGFnZVNpemUsIHByZXZpb3VzUGFnZURhdGEsIGksIF9iLCBwYWdlS2V5LCBwYWdlQXJncywgcGFnZURhdGEsIHNob3VsZEZldGNoUGFnZTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gY2FjaGUuZ2V0KGNvbnRleHRDYWNoZUtleSkgfHwgW10sIGZvcmNlUmV2YWxpZGF0ZUFsbCA9IF9hWzBdLCBvcmlnaW5hbERhdGEgPSBfYVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplID0gcmVzb2x2ZVBhZ2VTaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VEYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpIDwgcGFnZVNpemUpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gc2VyaWFsaXplKGdldEtleShpLCBwcmV2aW91c1BhZ2VEYXRhKSksIHBhZ2VLZXkgPSBfYlswXSwgcGFnZUFyZ3MgPSBfYlsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFnZUtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBwYWdlS2V5YCBpcyBmYWxzeSwgc3RvcCBmZXRjaGluZyBuZXcgcGFnZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlRGF0YSA9IGNhY2hlLmdldChwYWdlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEZldGNoUGFnZSA9IHJldmFsaWRhdGVBbGwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JjZVJldmFsaWRhdGVBbGwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1VuZGVmaW5lZChwYWdlRGF0YSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmV2YWxpZGF0ZUZpcnN0UGFnZSAmJiAhaSAmJiAhaXNVbmRlZmluZWQoZGF0YVJlZi5jdXJyZW50KSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRSZXZhbGlkYXRlT25Nb3VudCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvcmlnaW5hbERhdGEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzVW5kZWZpbmVkKG9yaWdpbmFsRGF0YVtpXSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWNvbmZpZy5jb21wYXJlKG9yaWdpbmFsRGF0YVtpXSwgcGFnZURhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGZuICYmIHNob3VsZEZldGNoUGFnZSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZm4uYXBwbHkodm9pZCAwLCBwYWdlQXJncyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlRGF0YSA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldChwYWdlS2V5LCBwYWdlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChwYWdlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VEYXRhID0gcGFnZURhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmNlIHdlIGV4ZWN1dGVkIHRoZSBkYXRhIGZldGNoaW5nIGJhc2VkIG9uIHRoZSBjb250ZXh0LCBjbGVhciB0aGUgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGNvbnRleHRDYWNoZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhlIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkYXRhXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0sIGNvbmZpZyk7XG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhUmVmXG4gICAgICAgIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGF0YVJlZi5jdXJyZW50ID0gc3dyLmRhdGE7XG4gICAgICAgIH0sIFtzd3IuZGF0YV0pO1xuICAgICAgICB2YXIgbXV0YXRlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGEgPSBhcmdzWzBdO1xuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byB0cnVlLlxuICAgICAgICAgICAgdmFyIHNob3VsZFJldmFsaWRhdGUgPSBhcmdzWzFdICE9PSBmYWxzZTtcbiAgICAgICAgICAgIC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGtleSBpcyBzdGlsbCBmYWxzeS5cbiAgICAgICAgICAgIGlmICghY29udGV4dENhY2hlS2V5KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChzaG91bGRSZXZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHJldmFsaWRhdGUgdGhlIHBhZ2VzIHRoYXQgYXJlIGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsRGF0YSA9IGRhdGFSZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KGNvbnRleHRDYWNoZUtleSwgW2ZhbHNlLCBvcmlnaW5hbERhdGFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxpbmcgYG11dGF0ZSgpYCwgd2UgcmV2YWxpZGF0ZSBhbGwgcGFnZXNcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KGNvbnRleHRDYWNoZUtleSwgW3RydWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJncy5sZW5ndGggPyBzd3IubXV0YXRlKGRhdGEsIHNob3VsZFJldmFsaWRhdGUpIDogc3dyLm11dGF0ZSgpO1xuICAgICAgICB9LCBcbiAgICAgICAgLy8gc3dyLm11dGF0ZSBpcyBhbHdheXMgdGhlIHNhbWUgcmVmZXJlbmNlXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICAgICAgW2NvbnRleHRDYWNoZUtleV0pO1xuICAgICAgICAvLyBGdW5jdGlvbiB0byBsb2FkIHBhZ2VzIGRhdGEgZnJvbSB0aGUgY2FjaGUgYmFzZWQgb24gdGhlIHBhZ2Ugc2l6ZS5cbiAgICAgICAgdmFyIHJlc29sdmVQYWdlc0Zyb21DYWNoZSA9IGZ1bmN0aW9uIChwYWdlU2l6ZSkge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGFuIGFycmF5IG9mIHBhZ2UgZGF0YVxuICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1BhZ2VEYXRhID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZVNpemU7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBwYWdlS2V5ID0gc2VyaWFsaXplKGdldEtleShpLCBwcmV2aW91c1BhZ2VEYXRhKSlbMF07XG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBjYWNoZWQgcGFnZSBkYXRhLlxuICAgICAgICAgICAgICAgIHZhciBwYWdlRGF0YSA9IHBhZ2VLZXkgPyBjYWNoZS5nZXQocGFnZUtleSkgOiBVTkRFRklORUQ7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBjdXJyZW50IGRhdGEgaWYgd2UgY2FuJ3QgZ2V0IGl0IGZyb20gdGhlIGNhY2hlLlxuICAgICAgICAgICAgICAgIGlmIChpc1VuZGVmaW5lZChwYWdlRGF0YSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgZGF0YS5wdXNoKHBhZ2VEYXRhKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VEYXRhID0gcGFnZURhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGRhdGFcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICAvLyBFeHRlbmQgdGhlIFNXUiBBUElcbiAgICAgICAgdmFyIHNldFNpemUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAvLyBJdCBpcyBwb3NzaWJsZSB0aGF0IHRoZSBrZXkgaXMgc3RpbGwgZmFsc3kuXG4gICAgICAgICAgICBpZiAoIXBhZ2VTaXplQ2FjaGVLZXkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHNpemU7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihhcmcpKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IGFyZyhyZXNvbHZlUGFnZVNpemUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IGFyZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2l6ZSAhPSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYWNoZS5zZXQocGFnZVNpemVDYWNoZUtleSwgc2l6ZSk7XG4gICAgICAgICAgICBsYXN0UGFnZVNpemVSZWYuY3VycmVudCA9IHNpemU7XG4gICAgICAgICAgICByZXJlbmRlcih7fSk7XG4gICAgICAgICAgICByZXR1cm4gbXV0YXRlKHJlc29sdmVQYWdlc0Zyb21DYWNoZShzaXplKSk7XG4gICAgICAgIH0sIFxuICAgICAgICAvLyBgY2FjaGVgIGFuZCBgcmVyZW5kZXJgIGlzbid0IGFsbG93ZWQgdG8gY2hhbmdlIGR1cmluZyB0aGUgbGlmZWN5Y2xlXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICAgICAgW3BhZ2VTaXplQ2FjaGVLZXksIHJlc29sdmVQYWdlU2l6ZSwgbXV0YXRlXSk7XG4gICAgICAgIC8vIFVzZSBnZXR0ZXIgZnVuY3Rpb25zIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMgY2F1c2VkIGJ5IHRyaWdnZXJpbmdcbiAgICAgICAgLy8gYWxsIHRoZSBnZXR0ZXJzIG9mIHRoZSByZXR1cm5lZCBzd3Igb2JqZWN0LlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZTogcmVzb2x2ZVBhZ2VTaXplKCksXG4gICAgICAgICAgICBzZXRTaXplOiBzZXRTaXplLFxuICAgICAgICAgICAgbXV0YXRlOiBtdXRhdGUsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN3ci5lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3dyLmRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IGlzVmFsaWRhdGluZygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3dyLmlzVmFsaWRhdGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xufSk7XG52YXIgaW5kZXggPSB3aXRoTWlkZGxld2FyZSh1c2VTV1IsIGluZmluaXRlKTtcblxuZXhwb3J0IHsgaW5kZXggYXMgZGVmYXVsdCwgaW5maW5pdGUsIHVuc3RhYmxlX3NlcmlhbGl6ZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9